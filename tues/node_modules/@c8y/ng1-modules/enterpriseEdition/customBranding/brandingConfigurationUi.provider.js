"use strict";function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?Object(arguments[t]):{},o=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),o.forEach(function(t){_defineProperty(e,t,r[t])})}return e}function _defineProperty(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}!function(){function t(s){m.$inject=["$q","c8yPermissions","gettextCatalog","c8yInventory","c8yBinary"];var c="brandingVariables",t={title:s("General"),items:["html_title"]},e={title:s("Main logo"),items:["favicon","brand-logo-img","brand-logo-height"]},r={title:s("Navigator logo"),items:["appLogo","appLogo-height"]},o={title:s("Type"),key:"font.options",items:["font-family-sans-serif","headings-font-family","navigator-font-family","__import-font"]},a={title:s("Colors"),items:["brand-primary","brand-complementary","brand-dark","brand-light","gray-text","link-color","body-background-color"]},i={title:s("Top bar"),items:["headerColor","header-text-color","header-hover-color"]},n={title:s("Navigator"),items:["navColor","navColorHeader","navigator-title-color","navigator-text-color","navigator-separator-color","navigator-active-color","navigator-active-bg"]},l={title:s("Misc"),items:["btn-border-radius-base"]},g={title:s("Cookie banner"),items:["cookieBannerTitle","cookieBannerText","policyUrl"]},d=[t,e,r,o,a],p=[i,n,l,g];return{$get:m};function m(i,t,r,a,n){var l=["brand-logo-img","appLogo","favicon"];return{getSchema:o,getForm:function(){return i.when([_.map(d,e),_.map(p,e)])},getSchemaFormOptions:function(){return t.hasAnyRole(["ROLE_OPTION_MANAGEMENT_ADMIN"]).then(function(t){return{formDefaults:{readonly:!t}}})},getBranding:function(){var t=o(),e=a.list({type:c});return i.all({schema:t,managedObjects:e}).then(function(t){var r=_.pick(t.managedObjects[0],["id","c8y_less_variables","binary_ref","cookieBanner"]),o=[];return _.each(l,function(e){if(r.binary_ref&&r.binary_ref[e]){var t=a.detail(r.binary_ref[e],{},{silentError:!0}).then(function(t){r.c8y_less_variables[e]=t.data},function(){});o.push(t)}}),i.all(o).then(_.constant(r))})},saveConfiguration:function(t,e){var r={type:c,c8y_less_variables:t.c8y_less_variables,binary_ref:t.binary_ref||{}};e&&(r.id=e);return a.save(r)},saveBinary:function(e,t,r,o){if(_.isEqual(t,o))return i.when(o);var a={c8y_Branding:e,fileSrc:t.fileSrc};return n.upload(t,a).then(function(t){return r&&r[e]&&o&&n.removeBinary(r[e]),t.data})},BINARY_VARS:l};function o(){var t=s("Hex, rgb or rgba value. Default: {{defaultColor}}"),e={message:{cssColor:r.getString("Must be a valid CSS color value.")},validator:{cssColor:function(t){if(_.isEmpty(t))return!0;var e=document.createElement("SPAN");return e.style.color=t,!_.isEmpty(e.style.color)}}};return i.when({type:"object",properties:{html_title:{title:r.getString("Title"),type:"string",description:r.getString("Title to be used in browser tab")},"brand-logo-img":{title:"".concat(r.getString("Brand logo")),type:"string",description:r.getString("Supported files: *.png, *.svg"),format:"file","x-schema-form":{type:"fileUpload",allowedFileType:["image"]}},favicon:{title:"".concat(r.getString("Favicon")),type:"string",description:r.getString("Supported files: *.ico"),format:"file","x-schema-form":{type:"fileUpload",allowedFileType:["image"]}},"brand-logo-height":{title:r.getString("Brand logo height"),type:"number",minimum:0,description:r.getString("Height for setting the right proportion for the logo: height / width x 100")},appLogo:{title:r.getString("Navigator logo"),type:"string",description:r.getString("Supported files: *.png, *.svg"),format:"file","x-schema-form":{type:"fileUpload",allowedFileType:["image"]}},"appLogo-height":{title:r.getString("Navigator logo height"),type:"number",minimum:0,description:r.getString("Height for setting the right proportion for the navigator logo: height / width x 100 - should be 230px wide")},"font-family-sans-serif":{title:r.getString("Base font stack"),type:"string","x-schema-form":{placeholder:r.getString('e.g. "Lato", Arial, Verdana, sans-serif')}},"headings-font-family":{title:r.getString("Headings font stack"),type:"string","x-schema-form":{placeholder:r.getString('e.g. "Lato", Arial, Verdana, sans-serif')}},"navigator-font-family":{title:r.getString("Navigator font stack"),type:"string",default:"@font-family-sans-serif","x-schema-form":{type:"radios",enum:["@font-family-sans-serif","@headings-font-family"],titleMap:[{value:"@font-family-sans-serif",name:r.getString("Same as base font")},{value:"@headings-font-family",name:r.getString("Same as headings font")}]}},"__import-font":{title:r.getString("URL"),description:r.getString("A link to existing remote fonts (e.g. Google Fonts)"),type:"string"},"brand-primary":{title:"".concat(r.getString("Main brand color")),type:"string",description:r.getString("Hex, rgb or rgba value."),"x-schema-form":{placeholder:r.getString("e.g.: #27b3ce"),validationMessage:_objectSpread({},e.message),$validators:_objectSpread({},e.validator)}},"brand-complementary":{title:r.getString("Secondary brand color"),type:"string",description:r.getString(t,{defaultColor:g("brand-complementary")}),"x-schema-form":{validationMessage:_objectSpread({},e.message),$validators:_objectSpread({},e.validator)}},"brand-dark":{title:r.getString("Dark brand color"),type:"string",description:r.getString(t,{defaultColor:g("brand-dark")}),"x-schema-form":{validationMessage:_objectSpread({},e.message),$validators:_objectSpread({},e.validator)}},"brand-light":{title:r.getString("Light brand color"),type:"string",description:r.getString(t,{defaultColor:g("brand-light")}),"x-schema-form":{validationMessage:_objectSpread({},e.message),$validators:_objectSpread({},e.validator)}},"gray-text":{title:r.getString("Text color"),type:"string",description:r.getString(t,{defaultColor:g("gray-text")}),"x-schema-form":{validationMessage:_objectSpread({},e.message),$validators:_objectSpread({},e.validator)}},"link-color":{title:r.getString("Link color"),type:"string",description:r.getString(t,{defaultColor:g("link-color")}),"x-schema-form":{validationMessage:_objectSpread({},e.message),$validators:_objectSpread({},e.validator)}},"body-background-color":{title:r.getString("Main background color"),type:"string",description:r.getString(t,{defaultColor:g("body-background-color")}),"x-schema-form":{validationMessage:_objectSpread({},e.message),$validators:_objectSpread({},e.validator)}},headerColor:{title:r.getString("Background color"),type:"string",description:r.getString(t,{defaultColor:g("headerColor")}),"x-schema-form":{validationMessage:_objectSpread({},e.message),$validators:_objectSpread({},e.validator)}},"header-text-color":{title:r.getString("Text color"),type:"string",description:r.getString(t,{defaultColor:g("header-text-color")}),"x-schema-form":{validationMessage:_objectSpread({},e.message),$validators:_objectSpread({},e.validator)}},"header-hover-color":{title:r.getString("Button hover text color"),type:"string",description:r.getString(t,{defaultColor:g("header-hover-color")}),"x-schema-form":{validationMessage:_objectSpread({},e.message),$validators:_objectSpread({},e.validator)}},navColor:{title:r.getString("Background color"),type:"string",description:r.getString(t,{defaultColor:g("navColor")}),"x-schema-form":{validationMessage:_objectSpread({},e.message),$validators:_objectSpread({},e.validator)}},navColorHeader:{title:r.getString("Logo wrapper background color"),type:"string",description:r.getString(t,{defaultColor:g("navColorHeader")}),"x-schema-form":{validationMessage:_objectSpread({},e.message),$validators:_objectSpread({},e.validator)}},"navigator-title-color":{title:r.getString("Title color"),type:"string",description:r.getString(t,{defaultColor:g("navigator-title-color")}),"x-schema-form":{validationMessage:_objectSpread({},e.message),$validators:_objectSpread({},e.validator)}},"navigator-text-color":{title:r.getString("Text and buttons color"),type:"string",description:r.getString(t,{defaultColor:g("navigator-text-color")}),"x-schema-form":{validationMessage:_objectSpread({},e.message),$validators:_objectSpread({},e.validator)}},"navigator-separator-color":{title:r.getString("Separator line color"),type:"string",description:r.getString(t,{defaultColor:g("navigator-separator-color")}),"x-schema-form":{validationMessage:_objectSpread({},e.message),$validators:_objectSpread({},e.validator)}},"navigator-active-color":{title:r.getString("Text color of current item in navigator"),type:"string",description:r.getString(t,{defaultColor:g("navigator-active-color")}),"x-schema-form":{validationMessage:_objectSpread({},e.message),$validators:_objectSpread({},e.validator)}},"navigator-active-bg":{title:r.getString("Background color of current item in navigator"),type:"string",description:r.getString(t,{defaultColor:g("navigator-active-bg")}),"x-schema-form":{validationMessage:_objectSpread({},e.message),$validators:_objectSpread({},e.validator)}},"btn-border-radius-base":{title:r.getString("Button border-radius"),type:"number",minimum:0,maximum:20,description:r.getString("Value in px")},cookieBannerTitle:{title:r.getString("Title"),type:"string"},cookieBannerText:{title:r.getString("Text"),type:"string","x-schema-form":{type:"textarea"}},policyUrl:{title:r.getString("Link to privacy policy"),type:"string","x-schema-form":{placeholder:r.getString("e.g. https://example.com/mypolicy")}}}})}function g(t){return{"brand-complementary":"#07b91A","gray-text":"#444","link-color":"main brand color","body-background-color":"#FAFAFA","brand-dark":"#0B385B","brand-light":"#5FAEEC",headerColor:"#FFFFFF","header-text-color":"#49595B","header-hover-color":"main brand color",navColor:"#2c3637",navColorHeader:"transparent","navigator-title-color":"#FFFFFF","navigator-text-color":"#FAFAFA","navigator-separator-color":"#FAFAFA","navigator-active-color":"#FAFAFA","navigator-active-bg":"main brand color"}[t]}function e(t){var e={type:"collapse"};return _.assign(e,t),e.items=_.map(e.items,function(t){return{key:[t]}}),e.title=r.getString(e.title),e}}}t.$inject=["gettext"],angular.module("c8y.custom-branding").provider("c8yBrandingConfigurationUi",t)}();