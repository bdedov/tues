"use strict";!function(){function e(n,l){return{create:function(e){return n.all([e.google?t():n.when(),e.here?r():n.when(),e.bing?o():n.when()]).then(function(a){return n.all([e.googleSatellite?t({satellite:!0}):n.when(),e.hereSatellite?r({satellite:!0}):n.when(),e.bingSatellite?o({satellite:!0}):n.when()]).then(function(e){return a.concat(e)})}).then(function(e){var a=e[0],t=e[1],n=e[2],l=e[3],r=e[4],o=e[5];return _.filter([{name:"Google",layer:a},{name:"HERE",layer:t},{name:"Bing",layer:n},{name:"Google (Satellite)",layer:l},{name:"HERE (Satellite)",layer:r},{name:"Bing (Satellite)",layer:o}],"layer")})}};function t(e){var a=(e||{}).satellite?"":"Terrain";return window.google&&window.google.maps&&L.Google?n.when(new L.Google(a)):i(["https://maps.googleapis.com/maps/api/js?v=3&key=AIzaSyBqt66Dt7TfkvUqaWwhcBC9_yNNElbcDx0","https://cdnjs.cloudflare.com/ajax/libs/leaflet-plugins/2.0.0/layer/tile/Google.js"]).then(function(){return new L.Google(a)})}function r(e){var a=e||{},t={base:a.satellite?"aerial":"base",scheme:a.satellite?"satellite.day":"pedestrian.day"};return n.when(L.tileLayer("https://{s}.{base}.maps.api.here.com/maptile/2.1/{type}/{mapID}/{scheme}/{z}/{x}/{y}/{size}/{format}?app_id={app_id}&app_code={app_code}&lg={language}",{attribution:'Map &copy; 2016 <a href="https://developer.here.com">HERE</a>',subdomains:"1234",base:t.base,type:"maptile",scheme:t.scheme,app_id:"jJtCeSr9eLfnc0tLrbpm",app_code:"GiUo42fjRxnM8ZYTh8t5KA",mapID:"newest",maxZoom:20,language:"eng",format:"png8",size:"256"}))}function o(e){var a="AvwwAdv8hc1ZdXMel7ABbQnYZbW4NqXmK_LvT7o5GZW3GOMxygEMauBWpMvEXTLY",t=(e||{}).satellite?"Aerial":"Road";return L.BingLayer?n.when(new L.BingLayer(a,{type:t})):i(["https://cdnjs.cloudflare.com/ajax/libs/leaflet-plugins/2.0.0/layer/tile/Bing.js"]).then(function(){return new L.BingLayer(a,{type:t})})}function i(e){var a=_.map(e,function(e){var a=n.defer(),t=angular.element("<script>");return angular.element("body").append(t),t.on("load",function(){a.resolve(),l.$apply()}).attr("src",e),a.promise});return n.all(a)}}e.$inject=["$q","$rootScope"],angular.module("c8y.parts.mapCustomBaseLayers").factory("mapCustomBaseLayers",e)}();