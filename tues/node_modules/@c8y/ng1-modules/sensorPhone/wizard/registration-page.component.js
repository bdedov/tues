"use strict";!function(){function n(n,e,o,t,a,i){var r=this,s=n.$id,c="/managedobjects/*";function h(){t.addListener(s,c,t.realtimeActions().CREATE,d),t.start(s,c)}function d(n,e){var t=e.type;("c8y_SensorPhone"===t||"c8y_SensorPhone_iOS"===t||e.c8y_IsSensorPhone)&&a.addPhone(e).then(function(){return i.checkDashboardExists(t).then(function(n){return n?o.when(n):i.createDefaultDashboard(t)})}).then(function(){r.phoneDashboardReady=!0})}_.assign(r,{$onInit:function(){_.assign(r,{phoneDashboardReady:!1}),a.generateRegistrationData().then(function(n){r.registrationData=n}).catch(function(){r.registrationData=null}).then(h)},$postLink:function(){e.find(".qrcode").addClass("center-block")},$onDestroy:function(){t.stop(s,c)}})}n.$inject=["$scope","$element","$q","c8yRealtime","phoneRegistrationService","phoneDashboardService"],angular.module("c8y.sensorPhone").component("phoneRegistrationPage",{templateUrl:":::PLUGIN_PATH:::/wizard/registration-page.html",bindings:{onGoTo:"&",onCancel:"&",onOk:"&"},controller:n,controllerAs:"vm"})}();