"use strict";!function(){function t(t,n,e,r,o,i,a,c,u,d,p,s){var y,g="c8y_IsSensorPhoneGroup";return{createAddPhoneLink:function(){return{priority:1,icon:"c8y-icon c8y-icon-mobile-add",label:p("Add smartphone"),click:h,backgroundColorClass:"d"}},generateRegistrationData:function(){return r.current().then(function(t){var e=o.getPassword();return e?[window.location.origin,d.crypt(t.id),d.crypt(e)].join(";"):n.reject()})},addPhone:function(e){return a.list({fragmentType:g}).then(_.head).then(function(t){return t?f(e,y=t):function(){var t={c8y_Global:{},c8y_IsDeviceGroup:{},type:u.getDeviceGroupType().type,name:s.getString("Smartphones")};return t[g]={},a.create(t).then(i.getResData)}().then(function(t){return y=t,c.addGroupNavigation(t),f(e,t)})})}};function h(){return e.open({templateUrl:":::PLUGIN_PATH:::/wizard/registration-wizard.html"}).result.then(l)}function l(){t.path("/group/".concat(y.id)),c.updateGroupChildren(y)}function f(t,e){return a.addChildAsset(e,t).then(function(){c.updateGroupNavigation(e)})}}t.$inject=["$location","$q","c8yWizardModal","c8yUser","c8yAuth","c8yBase","c8yInventory","groupTypesHierarchyNavigator","c8yGroupTypesConfig","crypter","gettext","gettextCatalog"],angular.module("c8y.sensorPhone").factory("phoneRegistrationService",t)}();