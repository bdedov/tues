"use strict";!function(){function e(e,u,a,t){var s=this;function r(){e.requestTemplateForm.$setPristine(),e.requestTemplateForm.$setUntouched()}function n(){e.requestTemplateForm.msgId.$validate()}function l(){return s.requestTemplate&&s.requestTemplate.api&&s.requestTemplate.method}function o(){return s.requestTemplate&&a.doesRequestTemplateRequireByIdOrByExternalId(s.requestTemplate)}_.assign(s,{validation:t.validation,methods:a.Methods.values(),apis:a.APIs.values(),types:a.typesForUI(),getMethodsForAPI:a.getMethodsForAPI,setupRequestTemplateDefaults:a.setupRequestTemplateDefaults,addCustomValue:a.addRequestTemplateCustomValue,removeCustomValue:a.removeRequestTemplateCustomValue,$onChanges:function(e){if(e.requestTemplate&&e.requestTemplate.currentValue){var t=e.requestTemplate.currentValue;s.originalMsgId=t.msgId,s.requestTemplate=_.cloneDeep(t),s.originalMsgId||a.setupRequestTemplateDefaults(s.requestTemplate),u(r),u(n)}},apiAndMethodSelected:l,shouldShowByIdOrByExternalId:o,noRequiredApiValues:function(){return l()&&!o()&&0===s.requestTemplate.mandatoryValues.length},onCustomValueDataTypeChanged:function(e){e.value=null},save:function(){s.onSave({requestTemplate:s.requestTemplate})},remove:function(){s.onRemove({requestTemplate:s.requestTemplate})},cancel:function(){s.onCancel()},getPreviews:function(e){return e?a.getRequestTemplatePreview(e).csv:""}})}e.$inject=["$scope","$timeout","c8ySmartRestTemplates","c8yConfig"],angular.module("c8y.smartRestEditor").component("c8ySmartRestRequestEditor",{bindings:{template:"<",requestTemplate:"<",onSave:"&",onRemove:"&",onCancel:"&"},templateUrl:":::PLUGIN_PATH:::/requestEditor/requestEditor.html",controller:e,controllerAs:"vm"})}();