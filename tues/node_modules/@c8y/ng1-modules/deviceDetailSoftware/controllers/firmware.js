"use strict";angular.module("c8y.deviceDetailSoftware").controller("deviceDetailFirmwareVPCtrl",["$scope","c8yDeviceControl","c8yInventory","c8yDevices","c8yAlert","gettext",function(i,t,e,r,c,n){var a="c8y_Firmware";function o(e){i.firmwares=e.map(_.partialRight(_.pick,"name","version","url"))}function l(){i.activeFirmwareUpload=!i.activeFirmwareUpload}function v(){return r.supportsOperation(i.device,a)}i.newFirmware={selected:null},i.toggleUpload=l,i.visible=function(){return i.$eval("device.".concat(a))||v()},i.actionable=v,i.uploadFirmware=function(e,r){var i="Update firmware to: ".concat(r.name," (version: ").concat(r.version,")."),a={deviceId:e.id,description:i,c8y_Firmware:_.cloneDeep(r)};return l(),t.create(a).then(function(){c.success(n("Device firmware will be updated."))})},i.getCurrentFirmware=function(){var e="";if(i.device){var r=i.device.c8y_Firmware;e=r&&r.name?"".concat(r.name," - ").concat(r.version):n("No firmware information available.")}return e},e.list({type:a}).then(o)}]);