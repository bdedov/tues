<div ng-controller="groupDetailsCtrl as vm">
  <c8y-ui-action-bar-set>
    <li>
      <button
        title="{{ 'Delete group' | translate }}"
        class="btn btn-link"
        ng-click="removeGroup()"
        c8y-if-allowed
        admin-mos="[vm.groupId]"
      >
        <i c8y-icon="trash"></i> {{ 'Delete group' | translate }}
      </button>
    </li>
  </c8y-ui-action-bar-set>

  <div class="flex-row wrap group-info">
    <div style="align-self: flex-start;">
      <i
        style="font-size: 50px; margin-bottom:0;"
        class="c8y-icon c8y-icon-duocolor"
        ng-class="iconForGroup"
      >
      </i>
      <br />
      <small
        class="text-center center-block"
        style="position:relative;"
        ng-show="!groupDetailsForm.editable"
      >
        <small uib-tooltip="{{ 'Last update' | translate }}" class="text-muted">
          {{ group.lastUpdated | absoluteDateOnly }}<br />
          {{ group.lastUpdated | absoluteTime }}
        </small>
      </small>
    </div>
    <form
      class="col-sm-6 form-editable"
      name="groupDetailsForm"
      ng-submit="save(group)"
      novalidate
      ng-class="{'form-read-only': !groupDetailsForm.editable}"
    >
      <div class="form-group">
        <input
          id="group-name"
          type="text"
          class="form-control input-lg text-truncate"
          ng-model="group.name"
          maxlength="{{ c8yConfig.validation.groupName.maxlength }}"
          placeholder="{{ 'e.g. My group' | translate }}"
          required
        />
      </div>
      <div class="form-group">
        <textarea
          class="form-control"
          ng-model="group.c8y_Notes"
          placeholder="{{ 'e.g. my notes' | translate }}"
          ng-disabled="readOnly"
          ng-show="groupDetailsForm.editable"
        ></textarea>
        <p ng-show="!groupDetailsForm.editable" class="word-break">{{ group.c8y_Notes }}</p>
      </div>
      <small ng-show="!groupDetailsForm.editable" class="text-muted form-edit-btn">
        <a
          title="{{ 'Edit' | translate }}"
          href=""
          class="form-edit-btn"
          ng-click="groupDetailsForm.editable = !groupDetailsForm.editable"
        >
          <i c8y-icon="pencil"></i> <translate>Edit</translate>
        </a>
      </small>

      <c8y-if-allowed admin-mos="[group.id]">
        <div class="form-actions">
          <button
            title="{{ 'Cancel' | translate }}"
            type="button"
            class="btn btn-default"
            ng-click="onCancel(groupDetailsForm)"
          >
            <translate>Cancel</translate>
          </button>
          <button
            title="{{ 'Save' | translate }}"
            type="submit"
            class="btn btn-primary"
            ng-disabled="groupDetailsForm.$invalid || groupDetailsForm.$pristine"
            translate
          >
            Save
          </button>
        </div>
      </c8y-if-allowed>
    </form>
  </div>

  <div ng-if="smartRules" class="smart-rules-wrapper">
    <div ng-include="'smartRules/views/list.html'"></div>
  </div>
</div>
