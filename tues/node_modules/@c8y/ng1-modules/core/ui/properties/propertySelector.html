<div class="form-group">
  <label>{{ 'Properties' | translate }}</label>

  <div class="dropdown pull-right" ng-hide="hideActions" uib-dropdown>
    <button
      class="btn btn-link dropdown-toggle c8y-dropdown"
      style="cursor: pointer;"
      uib-dropdown-toggle
    >
      <i c8y-icon="plus"></i> {{ 'Add action' | translate }}
    </button>
    <ul class="dropdown-menu" uib-dropdown-menu>
      <li ng-repeat="action in actions">
        <a href="" ng-click="addAction(action)">{{ action.config.label | translate }}</a>
      </li>
    </ul>
  </div>

  <a
    class="btn btn-link text-center pull-right"
    style="cursor: pointer; margin-right:30"
    data-ng-click="addProperty()"
  >
    <i c8y-icon="plus"></i>
    {{ 'Add property' | translate }}
  </a>
</div>

<table class="table table-vertical-middle form-group">
  <thead>
    <th style="width:5%;"></th>
    <th style="width:5%;">
      <label>{{ 'Show' | translate }}</label>
    </th>
    <th style="width:28%;">
      <label>{{ 'Label' | translate }}</label>
    </th>
    <th style="width:28%;">
      <label>{{ 'Property' | translate }}</label>
    </th>
    <th style="width:28%;" ng-if="showRenderType()">
      <label>{{ 'Render type' | translate }}</label>
    </th>
    <th style="width:5%;"></th>
  </thead>

  <tbody ui-sortable="{handle: '.handle', stop: onPropertiesOrderChanged}" ng-model="properties">
    <tr class="property" ng-repeat="property in properties">
      <td style="width:5%" class="handle">
        <i class="fa fa-bars" style="cursor: move;"></i>
      </td>
      <td style="width:5%">
        <input type="checkbox" ng-change="updateOptions()" ng-model="property.__active" />
      </td>
      <td style="width:28%">
        <input class="form-control property-label" data-ng-model="property.label" />
      </td>
      <td style="width:28%">
        <a
          class="btn btn-xs btn-default"
          ng-show="!!property.configSchema"
          href=""
          ng-click="configComputeProperty(property)"
          uib-tooltip="{{ 'Configure computed property' | translate }}"
        >
          <i c8y-icon="bolt"></i>
          {{ displayKeyPath(property.keyPath) }}
        </a>
        <span ng-hide="!!property.configSchema">{{ displayKeyPath(property.keyPath) }}</span>
      </td>
      <td style="width:28%" ng-if="showRenderType()">
        <div class="input-group">
          <select
            style="height: 30px;"
            class="form-control"
            name="renderType"
            ng-disabled="property.isAction"
            ng-model="property.renderType"
            ng-options="render.name as render.humanName | translate for render in renderTypes"
          >
          </select>
          <span style="display:table-cell; vertical-align:middle;">
            <button
              type="button"
              class="btn btn-xs pull-right"
              title="{{ 'Config renderer' | translate }}"
              ng-click="configRenderer(property)"
              ng-show="rendererHasConfig(property.renderType)"
              ng-class="{'btn-danger':!property.renderConfig, 'btn-default': property.renderConfig}"
            >
              <i c8y-icon="sliders"></i>
            </button>
          </span>
        </div>
      </td>
      <td style="width:5%">
        <button
          type="button"
          class="btn btn-danger btn-xs showOnHover pull-right"
          title="{{ 'Delete property' | translate }}"
          ng-click="removeProperty(property)"
        >
          <i c8y-icon="times"></i>
        </button>
      </td>
    </tr>
  </tbody>
</table>
<ng-form name="propertiesHiddenForm"></ng-form>
