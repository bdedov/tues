"use strict";angular.module("c8y.ui").directive("c8ySilo",function(){return{restrict:"EA",templateUrl:":::PLUGIN_PATH:::/ui/views/silo.html",scope:{dp:"=",measurement:"=",time:"=",fractionSize:"="},link:function(c,l){var m,u,p,o={min:0,max:100};function s(e){return{x:e.pageX-p.offset().left,y:e.pageY-p.offset().top}}function e(){var e=c.dp;_.isUndefined(e)||function(e){c.value=Number(c.measurement&&c.measurement.value);var t=c.value;c.min=Number(e.min||o.min),m=c.min,c.max=Number(e.max||o.max);var a=(u=c.max)-m,n=100*(t-m)/a;c.minStyle={bottom:"-6px"},c.maxStyle={top:"-4px"},c.yellowRangeStyle={bottom:"".concat(100*(e.yellowRangeMin-m)/a,"%"),top:"".concat(100-100*(e.yellowRangeMax-m)/a,"%")},c.redRangeStyle={bottom:"".concat(100*(e.redRangeMin-m)/a,"%"),top:"".concat(100-100*(e.redRangeMax-m)/a,"%")},c.valueStyle={bottom:"".concat(_.clamp(n,0,100),"%"),"border-color":"#49595B",left:"-2px",right:"-2px"},c.targetStyle={bottom:"".concat(100*(e.target-m)/a,"%")},c.target=e.target,c.unit=e.unit}(e)}p=l.find(".siloPointer-wrapper"),c.showValue=!1,c.onMouseMove=function(e){if(c.showValue){var t=s(e),a=u-(u-m)*(t.y-2)/(p.height()-4);c.currentValue=Math.round(_.clamp(a,m,u)),n=e,o=l.find(".graphHoverInfoCurrent"),r=s(n).x,i=s(n).y,o.css("top","".concat(i,"px")),o.css("left","".concat(r,"px"))}var n,o,r,i},c.$watch("measurement",e,!0),c.$watch("dp",e,!0)}}});