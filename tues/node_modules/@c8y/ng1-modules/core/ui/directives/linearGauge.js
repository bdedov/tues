"use strict";angular.module("c8y.ui").directive("c8yLinearGauge",function(){return{restrict:"EA",templateUrl:":::PLUGIN_PATH:::/ui/views/linearGauge.html",scope:{dp:"=",measurement:"=",time:"=",fractionSize:"="},link:function(u,l){var o,m,c,t={min:0,max:100};function g(e){return{x:e.pageX-c.offset().left,y:e.pageY-c.offset().top}}function e(){var e=_.cloneDeep(u.dp);_.isUndefined(e)||(function(e){var a=Number(e.min),n=Number(e.max),t=function(e){return _.clamp(Number(e),a,n)};e.min=t(e.min),e.max=t(e.max),e.yellowRangeMin=t(e.yellowRangeMin),e.yellowRangeMax=t(e.yellowRangeMax),e.redRangeMin=t(e.redRangeMin),e.redRangeMax=t(e.redRangeMax)}(e),function(e){var a=Number(u.measurement&&u.measurement.value);o=_.isNaN(Number(e.min))?t.min:Number(e.min),m=_.isNaN(Number(e.max))?t.max:Number(e.max),u.value=a,u.min=o,u.max=m,u.showValueWarning=m<a||a<o;var n=m-o;u.yellowRangeStyle={left:"".concat(100*(e.yellowRangeMin-o)/n,"%"),right:"".concat(100-100*(e.yellowRangeMax-o)/n,"%")},u.redRangeStyle={left:"".concat(100*(e.redRangeMin-o)/n,"%"),right:"".concat(100-100*(e.redRangeMax-o)/n,"%")},u.valueStyle={left:"".concat(Math.max(Math.min(100*(a-o)/n,100),0),"%")},u.targetStyle={left:"".concat(100*(e.target-o)/n,"%")},u.target=e.target,u.unit=e.unit}(e))}c=l.find(".linearGaugePointer-wrapper"),u.showValue=!1,u.onMouseMove=function(e){if(u.showValue){var a=o+(m-o)*g(e).x/c.width();u.currentValue=Math.round(a),n=e,t=l.find(".graphHoverInfoCurrent"),r=g(n).x,i=g(n).y,t.css("left","".concat(r,"px")),t.css("top","".concat(i+10,"px"))}var n,t,r,i},u.$watch("measurement",e,!0),u.$watch("dp",e,!0)}}});