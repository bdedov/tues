<div class="list-group-item collapsible" ng-class="{'expanded': vm.isDetailOpen}">
  <div class="flex-row" ng-click="vm.toggleDetail()">
    <div class="list-item-actions">
      <button
        type="button"
        title="{{ 'Expand' | translate }}"
        class="collapse-btn"
        ng-class="{active: vm.isDetailOpen}"
      >
        <i c8y-icon="chevron-down"></i>
      </button>
    </div>

    <div class="list-item-icon">
      <i c8y-icon="c8y-data-points"></i>
    </div>

    <div class="list-item-body" style="margin-right: 20px;">
      <div class="row flex-row">
        <div class="col-sm-7 col-xs-12">
          <small class="text-muted">{{ vm.resource.id }}</small>
          {{ vm.resource.name }}
        </div>
        <div class="col-sm-4 col-xs-10">
          <div class="list-functionalities">
            <label class="small right-m hidden-xs" translate>Functionalities</label>&nbsp;
            <c8y-object-mapping-status-icons
              mapping="vm.serverMapping"
            ></c8y-object-mapping-status-icons>
          </div>
        </div>
        <div class="col-sm-1 col-xs-2">
          <div
            class="dot small"
            ng-show="vm.showValidation()"
            ng-class="{'bg-gray':!vm.validationAvailable(), 'dot-success':vm.validationAvailable()}"
          >
            <i
              c8y-icon="check"
              ng-show="vm.validationAvailable()"
              uib-tooltip="{{ 'Validation rules set' | translate }}"
            ></i>
            <i
              c8y-icon="list-ul"
              ng-show="!vm.validationAvailable()"
              style="font-size: 12px;"
              uib-tooltip="{{ 'No validation rules defined' | translate }}"
            ></i>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="detail" uib-collapse="!vm.isDetailOpen">
    <div class="row top-m">
      <div class="col-md-8 text-pre-wrap bottom-m" ng-show="vm.resource.description">
        <small>{{ vm.resource.description }}</small>
      </div>
      <div class="col-md-8 text-muted" ng-hide="vm.resource.description">
        <small><em translate>No description available</em></small>
      </div>
      <div class="col-md-4">
        <dl class="dl-horizontal" style="margin-bottom:0;">
          <dt><label class="small" translate>Range</label></dt>
          <dd>
            <small>{{ vm.resource.rangeEnumeration || '--' }}</small>
          </dd>
          <dt><label class="small" translate>Mandatory</label></dt>
          <dd ng-show="vm.resource.mandatory" translate><small>Yes</small></dd>
          <dd ng-hide="vm.resource.mandatory" translate><small>No</small></dd>
          <dt><label class="small" translate>Operations</label></dt>
          <dd>
            <small>{{ vm.resource.operations }}</small>
          </dd>
          <dt><label class="small" translate>Type</label></dt>
          <dd>
            <small>{{ vm.resource.dataType }}</small>
          </dd>
          <dt><label class="small" translate>Units</label></dt>
          <dd>
            <small>{{ vm.resource.units || '--' }}</small>
          </dd>
          <dt><label class="small" translate>Instance type</label></dt>
          <dd ng-hide="vm.resource.multiple" translate><small>Single</small></dd>
          <dd ng-show="vm.resource.multiple" translate><small>Multiple</small></dd>
        </dl>
      </div>
    </div>
    <form class="form" name="mappingForm" novalidate>
      <c8y-object-mapping
        mapping="vm.mapping"
        auto-observe-params="true"
        custom-actions="vm.customActions"
      >
      </c8y-object-mapping>

      <c8y-lwm2m-validation-rules
        ng-if="vm.showValidation()"
        mapping="vm.mapping"
        resource="vm.resource"
      >
      </c8y-lwm2m-validation-rules>

      <button
        title="{{ 'Cancel' | translate }}"
        class="btn btn-default top-m-md bottom-m-lg"
        style="min-width: 100px;"
        ng-click="vm.cancel(); mappingForm.$pristine = true"
        translate
      >
        Cancel
      </button>
      <button
        title="{{ 'Save' | translate }}"
        class="btn btn-primary top-m-md bottom-m-lg"
        style="min-width: 100px;"
        ng-click="vm.save()"
        ng-disabled="mappingForm.$invalid || mappingForm.$pristine"
        translate
      >
        Save
      </button>
    </form>
  </div>
</div>
