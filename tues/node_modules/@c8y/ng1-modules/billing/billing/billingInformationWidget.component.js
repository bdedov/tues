"use strict";!function(){function t(e,t,n,o,r,i,a,u,l){var s=this;function c(t){return _.isUndefined(t)?e.when():a.get({cca2:t}).then(function(t){s.customerCountry=_.get(t,"commonName")})}_.assign(s,{$onChanges:function(t){_.get(t,"contractInfo.currentValue")&&(s.Customer=s.contractInfo.Customer,c(_.get(s,"Customer.Address.Country")))},initialized:!1,onEditBillingInfoModal:t.onEditBillingInfoModal?s.onEditBillingInfoModal:function(){return s.toUpdateCustomer=_.cloneDeep(s.Customer),r({templateUrl:":::PLUGIN_PATH:::/billing/editCustomerInfoModal.html",scope:n}).then(function(){o.updateCustomerData(s.toUpdateCustomer).then(function(){i.success(u("Customer data updated.")),s.Customer=s.toUpdateCustomer,s.onCustomerUpdate({customer:s.Customer}),c(_.get(s,"Customer.Address.Country"))}).catch(function(t){i.danger(l.getString("Customer data update failed due to: {{errorMessage | translate}}.",t))})})}})}t.$inject=["$q","$attrs","$scope","paymentGatewaySvc","c8yModal","c8yAlert","c8yCountriesService","gettext","gettextCatalog"],angular.module("c8y.customerBilling").component("billingInformationWidget",{controller:t,controllerAs:"vm",templateUrl:":::PLUGIN_PATH:::/billing/billingInformationWidget.html",bindings:{contractInfo:"<",onEditBillingInfoModal:"&?",onCustomerUpdate:"&?"}})}();