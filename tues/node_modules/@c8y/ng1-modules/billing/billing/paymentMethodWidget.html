<div class="card">
  <div class="card-header">
    <small class="text-uppercase" translate>Payment method</small>
    <small class="pull-right" ng-if="!vm.isTrial">
      <a href="" ng-click="vm.change()" translate>change</a>
    </small>
  </div>
  <hr>

  <div
    ng-if="vm.contractInfo && !vm.contractInfo.PaymentProvider"
    class="card-block"
    ng-class="{'billing-error billing-status': !vm.isTrial}"
  >
    <p
      ng-if="vm.isTrial"
      class="lead"
      style="margin-bottom:0;"
      translate
    >
      Currently in trial edition, upgrade to set a payment method.
    </p>
    <span ng-if="!vm.isTrial" class="pull-right" style="font-size: 46px;">
      <i c8y-icon="exclamation-triangle"></i>
    </span>
    <p ng-if="!vm.isTrial" class="text-center error-message" translate>
      No payment method selected.<br>
      Please select payment method now.
    </p>
  </div>

  <div
    ng-if="vm.contractInfo.PaymentProvider"
    ng-class="{'billing-status billing-error': vm.currentDunning}"
    class="card-block"
  >
    <span class="pull-right" style="font-size: 46px;" ng-if="vm.currentDunning">
      <i c8y-icon="exclamation-triangle"></i>
    </span>
    <payment-method-summary
      contract-info="vm.contractInfo"
      payment-bearer="vm.paymentBearer"
      payment-data="vm.paymentData"
    >
    </payment-method-summary>
    <p class="text-center error-message" ng-if="vm.currentDunning" translate>
      There was a problem processing your payment.<br /> Please update the payment method.
    </p>
  </div>

  <div translate class="legend text-center">Available payment methods</div>
  <table class="table">
    <colgroup>
       <col width="40px" />
       <col width="100%" />
     </colgroup>
    <tbody>
      <tr
        ng-repeat="paymentMethod in vm.PAYMENT_METHODS.values()"
        ng-class="{'text-muted': !vm.isPaymentMethodSelected(paymentMethod)}"
      >
        <td >
          <span style="font-size: 20px; line-height: 10px;">
            <i c8y-icon="{{paymentMethod.icon}}"></i>
          </span>
        </td>
        <td>
          {{paymentMethod.label | translate}}
          <span
            class="pull-right label label-default"
            ng-if="vm.isPaymentMethodSelected(paymentMethod)"
            style="margin-top: 5px;"
            translate
          >
            current payment method
          </span>
        </td>
      </tr>
    </tbody>
  </table>
</div>
