"use strict";!function(){n.$inject=["$location","billingConstants","paymentGatewaySvc","customerBillingSvc","c8yWizardModal","c8yAlert"];var r=_.identity;function n(n,i,e,t,o,a){function l(){_.includes(n.path(),"/billing")||(_.includes(n.absUrl(),"billing-finalize-upgrade=true")?e.finalizeInteractivePayment().then(function(){return o.open({component:"upgradeToStandardEditionWizard",resolve:{initialFlow:_.constant(["success"]),contractInfo:t.getContract()}}).result},function(n){return o.open({component:"upgradeToStandardEditionWizard",resolve:{initialFlow:_.constant(["failure"]),errorData:n}}).result}).finally(function(){setTimeout(function(){window.history.replaceState({},"",window.location.href.replace(/\?.*$/,"#/billing")),window.location.reload()},500)}):_.includes(n.absUrl(),"billing-finalize-payment-method-change=true")&&e.finalizeInteractivePayment().then(function(){a.success(r("Payment method changed."))},function(n){a.danger(n.errorMessage,n)}).finally(function(){setTimeout(function(){window.history.replaceState({},"",window.location.href.replace(/\?.*$/,"#/billing")),window.location.reload()},3e3)}))}t.getEnvironmentUrl().then(function(n){var e=document.createElement("script");e.src=i[n].url,document.head.appendChild(e),e.onload=l})}angular.module("c8y.customerBilling",[]).constant("billingConstants",{"sandbox.billwerk.com":{url:"//selfservice.sandbox.billwerk.com/subscription.js",publicApiKey:"58d50f6414aa010288580373",paymentProvider:"FakePSP"},"app.billwerk.com":{url:"//selfservice.billwerk.com/subscription.js",publicApiKey:"590b2f5814a9ff0e20652a44",paymentProvider:"Heidelpay"},TITLE:r("Account")}).run(n)}();