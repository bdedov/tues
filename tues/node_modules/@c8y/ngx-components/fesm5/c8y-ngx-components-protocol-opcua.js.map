{"version":3,"file":"c8y-ngx-components-protocol-opcua.js","sources":["ng://@c8y/ngx-components/protocol-opcua/opcua-device-protocol-mapping-customaction.component.ts","ng://@c8y/ngx-components/protocol-opcua/address-space.service.ts","ng://@c8y/ngx-components/protocol-opcua/opcua-address-space-detail.component.ts","ng://@c8y/ngx-components/protocol-opcua/opcuaService.ts","ng://@c8y/ngx-components/protocol-opcua/opcua-agent.guard.ts","ng://@c8y/ngx-components/protocol-opcua/opcua-device-protocol-browse-path-validation.directive.ts","ng://@c8y/ngx-components/protocol-opcua/opcua-device-protocol-object-mapping.component.ts","ng://@c8y/ngx-components/protocol-opcua/opcua-device-protocol-mapping.component.ts","ng://@c8y/ngx-components/protocol-opcua/opcua-device-protocol-detail.component.ts","ng://@c8y/ngx-components/protocol-opcua/opcua-device-protocol-data-reporting.component.ts","ng://@c8y/ngx-components/protocol-opcua/opcua-device-protocol-object-mapping-status-icon.component.ts","ng://@c8y/ngx-components/protocol-opcua/opcua-address-space.component.ts","ng://@c8y/ngx-components/protocol-opcua/opcua-microservice.guard.ts","ng://@c8y/ngx-components/protocol-opcua/opcua-server-config.component.ts","ng://@c8y/ngx-components/protocol-opcua/opcua-server-list.component.ts","ng://@c8y/ngx-components/protocol-opcua/opcua-server.guard.ts","ng://@c8y/ngx-components/protocol-opcua/opcua-servers.component.ts","ng://@c8y/ngx-components/protocol-opcua/opcua-device-protocol-description.component.ts","ng://@c8y/ngx-components/protocol-opcua/dynamic-data-source.ts","ng://@c8y/ngx-components/protocol-opcua/opcua-address-space-tree.component.ts","ng://@c8y/ngx-components/protocol-opcua/opcua-auto-apply-settings.component.ts","ng://@c8y/ngx-components/protocol-opcua/opcua-protocol.module.ts","ng://@c8y/ngx-components/protocol-opcua/ng1/downgraded.components.ts","ng://@c8y/ngx-components/protocol-opcua/ng1/index.ts","ng://@c8y/ngx-components/protocol-opcua/c8y-ngx-components-protocol-opcua.ts"],"sourcesContent":["import { Component, Input, OnInit } from '@angular/core';\nimport { NgModelGroup, ControlContainer } from '@angular/forms';\nimport { get } from 'lodash-es';\n\n@Component({\n  selector: 'opcua-device-protocol-mapping-customaction',\n  templateUrl: './opcua-device-protocol-mapping-customaction.html',\n  viewProviders: [{ provide: ControlContainer, useExisting: NgModelGroup }]\n})\nexport class OpcuaDeviceProtocolMappingCustomAction implements OnInit {\n  _model: any;\n  @Input() customAction;\n\n  hasCustomAction = false;\n  // no translation needed\n  readonly placeholders: string = '${value}, ${serverId}, ${nodeId}, ${deviceId}';\n\n  getHeaderPair() {\n    return { key: '', value: '' };\n  }\n  get headers() {\n    return this.customAction.headers;\n  }\n\n  addHeader() {\n    const { headers } = this.customAction;\n    headers.push(this.getHeaderPair());\n  }\n\n  updateCustomAction() {\n    this.hasCustomAction = !this.hasCustomAction;\n  }\n\n  removeCustomAction(index) {\n    const { headers } = this.customAction;\n\n    headers.splice(index, 1);\n  }\n\n  trackByIndex(index: number): number {\n    return index;\n  }\n\n  ngOnInit() {\n    if (get(this.customAction, 'endpoint')) {\n      this.hasCustomAction = true;\n    }\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { FetchClient, IFetchOptions } from '@c8y/client';\nimport { BehaviorSubject, Observable } from 'rxjs';\n\n@Injectable()\nexport class AddressSpaceService {\n  private nodeNavigationData$: BehaviorSubject<NodeNavigationData>;\n  private client: FetchClient;\n  private microserviceUrl: string;\n  private header: any;\n\n  constructor(fetchClient: FetchClient) {\n    this.client = fetchClient;\n    this.microserviceUrl = '/service/opcua-mgmt-service/address-space';\n    this.header = { 'Content-Type': 'application/json' };\n    this.nodeNavigationData$ = new BehaviorSubject<NodeNavigationData>({\n      node: undefined,\n      selectedAncestorIds: []\n    });\n  }\n\n  resetTreeToRootNode() {\n    this.triggerNodeToOpen({ node: undefined, selectedAncestorIds: [] });\n  }\n\n  triggerNodeToOpen(nodeNavigationData: NodeNavigationData) {\n    this.nodeNavigationData$.next(nodeNavigationData);\n  }\n\n  getNodeNavData$(): Observable<NodeNavigationData> {\n    return this.nodeNavigationData$.asObservable();\n  }\n\n  getNode(serverId: string, nodeId?: string) {\n    if (serverId && serverId.length > 0) {\n      if (nodeId && nodeId.length > 0) {\n        return this.getNodeById(serverId, nodeId);\n      }\n      return this.getRootNode(serverId);\n    }\n  }\n\n  getRootNode(serverId: string) {\n    if (serverId && serverId.length > 0) {\n      const options: IFetchOptions = {\n        method: 'GET',\n        headers: this.header\n      };\n      return this.client.fetch(`${this.microserviceUrl}/${serverId}`, options);\n    }\n  }\n\n  getNodeById(serverId: string, nodeId: string) {\n    if (serverId && nodeId && serverId.length > 0 && nodeId.length > 0) {\n      const options: IFetchOptions = {\n        method: 'GET',\n        headers: this.header\n      };\n      const param = encodeURIComponent(nodeId);\n      return this.client.fetch(`${this.microserviceUrl}/${serverId}?nodeId=${param}`, options);\n    }\n  }\n\n  getChildrenOf(node: AddressSpaceNode, serverId: string) {\n    if (serverId && node.nodeId && serverId.length > 0 && node.nodeId.length > 0) {\n      const options: IFetchOptions = {\n        method: 'GET',\n        headers: this.header\n      };\n      const param = encodeURIComponent(node.nodeId);\n      return this.client.fetch(\n        `${this.microserviceUrl}/${serverId}/children?nodeId=${param}`,\n        options\n      );\n    }\n  }\n\n  childrenAvailable(nodeReferences: AdressSpaceNodeReference[]): boolean {\n    if (!nodeReferences || nodeReferences.length === 0) {\n      return false;\n    }\n    return nodeReferences.some(ref => !ref.inverse && ref.hierarchical);\n  }\n\n  async getSearchedNodes(searchKey: string, serverId: string) {\n    const url = `service/opcua-mgmt-service/search/${serverId}/`;\n    const options: IFetchOptions = {\n      headers: this.header,\n      params: {\n        searchString: '*' + searchKey + '*'\n      }\n    };\n    const res = await this.client.fetch(url, options);\n    return res.json();\n  }\n\n  getIcon(nodeClassName: string) {\n    const iconList = {\n      Object: 'cube',\n      Variable: 'th-list',\n      Method: 'random',\n      View: 'window-maximize',\n      ObjectType: 'c8y-group',\n      VariableType: 'c8y-group',\n      ReferenceType: 'c8y-group',\n      DataType: 'c8y-group'\n    };\n    return iconList[nodeClassName] || 'circle';\n  }\n}\n\nexport interface AddressSpaceNode {\n  nodeId: string;\n  currentlyLoadingChildren?: boolean;\n  nodeClass?: number;\n  nodeClassName?: string;\n  browseName?: string;\n  displayName?: string;\n  description?: any;\n  references?: AdressSpaceNodeReference[];\n  ancestorNodeIds?: [string[]];\n  children: AddressSpaceNode[];\n  expanded: boolean;\n  absolutePaths: [string[]];\n  relativePath?: string[];\n  parentNode?: AddressSpaceNode;\n}\n\nexport interface AdressSpaceNodeReference {\n  referenceId: string;\n  targetId: string;\n  inverse: boolean;\n  hierarchical: boolean;\n}\n\nexport interface SearchedNode {\n  absolutePath: string[];\n  ancestorNodeIds: [string[]];\n  displayName: string;\n  nodeClassName: string;\n  nodeId: string;\n}\n\nexport interface NodeNavigationData {\n  node: AddressSpaceNode;\n  selectedAncestorIds: string[];\n}\n","import { Component, Input, Output, EventEmitter } from '@angular/core';\nimport { AddressSpaceNode, AddressSpaceService, NodeNavigationData } from './address-space.service';\nimport { omit } from 'lodash-es';\n\n@Component({\n  selector: 'opcua-address-space-detail',\n  templateUrl: './opcua-address-space-detail.component.html'\n})\nexport class OpcuaAddressSpaceDetailComponent {\n  @Input() set node(n) {\n    this._node = n;\n    if (n) {\n      this.setNodeData(n);\n    } else {\n      // remove details from current view\n      this.showDetails = false;\n    }\n  }\n  nodeDataAttr: Map<string, string>;\n  nodeDataRef: object[];\n  selected: boolean = false;\n  showDetails: boolean = false;\n\n  @Output() toggleAttrDetail: EventEmitter<AddressSpaceNode> = new EventEmitter<AddressSpaceNode>();\n\n  private _node: AddressSpaceNode;\n\n  constructor(private addressSpaceService: AddressSpaceService) {}\n  setNodeData(nodeData) {\n    this.showDetails = true;\n    const { attributes, references } = nodeData;\n    this.nodeDataRef = references;\n    const omitList = [\n      'attributes',\n      'references',\n      'children',\n      'currentlyLoadingChildren',\n      'expanded',\n      'browsePath',\n      'relativePath',\n      'parentNode'\n    ];\n    this.nodeDataAttr = Object.assign({}, attributes, omit(nodeData, omitList));\n  }\n\n  toggleDetail(node) {\n    this.showDetails = !this.showDetails;\n    this.toggleAttrDetail.emit(node);\n  }\n\n  navigateTo(ancestors: string[]) {\n    const nodeNavData: NodeNavigationData = {\n      node: this._node,\n      selectedAncestorIds: ancestors\n    };\n\n    this.toggleDetail(this._node);\n    this.addressSpaceService.triggerNodeToOpen(nodeNavData);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { FetchClient, IFetchOptions, InventoryService, InventoryBinaryService } from '@c8y/client';\nimport { OpcuaServer } from './opcua-server.interface';\nimport { Router } from '@angular/router';\nimport { AlertService } from '@c8y/ngx-components';\n\n@Injectable()\nexport class OpcuaService {\n  private binaryService: InventoryBinaryService;\n  private microserviceUrl: string;\n  private deviceTypeProtocolUrl: string;\n  private header: any;\n\n  constructor(\n    private client: FetchClient,\n    private inventoryService: InventoryService,\n    private router: Router,\n    private alertService: AlertService\n    ) {\n    this.microserviceUrl = '/service/opcua-mgmt-service/server';\n    this.deviceTypeProtocolUrl = '/service/opcua-mgmt-service/deviceTypes';\n    this.header = { 'Content-Type': 'application/json' };\n    this.binaryService = inventoryService.binary;\n  }\n\n  getServers(id: string) {\n    if (id && id.length > 0) {\n      const options: IFetchOptions = {\n        method: 'GET',\n        headers: this.header\n      };\n      return this.client.fetch(`${this.microserviceUrl}/${id}`, options);\n    }\n  }\n\n  createServer(data: OpcuaServer) {\n    if (this.doesGatewayIdExist(data)) {\n      this.cleanUpPayload(data);\n      const options: IFetchOptions = {\n        method: 'POST',\n        headers: this.header,\n        body: JSON.stringify(data)\n      };\n      return this.client.fetch(`${this.microserviceUrl}`, options);\n    }\n  }\n\n  async updateServer(server: OpcuaServer) {\n    if (this.doesGatewayIdExist(server) && this.doesIdExist(server)) {\n      this.cleanUpPayload(server);\n      const options: IFetchOptions = {\n        method: 'POST',\n        headers: this.header,\n        body: JSON.stringify(server)\n      };\n      const res = await this.client.fetch(`${this.microserviceUrl}`, options);\n      let data;\n      try {\n        data = await res.json();\n      } catch (e) {\n        // nothing\n      }\n\n      if (res.status !== 200) {\n        this.alertService.addServerFailure({ data, res });\n      } else {\n        return data;\n      }\n    }\n  }\n\n  removeServer(data: OpcuaServer) {\n    if (this.doesGatewayIdExist(data) && this.doesIdExist(data)) {\n      const options: IFetchOptions = {\n        method: 'DELETE'\n      };\n      return this.client.fetch(`${this.microserviceUrl}/${data.gatewayId}/${data.id}`, options);\n    }\n  }\n\n  getKeystore(binaryId: string) {\n    if (binaryId && binaryId.length > 0) {\n      return this.inventoryService.detail(binaryId);\n    }\n    return null;\n  }\n\n  uploadKeystore(file: File) {\n    if (file && file.size > 0) {\n      return this.binaryService.create(file);\n    }\n    return Promise.reject('Invalid file');\n  }\n\n  async updateKeystore(id: string, file: File) {\n    if (id && id.length > 0 && file && file.size > 0) {\n      const { res } = await this.removeKeystore(id);\n      if (res && res.status === 204) {\n        return this.uploadKeystore(file);\n      }\n    }\n    return Promise.reject('Invalid file');\n  }\n\n  removeKeystore(id: string) {\n    if (id && id.length > 0) {\n      return this.binaryService.delete(id);\n    }\n  }\n\n  getMoId() {\n    const currentUrl: string = this.router.routerState.snapshot.url;\n    const isDevice: boolean = new RegExp(/device\\/\\d+/).test(currentUrl);\n    if (isDevice) {\n      return currentUrl.match(/\\d+/)[0];\n    }\n    return '';\n  }\n\n  getId() {\n    const currentUrl: string = this.router.routerState.snapshot.url;\n    const isDeviceprotocol: boolean = new RegExp(/deviceprotocols/).test(currentUrl);\n    if (isDeviceprotocol && RegExp(/\\d+$/).test(currentUrl)) {\n      return currentUrl.match(/\\d+$/)[0];\n    }\n  }\n\n  async getDeviceProtocol(id: string) {\n    const options: IFetchOptions = {\n      method: 'GET',\n      headers: this.header,\n      };\n    return this.client.fetch(`${this.deviceTypeProtocolUrl}/${id}`, options);\n\n  }\n\n  async updateDeviceProtocol(data) {\n    const options: IFetchOptions = {\n      method: 'PUT',\n      headers: this.header,\n      body: JSON.stringify(data)\n    };\n    return this.client.fetch(`${this.deviceTypeProtocolUrl}/${data.id}`, options);\n\n  }\n\n  async createDeviceProtocol(data) {\n    const options: IFetchOptions = {\n      method: 'POST',\n      headers: this.header,\n      body: JSON.stringify(data)\n    };\n    return this.client.fetch(`${this.deviceTypeProtocolUrl}`, options);\n  }\n\n  private doesGatewayIdExist(data: OpcuaServer) {\n    return data && data.gatewayId && data.gatewayId.length > 0;\n  }\n\n  private doesIdExist(data: OpcuaServer) {\n    return data && data.id && data.id.length > 0 && data.id !== 'new';\n  }\n\n  private cleanUpPayload(data: OpcuaServer) {\n    if (data) {\n      if (data.id && data.id === 'new') { delete data.id; }\n      if (data.quickInfo) { delete data.quickInfo; }\n    }\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { CanActivate } from '@angular/router';\n\n@Injectable()\nexport class OpcuaAgentGuard implements CanActivate {\n  type = 'c8y_OPCUA_Device_Agent';\n  canActivate( { data } ) {\n    const { contextData } = data;\n    return contextData && contextData.type === this.type;\n  }\n}\n","import { Directive, forwardRef, ElementRef, Input, HostListener } from '@angular/core';\nimport { NgForm, Validator, AbstractControl, NG_VALIDATORS } from '@angular/forms';\nimport { some, isEqual, isEmpty } from 'lodash-es';\n\n@Directive({\n  selector: '[c8yBrowsePathValidator][ngModel]',\n  providers: [\n    {\n      provide: NG_VALIDATORS,\n      useExisting: forwardRef(() => OpcuaDeviceProtocolBrowsePathValidation),\n      multi: true\n    }\n  ]\n})\nexport class OpcuaDeviceProtocolBrowsePathValidation implements Validator {\n  @Input() getMappings: () => [];\n  @Input() model: any;\n\n  constructor(private el: ElementRef) {}\n\n  validate(control: AbstractControl): { [key: string]: any } {\n    if (control.value) {\n      if (!this.isValidJson(control.value)) {\n        return { invalidBrowsePathNotation: true };\n      } else {\n        if (this.isBrowsePathUnique(control.value)) {\n          return { browsePathNotUnique: true };\n        }\n      }\n    }\n    return null;\n  }\n\n  isValidJson(value) {\n    try {\n      const browsePath = JSON.parse(value);\n      return !isEmpty(browsePath);\n    } catch (error) {\n      return false;\n    }\n  }\n\n  toArray(str) {\n    return JSON.parse(str);\n  }\n\n  isBrowsePathUnique(value): boolean {\n    const mappings = this.getMappings();\n    const found = some(mappings, item => {\n      if (isEqual(item.browsePath, this.toArray(value)) && item.id !== this.model.id) {\n        return item;\n      }\n    });\n    return found ? true : false;\n  }\n}\n","import { Directive, ElementRef, Injector, ViewChild, Input, Output } from '@angular/core';\nimport { NgForm } from '@angular/forms';\nimport { UpgradeComponent } from '@angular/upgrade/static';\n\n@Directive({\n  selector: 'c8y-object-mapping'\n})\nexport class OpcuaDeviceProtocolObjectMapping extends UpgradeComponent {\n  @Input() mapping: any;\n  @Input() customActions: any;\n  @Input() autoObserveParams: any;\n  @Input() hideAutoObserve: any;\n  constructor(elementRef: ElementRef, injector: Injector) {\n    super('c8yObjectMapping', elementRef, injector);\n  }\n}\n","import {\n  Component,\n  OnInit,\n  EventEmitter,\n  Input,\n  Output,\n  ViewChild,\n  OnChanges,\n  SimpleChanges\n} from '@angular/core';\nimport { NgForm, ControlContainer, FormControl, NgModelGroup } from '@angular/forms';\nimport { AlertService, gettext } from '@c8y/ngx-components';\nimport { isEmpty, assign, unset, get, set, reject, find, cloneDeep, isEqual } from 'lodash-es';\nimport { OpcuaDeviceProtocolObjectMapping } from './opcua-device-protocol-object-mapping.component';\nimport { AddressSpaceService } from './address-space.service';\n\n@Component({\n  selector: 'opcua-device-protocol-mapping',\n  templateUrl: './opcua-device-protocol-mapping.html',\n  viewProviders: [{ provide: ControlContainer, useExisting: NgModelGroup }]\n})\nexport class OpcuaDeviceProtocolMapping implements OnInit, OnChanges {\n  @ViewChild(OpcuaDeviceProtocolObjectMapping, { static: false }) objectMappingForm: any;\n  @ViewChild('variableForm', { static: false }) subFormRef: any;\n  @ViewChild('browsePathModel', { static: false }) browsePathModel: any;\n\n  @Input('resource') _model;\n  @Input() index;\n  @Input() getParentAttr;\n  @Input() referencedServerId;\n  @Input() referencedRootNodeId;\n  @Output() onAction: EventEmitter<any> = new EventEmitter<any>();\n\n  mapping;\n\n  isDetailOpen;\n  customAction;\n  referencedNode;\n  isPathFocused = false;\n  groupName: string;\n  browsePath: string;\n  nodeDisplayName: string;\n  isBrowsePathUniq = true;\n  dataReporting = 'default';\n  isTreeOpen = false;\n  isNew = false;\n  resetModel = false;\n  dataReportingName;\n  private moId: string = '';\n  constructor(\n    private alertService: AlertService,\n    private addressSpaceService: AddressSpaceService\n  ) {}\n\n  toggleDetail() {\n    this.isDetailOpen = !this.isDetailOpen;\n    if (this.resetModel) {\n      this.initialFormSetup();\n    }\n  }\n\n  getMappings = () => this.getParentAttr('mappings');\n\n  ngOnInit() {\n    this.dataReportingName = 'ReportingMode' + this.index;\n    this.initialFormSetup();\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (\n      changes._model.previousValue &&\n      !isEqual(this._model, changes._model.previousValue.SimpleChange)\n    ) {\n      if (this.mapping && this.mapping.name === this._model.name) {\n        this.mapping.id = this._model.id;\n      }\n    }\n  }\n\n  initialFormSetup() {\n    const mapping = {\n      id: '',\n      browsePath: [],\n      name: '',\n      subscriptionType: {\n        type: 'None'\n      }\n    };\n\n    const customAction = {\n      headers: [{ key: 'Authorization', value: '' }, { key: 'Content-Type', value: '' }],\n      bodyTemplate: '',\n      type: 'HttpPost',\n      endpoint: ''\n    };\n\n    this.mapping = assign({}, mapping, cloneDeep(this._model));\n\n    if (isEmpty(this.mapping.browsePath)) {\n      this.isNew = true;\n      this.isDetailOpen = true;\n    } else {\n      this.browsePath = this.stringfyBrowsePath(this.mapping.browsePath);\n      this.nodeDisplayName = this.mapping.name;\n    }\n\n    if (this.referencedRootNodeId) {\n      this.referencedNode = { nodeId: this.referencedRootNodeId };\n      this.addressSpaceService.triggerNodeToOpen({\n        node: {\n          nodeId: this.referencedRootNodeId,\n          children: [],\n          expanded: false,\n          absolutePaths: [[]]\n        },\n        selectedAncestorIds: []\n      });\n    } else {\n      this.referencedNode = { nodeId: '' };\n    }\n\n    if (get(this.mapping, 'customAction')) {\n      this.customAction = assign(customAction, get(this.mapping, 'customAction'));\n      this.customAction.headers = this.mapHeadersObjectToList(get(this.customAction, 'headers'));\n    } else {\n      this.customAction = assign({}, customAction);\n    }\n\n    unset(this.mapping, 'customAction');\n    if (get(this._model, 'subscriptionType')) {\n      this.dataReporting = 'custom';\n    } else {\n      this.dataReporting = 'default';\n    }\n    this.resetModel = false;\n  }\n\n  showAddressSpaceTree() {\n    return !isEmpty(this.referencedServerId);\n  }\n\n  ngAfterViewInit() {\n    if (\n      get(this.mapping, 'subscriptionType') &&\n      get(this.mapping, 'subscriptionType.type') !== 'None'\n    ) {\n      this.dataReporting = 'custom';\n    }\n  }\n\n  mapHeadersObjectToList(headers) {\n    if (Object.keys(headers).length > 0) {\n      return Object.keys(headers).map(item => {\n        return { key: item, value: headers[item] };\n      });\n    }\n  }\n\n  stringfyBrowsePath(path) {\n    return JSON.stringify(path);\n  }\n\n  updateBrowsePath(node) {\n    this.mapping.browsePath = node.relativePath;\n    this.nodeDisplayName = node.displayName;\n    this.mapping.name = this.nodeDisplayName;\n    this.browsePath = this.stringfyBrowsePath(this.mapping.browsePath);\n    this.browsePathModel.control.markAsDirty();\n  }\n\n  updateDisplayname() {\n    this.mapping.name = this.nodeDisplayName;\n  }\n\n  updateBrowsePathInput() {\n    if (this.browsePath) {\n      try {\n        this.mapping.browsePath = JSON.parse(this.browsePath);\n      } catch (error) {\n        return;\n      }\n    }\n  }\n\n  save() {\n    if (this.dataReporting === 'default') {\n      unset(this.mapping, 'subscriptionType');\n    }\n\n    if (get(this.mapping, 'measurementCreation')) {\n      const { measurementCreation } = this.mapping;\n      set(measurementCreation, 'fragmentName', get(measurementCreation, 'type'));\n    }\n\n    const { customAction } = this.subFormRef.value;\n    let modifiedCustomAction;\n    if (customAction.hasCustomAction) {\n      const reducedHeaders = this.customAction.headers.reduce((result, item) => {\n        result[item.key] = item.value;\n        return result;\n      }, {});\n\n      modifiedCustomAction = assign({}, this.customAction, { headers: reducedHeaders });\n    }\n\n    this.onAction.emit({\n      action: 'save',\n      data: assign({}, this.mapping, { customAction: modifiedCustomAction })\n    });\n    this.isDetailOpen = false;\n  }\n\n  cancel() {\n    this.isDetailOpen = false;\n    this.resetModel = true;\n    if (this.mapping.id === 'new') {\n      this.onAction.emit({ action: 'delete', data: assign({}, this.mapping) });\n    }\n  }\n\n  onDelete() {\n    this.onAction.emit({ action: 'delete', data: this.mapping });\n  }\n\n  canSave(variableForm) {\n    const areValid = () =>\n      variableForm.valid && this.objectMappingForm.$componentScope.mappingForm.$valid;\n    const areDirty = () =>\n      variableForm.dirty || this.objectMappingForm.$componentScope.mappingForm.$dirty;\n    return areValid() && areDirty();\n  }\n\n  isActive() {\n    return this.isDetailOpen;\n  }\n\n  setTreeFromRefNode() {\n    if (this.referencedRootNodeId) {\n      this.addressSpaceService.triggerNodeToOpen({\n        node: {\n          nodeId: this.referencedRootNodeId,\n          children: [],\n          expanded: false,\n          absolutePaths: [[]]\n        },\n        selectedAncestorIds: []\n      });\n    }\n  }\n}\n","import {\n  Component,\n  OnInit,\n  ViewChildren,\n  QueryList,\n  Input,\n  Output,\n  EventEmitter,\n  ViewChild,\n  OnChanges,\n  ChangeDetectorRef\n} from '@angular/core';\nimport { Router } from '@angular/router';\nimport { OpcuaService } from './opcuaService';\nimport { NgForm } from '@angular/forms';\nimport { AlertService, gettext } from '@c8y/ngx-components';\nimport { OpcuaDeviceType } from './opcua-protocol-device-type.interface';\nimport { find, assign, omit, findIndex, pick, unset, get } from 'lodash';\nimport { OpcuaDeviceProtocolMapping } from './opcua-device-protocol-mapping.component';\n\n@Component({\n  selector: 'opcua-device-protocol-detail',\n  templateUrl: './opcua-device-protocol-detail.html'\n})\nexport class OpcuaDeviceProtocolDetailComponent implements OnInit {\n  @ViewChildren(OpcuaDeviceProtocolMapping) instanceList: QueryList<OpcuaDeviceProtocolMapping>;\n\n  initialModel: OpcuaDeviceType = {\n    id: '',\n    fieldbusType: 'opcuaV2',\n    description: '',\n    unit: '',\n    fieldbusVersion: 4,\n    name: '',\n    referencedServerId: '',\n    referencedRootNodeId: '',\n    subscriptionType: {\n      type: 'None'\n    },\n    mappings: [],\n    overriddenSubscriptions: [],\n    applyConstraints: {\n      browsePathMatchesRegex: '',\n      matchesNodeIds: [],\n      serverObjectHasFragment: '',\n      matchesServerIds: []\n    },\n    enabled: ''\n  };\n\n  model: any;\n  server: any;\n  selectedNode: any;\n  isLoaded = true;\n\n  constructor(\n    private changeDetectorRef: ChangeDetectorRef,\n    private opcuaService: OpcuaService,\n    private alertService: AlertService,\n    private router: Router\n  ) {}\n\n  ngAfterContentChecked() {\n    this.changeDetectorRef.detectChanges();\n  }\n\n  getParentAttr = key => get(this.model, key);\n\n  getMapping() {\n    return this.model.mappings;\n  }\n\n  getEmptyMappingObject() {\n    return {\n      id: 'new',\n      browsePath: []\n    };\n  }\n\n  getOverriddenSubscriptionsByPath(browsePath) {\n    return find(this.model.overriddenSubscriptions, { browsePath });\n  }\n\n  getStructuredResource(resource) {\n    const overriddenSubscriptions = this.getOverriddenSubscriptionsByPath(resource.browsePath);\n    let result = assign({}, resource);\n    if (overriddenSubscriptions) {\n      result = assign({}, resource, { subscriptionType: overriddenSubscriptions.subscriptionType });\n    }\n    return result;\n  }\n\n  async ngOnInit() {\n    const id = this.opcuaService.getId();\n    if (id) {\n      const res = await this.opcuaService.getDeviceProtocol(id);\n      if (res && res.status !== 200) {\n        const data = res.json ? await res.json() : undefined;\n        this.alertService.addServerFailure({ data, res });\n        this.isLoaded = false;\n      } else {\n        const data = await res.json();\n        if (data && data.applyConstraints === null) {\n          delete data.applyConstraints;\n        }\n        if (data && data.subscriptionType === null) {\n          delete data.subscriptionType;\n        }\n        this.model = assign(this.initialModel, data);\n        if (!this.model.mappings) {\n          this.model.mappings = [];\n        }\n        this.model = assign(this.initialModel, this.updateViableMapping(data));\n        this.isLoaded = false;\n      }\n    }\n  }\n\n  updateViableMapping(model) {\n    const { mappings } = model;\n    let result = [];\n    if (mappings) {\n      result = mappings.map((item, i) => {\n        return assign(item, { id: i });\n      });\n    }\n    return assign(model, { mappings: result });\n  }\n\n  trackByIndex(index: number): number {\n    return index;\n  }\n\n  addVariable() {\n    this.model.mappings.push(this.getEmptyMappingObject());\n  }\n\n  updateVariable(mappingObject) {\n    const { mappings } = this.model;\n    const index = findIndex(mappings, { id: mappingObject.id });\n    mappings.splice(index, 1);\n    if (mappingObject.id === 'new') {\n      mappingObject.id = mappings.length;\n    }\n    mappings.push(mappingObject);\n  }\n\n  removeVariable(mappingObject) {\n    const { mappings } = this.model;\n    const index = findIndex(mappings, { id: mappingObject.id });\n    mappings.splice(index, 1);\n  }\n\n  actionHandler(actionObject) {\n    switch (actionObject.action) {\n      case 'save':\n        this.updateVariable(actionObject.data);\n        break;\n      case 'delete':\n        this.removeVariable(actionObject.data);\n        break;\n    }\n  }\n\n  extractOverridSubscriptionType(_mapping) {\n    const overriddenSubscriptions = [];\n    const variableMapping = [];\n    _mapping.forEach(element => {\n      if (element.id !== 'new') {\n        if (element.subscriptionType) {\n          overriddenSubscriptions.push(\n            assign(\n              { browsePath: element.browsePath },\n              { subscriptionType: element.subscriptionType }\n            )\n          );\n        }\n        variableMapping.push(omit(element, ['subscriptionType']));\n      }\n    });\n    return [variableMapping, overriddenSubscriptions];\n  }\n\n  prepareRequestJson(_model) {\n    let requestJson = {};\n    const [mappings, overriddenSubscriptions] = this.extractOverridSubscriptionType(\n      _model.mappings\n    );\n    requestJson = assign(requestJson, pick(_model, Object.keys(this.initialModel)), {\n      mappings,\n      overriddenSubscriptions\n    });\n    return requestJson;\n  }\n\n  async save() {\n    try {\n      const res = await this.opcuaService.updateDeviceProtocol(this.prepareRequestJson(this.model));\n\n      if (res && res.status === 200) {\n        this.router.navigate(['deviceprotocols']);\n        this.alertService.success(gettext('Device protocol saved.'));\n      } else {\n        this.alertService.addServerFailure({ res });\n      }\n    } catch (ex) {\n      this.alertService.danger(gettext('Failed to save. Try again.'));\n    }\n  }\n\n  canSave(deviceTypeForm) {\n    if (this.instanceList) {\n      const activeInstances = this.instanceList.filter(item => item.isActive());\n\n      if (activeInstances.length > 0) {\n        return true;\n      }\n    }\n    return !deviceTypeForm.form.valid;\n  }\n}\n","import { Component, Input, Output, EventEmitter } from '@angular/core';\nimport { set, unset, toInteger } from 'lodash';\nimport { gettext } from '@c8y/ngx-components';\nimport { ControlContainer, NgModelGroup } from '@angular/forms';\n\n@Component({\n  selector: 'opcua-device-protocol-data-reporting',\n  templateUrl: './opcua-device-protocol-data-reporting.html',\n  viewProviders: [{ provide: ControlContainer, useExisting: NgModelGroup }]\n})\nexport class OpcuaDeviceProtocolDataReportingComponent {\n  @Input() set model(_model) {\n    if (_model.subscriptionType) {\n      this.subscription = _model.subscriptionType;\n      if (this.subscription.type === 'CyclicRead') {\n        this.cyclicReadParameters = _model.subscriptionType.cyclicReadParameters;\n        this.requireCyclic = true;\n        this.requireSubscription = false;\n      }\n\n      if (this.subscription.type === 'Subscription') {\n        this.subscriptionParameters = _model.subscriptionType.subscriptionParameters;\n        this.requireCyclic = false;\n        this.requireSubscription = true;\n      }\n\n      if (this.subscription.type === 'None') {\n        this.requireCyclic = false;\n        this.requireSubscription = false;\n      }\n    }\n    this._model = _model;\n    this.subscriptionTypeName = 'subscriptionType' + _model.id;\n  }\n  @Input() groupName;\n\n  _model: object;\n  @Output() onSubscriptionChange: EventEmitter<any> = new EventEmitter<any>();\n\n  subscription = {\n    type: 'None'\n  };\n  subscriptionParameters = {\n    samplingRate: undefined,\n    deadbandType: 'None',\n    deadbandValue: undefined,\n    ranges: '',\n    queueSize: undefined,\n    dataChangeTrigger: 'Status',\n    discardOldest: true\n  };\n\n  cyclicReadParameters = {\n    rate: undefined\n  };\n\n  types: any[] = [\n    { value: 'None', label: gettext('None') },\n    { value: 'CyclicRead', label: gettext('Cyclic read') },\n    { value: 'Subscription', label: gettext('Subscription') }\n  ];\n\n  filters: any[] = [\n    { value: 'None', label: gettext('None') },\n    { value: 'absolute', label: gettext('Absolute') },\n    { value: 'percent', label: gettext('Percent') }\n  ];\n\n  triggers: any[] = [\n    { value: 'Status', label: gettext('Status') },\n    { value: 'StatusValue', label: gettext('Status/Value') },\n    { value: 'StatusValueTimestamp', label: gettext('Status/Value/Timestamp') }\n  ];\n\n  discard: any[] = [\n    { value: true, label: gettext('oldest`data`') },\n    { value: false, label: gettext('newest`data`') }\n  ];\n\n  requireCyclic: boolean = false;\n  requireSubscription: boolean = false;\n  subscriptionTypeName = 'subscriptionType';\n\n  parseReadingInterval = $event => toInteger($event.target.value);\n\n  updateModel() {\n    setTimeout(() => {\n      unset(this.subscription, 'subscriptionParameters');\n      unset(this.subscription, 'cyclicReadParameters');\n      if (this.subscription.type === 'CyclicRead') {\n        this.requireCyclic = true;\n        this.requireSubscription = false;\n        set(this.subscription, 'cyclicReadParameters', this.cyclicReadParameters);\n      } else if (this.subscription.type === 'Subscription') {\n        this.requireCyclic = false;\n        this.requireSubscription = true;\n        set(this.subscription, 'subscriptionParameters', this.subscriptionParameters);\n      } else if (this.subscription.type === 'None') {\n        this.requireCyclic = false;\n        this.requireSubscription = false;\n      }\n    });\n  }\n}\n","import { Directive, ElementRef, Injector, Input } from '@angular/core';\nimport { UpgradeComponent } from '@angular/upgrade/static';\n\n@Directive({\n  selector: 'c8y-object-mapping-status-icons'\n})\nexport class OpcuaDeviceProtocolObjectMappingStatus extends UpgradeComponent {\n  @Input() mapping: any;\n  constructor(elementRef: ElementRef, injector: Injector) {\n    super('c8yObjectMappingStatusIcons', elementRef, injector);\n  }\n}\n","import { Component, OnInit, Output, EventEmitter, OnDestroy } from '@angular/core';\nimport { AddressSpaceService, AddressSpaceNode } from './address-space.service';\nimport { gettext } from '@c8y/ngx-components';\nimport { DynamicDataSource } from './dynamic-data-source';\nimport { OpcuaService } from './opcuaService';\nimport { Subscription } from 'rxjs';\n\n@Component({\n  selector: 'opcua-address-space',\n  templateUrl: './opcua-address-space.component.html'\n})\nexport class OpcuaAddressSpaceComponent implements OnInit, OnDestroy {\n  currentNode: AddressSpaceNode;\n  selectednode: boolean = false;\n  searchKey: string;\n  isSearch: boolean;\n  loading: boolean = false;\n  searchInProgress: boolean = false;\n  filterLabel: string;\n  dataSource: DynamicDataSource;\n  nodeList;\n\n  @Output() focusStatus: EventEmitter<AddressSpaceNode> = new EventEmitter<AddressSpaceNode>();\n  private moId: string = '';\n  constructor(\n    private addressSpaceService: AddressSpaceService,\n    private opcuaService: OpcuaService\n  ) {}\n\n  async ngOnInit() {\n    this.filterLabel = gettext('Filter…');\n    this.moId = this.opcuaService.getMoId();\n  }\n\n  ngOnDestroy() {\n    // The BehaviourSubject will store the last array of ancestorNodes from the previous search\n    // this would cause the component while subscribing in the init-phase to the subject to travers\n    // to the last searched node again. From user perspective it does not make sense, because the user\n    // left the Address space (tab) and should loose the context and just request a new search or\n    // browse the tree manually.\n    this.addressSpaceService.resetTreeToRootNode();\n  }\n\n  async searchNodes() {\n    this.searchInProgress = true;\n    this.clearNodeListAndCheckSearchString();\n    if (this.isSearch) {\n      this.currentNode = undefined;\n      this.nodeList = await this.addressSpaceService.getSearchedNodes(this.searchKey, this.moId);\n      this.searchInProgress = false;\n      this.nodeList.resultLabel = gettext('Results found');\n    }\n  }\n\n  clearNodeListAndCheckSearchString() {\n    this.isSearch = this.searchKey !== undefined && this.searchKey !== '' ? true : false;\n    if (!this.isSearch) {\n      this.searchInProgress = false;\n    }\n  }\n\n  clearSearch() {\n    this.isSearch = false;\n    this.searchKey = '';\n    this.currentNode = undefined;\n  }\n\n  getIcon(nodeClassName: string) {\n    return this.addressSpaceService.getIcon(nodeClassName);\n  }\n\n  async selectNode(node) {\n    if (node && node.nodeId && node.nodeId.length > 0) {\n      const res = await this.addressSpaceService.getNodeById(this.moId, node.nodeId);\n      this.toggleCurrentNode((await res.json()) as AddressSpaceNode);\n    }\n  }\n\n  toggleCurrentNode(node: AddressSpaceNode) {\n    this.currentNode = this.isNodeSet(node) ? undefined : node;\n  }\n\n  backHandler(node) {\n    this.isSearch = false;\n    this.focusStatus.emit(node);\n    this.toggleCurrentNode(node);\n  }\n\n  isNodeSet(node: AddressSpaceNode) {\n    if (this.currentNode !== undefined && this.currentNode.nodeId === node.nodeId) {\n      return true;\n    }\n    return false;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { CanActivate } from '@angular/router';\nimport { AppStateService } from '@c8y/ngx-components';\n\n@Injectable()\nexport class OpcuaMicroserviceGuard implements CanActivate {\n  microserviceName: string = 'opcua-mgmt-service';\n  checkApp: Promise<boolean>;\n\n  constructor(\n    private app: AppStateService\n  ) {}\n\n  canActivate() {\n    if (!this.checkApp) {\n      this.checkApp = this.app.isApplicationAvailable(this.microserviceName);\n    }\n    return this.checkApp;\n  }\n}\n","import { Component, Input, OnInit, Output, EventEmitter, OnChanges, ViewChild } from '@angular/core';\nimport { gettext, DroppedFile, DropAreaComponent } from '@c8y/ngx-components';\nimport { OpcuaServer, OpcuaServerConfig } from './opcua-server.interface';\nimport { cloneDeep, has} from 'lodash-es';\nimport { OpcuaService } from './opcuaService';\n\n@Component({\n  selector: 'opcua-server-config',\n  templateUrl: './opcua-server-config.component.html'\n})\nexport class OpcuaServerConfigComponent implements OnInit, OnChanges {\n  currentSecMode: string;\n  fileName: string = '';\n  targetConnectionState: string = '1';\n  minIntervalNumber: number = 1;\n  connectionStatusLabel: string = '';\n  @ViewChild('opcuaConfigForm', {static: false}) opcuaConfigForm: any;\n  @ViewChild(DropAreaComponent, {static: false}) dropArea: DropAreaComponent;\n  @Output() canceled = new EventEmitter<OpcuaServer>();\n  @Output() removed = new EventEmitter<OpcuaServer>();\n  @Output() saved = new EventEmitter<OpcuaServer>();\n  @Input() set server(server: OpcuaServer) {\n    if (server) {\n      this._server = cloneDeep(server);\n      this.model = cloneDeep(server);\n      this.fileName = this.model.config.keystoreFilename;\n\n      if (server.id && server.id === 'new') {\n        // enabled connection state\n        this.targetConnectionState = '1';\n        this.model.config.targetConnectionState = 'enabled';\n      } else {\n        this.targetConnectionState = (this.model.config.targetConnectionState === 'enabled') ? '1' : '0';\n      }\n      this.updateConnectionStatusLabel(this._server);\n      this.setNewPassword();\n    }\n  }\n\n  get server(): OpcuaServer {\n    return this._server;\n  }\n\n  model: OpcuaServer;\n  changePassword: boolean = false;\n  initialPasswordRequired: boolean = true;\n  securityModes: string[];\n  authenticationMode: any;\n  authenticationModes: any[];\n  NONE: string = 'NONE';\n  SIGN: string = 'SIGN';\n  SIGN_ENC: string = 'SIGN_ENCRYPT';\n  securityPolicies: any = {\n    sign: [\n      `BASIC256_${this.SIGN}`,\n      `BASIC128RSA15_${this.SIGN}`,\n      `BASIC256SHA256_${this.SIGN}`\n    ],\n    sign_enc: [\n      `BASIC256_${this.SIGN_ENC}`,\n      `BASIC128RSA15_${this.SIGN_ENC}`,\n      `BASIC256SHA256_${this.SIGN_ENC}`,\n    ]\n  };\n  private ANONYM = {\n    id: 1,\n    value: gettext('Anonymous')\n  };\n  private USER_PASSWORD = {\n    id: 2,\n    value: gettext('Username/Password')\n  };\n  private KEY_BASED = {\n    id: 3,\n    value: gettext('Key-based Authentication')\n  };\n  private _server: OpcuaServer;\n  private opcuaService: OpcuaService;\n  private initialKeystore: File = {\n    lastModified: 0,\n    name: '',\n    type: '',\n    slice: null,\n    size: 0\n  };\n  private keystore: File = this.initialKeystore;\n  private authSwitch: boolean = false;\n\n  constructor(opcuaService: OpcuaService) {\n    this.opcuaService = opcuaService;\n  }\n\n  async ngOnInit() {\n    this.authSwitch = false;\n\n    this.securityModes = [\n      this.NONE,\n      this.SIGN,\n      this.SIGN_ENC\n    ];\n\n    this.authenticationModes = [\n      this.ANONYM,\n      this.USER_PASSWORD,\n      this.KEY_BASED\n    ];\n\n    this.setCurrentAuthenticationMode();\n    this.setCurrentSecurityMode();\n  }\n\n  ngOnChanges() {\n    this.setCurrentSecurityMode();\n    this.setCurrentAuthenticationMode();\n  }\n\n  cancel() {\n    this.canceled.emit(this.model);\n  }\n\n  async remove() {\n    await this.removeKeystore(this.model);\n    this.removed.emit(this.model);\n  }\n\n  async save() {\n    if (this.keystore && this.keystore.size > 0 && this.keystore.name && this.keystore.name.length > 0) {\n      const response = await this.uploadKeystore(this.model.config.keystoreBinaryId);\n\n      if (response && response.data && response.data.id) {\n        this.model.config.keystoreBinaryId = response.data.id;\n      }\n\n      // if the keystore was uploaded successful we can remove\n      // the local keystore. This will prevent another request to binary api\n      // when the user will edit other inputs in the form and hit save again.\n      this.keystore = this.initialKeystore;\n    }\n\n    // will remove keystore (binary) when the user switched\n    // authentication settings from key-based to anonymous or username/password\n    if (this.authSwitch) {\n      this.removeKeystore(this.server);\n    }\n\n    // when the user sets a new password, make sure to mark it as\n    // \"not encrypted\" by setting passwordEncrypted to false\n    const userPassword: string = this.getModelConfig('userPassword');\n    if (userPassword && userPassword.length > 0) {\n        this.model.config.passwordEncrypted = false;\n    }\n\n    this.saved.emit(this.model);\n  }\n\n  uploadFile(droppedFiles: DroppedFile[]) {\n    if (droppedFiles.length === 1) {\n      this.keystore = droppedFiles[0].file;\n      this.fileName = this.keystore.name;\n    } else {\n      // dropped more than one file\n      console.warn('Tried to import... Import aborted.');\n    }\n  }\n\n  setPolicy(data: any) {\n    if (data === this.NONE) {\n      this.model.config.securityMode = this.NONE;\n    } else if (data === this.SIGN) {\n      this.model.config.securityMode = this.securityPolicies.sign[0];\n    } else if (data === this.SIGN_ENC) {\n      this.model.config.securityMode = this.securityPolicies.sign_enc[0];\n    }\n  }\n\n  setServerConnection(data: string) {\n    this.model.config.targetConnectionState = (data !== '0') ? 'enabled' : 'disabled';\n  }\n\n  updateAuthentication(data: any) {\n    if (data && data.id) {\n      switch (data.id) {\n        // Anonymous\n        case 1:\n          this.resetUserAuthentication();\n          this.resetKeyBasedAuthentication();\n          break;\n\n        // User/Password\n        case 2:\n          this.resetKeyBasedAuthentication();\n          this.restoreUserData();\n          this.setNewPassword();\n          break;\n\n        // Key-based\n        case 3:\n          this.resetUserAuthentication();\n          this.restoreKeyBasedData();\n          break;\n\n        default:\n          console.warn('Invalid authentication id', data.id);\n          break;\n      }\n    }\n  }\n\n  updateConnectionStatusLabel(server) {\n    const connected = server.c8y_Connection && server.c8y_Connection.status === 'CONNECTED';\n    const label = connected ? gettext('Connected') : gettext('Disconnected');\n    this.connectionStatusLabel = label;\n  }\n\n  setNewPassword() {\n    const username: string = this.getModelConfig('userName');\n    if (username && username.length > 0) {\n      // userName is given, NO need to change the password because it is already set\n      this.changePassword = false;\n      this.initialPasswordRequired = false;\n    } else {\n      // no userName in response, so require the user to set the initial pw\n      this.changePassword = true;\n      this.initialPasswordRequired = true;\n    }\n  }\n\n  toggleChangePassword() {\n    this.changePassword = !this.changePassword;\n    // When the user hides the pw-input field but has entered a\n    // string to it before, we need to discard the changes reflected in the model\n    // otherwise we PUT it with the model when user hits the save button\n    if (!this.changePassword) {\n      if (this.getModelConfig('userPassword')) {\n        delete this.model.config.userPassword;\n      }\n    }\n  }\n\n  private uploadKeystore(binaryId?: string) {\n    if (!binaryId) {\n      return this.opcuaService.uploadKeystore(this.keystore);\n    } else if (binaryId && binaryId.length > 0) {\n      // update existing binary\n      return this.opcuaService.updateKeystore(binaryId, this.keystore);\n    }\n  }\n\n  private removeKeystore(server: OpcuaServer) {\n    if (server &&\n      server.config &&\n      server.config.keystoreBinaryId &&\n      server.config.keystoreBinaryId.length > 0) {\n      this.authSwitch = false;\n      return this.opcuaService.removeKeystore(this.server.config.keystoreBinaryId);\n    }\n  }\n\n  private resetUserAuthentication() {\n    this.model.config.userName = null;\n    this.model.config.userPassword = null;\n    this.model.config.userIdentityMode = 'none';\n  }\n\n  private resetKeyBasedAuthentication() {\n    this.authSwitch = true;\n\n    this.model.config.keystorePass = null;\n    this.model.config.certificatePass = null;\n    this.model.config.keystoreBinaryId = '';\n    this.model.config.keystoreFilename = '';\n    this.model.config.userIdentityMode = 'none';\n  }\n\n  private restoreUserData() {\n    this.model.config.userName = this._server.config.userName;\n    this.model.config.userIdentityMode = 'userAndPassword';\n  }\n\n  private restoreKeyBasedData() {\n    this.authSwitch = false;\n    this.model.config.keystorePass = this._server.config.keystorePass;\n    this.model.config.certificatePass = this._server.config.certificatePass;\n    this.model.config.keystoreBinaryId = this._server.config.keystoreBinaryId;\n    this.model.config.keystoreFilename = this._server.config.keystoreFilename;\n    this.model.config.userIdentityMode = 'certificate';\n  }\n\n  private getServerConfig(): OpcuaServerConfig {\n    let cfg: OpcuaServerConfig = {\n      securityMode: this.NONE,\n      userIdentityMode: 'none'\n    };\n    if (this.server && this.server.config) {\n      cfg = this.server.config;\n    }\n    return cfg;\n  }\n\n  private setCurrentSecurityMode() {\n    const { securityMode } = this.getServerConfig();\n    if (securityMode) {\n      const foundInSign = this.securityPolicies.sign.find((el) => el === securityMode);\n      if (foundInSign) {\n        this.currentSecMode = this.SIGN;\n      } else {\n        const foundInSignEncrypt = this.securityPolicies.sign_enc.find((el) => el === securityMode);\n        foundInSignEncrypt ? this.currentSecMode = this.SIGN_ENC : this.currentSecMode = this.NONE;\n      }\n    }\n  }\n\n  private setCurrentAuthenticationMode() {\n    const {\n      userIdentityMode\n    } = this.getServerConfig();\n\n    switch (userIdentityMode) {\n      case 'certificate':\n        this.authenticationMode = this.KEY_BASED;\n        break;\n\n      case 'userAndPassword':\n        this.authenticationMode = this.USER_PASSWORD;\n        break;\n\n      case 'Anonymous':\n        this.authenticationMode = this.ANONYM;\n        break;\n\n      case 'UserName':\n        this.authenticationMode = this.USER_PASSWORD;\n        break;\n\n      case 'Certificate':\n        this.authenticationMode = this.KEY_BASED;\n        break;\n\n      default:\n        this.authenticationMode = this.ANONYM;\n        break;\n    }\n  }\n\n  private getModelConfig(fragment: string) {\n    if (this.model && this.model.config) {\n      if (fragment && fragment.length > 0) {\n        return has(this.model.config, fragment) ? this.model.config[`${fragment}`] : undefined;\n      }\n    }\n    return undefined;\n  }\n}\n","import { Component, Input, Output, EventEmitter } from '@angular/core';\nimport { OpcuaServer } from './opcua-server.interface';\n\n@Component({\n  selector: 'opcua-server-list',\n  templateUrl: './opcua-server-list.component.html'\n})\nexport class OpcuaServerListComponent {\n  @Input() serverList: OpcuaServer[] = [];\n  @Output() present = new EventEmitter<OpcuaServer>();\n\n  presentConfig(server: OpcuaServer) {\n    server.active = true;\n    this.present.emit(server);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { CanActivate } from '@angular/router';\n\n@Injectable()\nexport class OpcuaServerGuard implements CanActivate {\n  type = 'c8y_OpcuaServer';\n  canActivate( { data } ) {\n    const { contextData } = data;\n    return contextData && contextData.type === this.type;\n  }\n}\n","import { Component, OnInit, Optional } from '@angular/core';\nimport { AlertService, ContextRouteComponent, gettext } from '@c8y/ngx-components';\nimport { TranslateService } from '@ngx-translate/core';\nimport { OpcuaServer } from './opcua-server.interface';\nimport { OpcuaService } from './opcuaService';\n\n@Component({\n  selector: 'opcua-servers',\n  templateUrl: './opcua-servers.component.html'\n})\nexport class OpcuaServersComponent implements OnInit {\n  serverObjectList: OpcuaServer[] = [];\n  initialServerObject: OpcuaServer = {\n    id: '',\n    name: 'New Server',\n    config: {\n      securityMode: 'NONE',\n      keystorePass: null,\n      keystoreBinaryId: null,\n      keystoreFilename: '',\n      certificatePass: null,\n      serverUrl: '',\n      userName: '',\n      userPassword: '',\n      rescanCron: null,\n      timeout: null,\n      autoReconnect: true,\n      statusCheckInterval: null,\n      valid: true\n    },\n    quickInfo: {\n      padlock: 'unlock',\n      padlockMsg: ''\n    },\n    active: true\n  };\n  server: OpcuaServer;\n  active: boolean = false;\n  private moId: string;\n  private NEW_SERVER_ID: string;\n\n  constructor(\n    private opcuaService: OpcuaService,\n    private alertService: AlertService,\n    private translateService: TranslateService,\n    @Optional() private context: ContextRouteComponent\n  ) {\n    this.moId = '';\n    this.NEW_SERVER_ID = 'new';\n    this.initialServerObject.id = this.NEW_SERVER_ID;\n  }\n\n  async ngOnInit() {\n    this.moId = this.opcuaService.getMoId();\n    if (this.moId && this.moId.length > 0) {\n      const res = await this.opcuaService.getServers(this.moId);\n      if (res && res.status !== 200) {\n        const data = res.json ? await res.json() : undefined;\n        this.alertService.addServerFailure({ data, res });\n      } else {\n        this.serverObjectList = (await res.json()) as OpcuaServer[];\n        this.serverObjectList.map(server => this.setQuickInfo(server));\n      }\n    }\n  }\n\n  localServerObjectExist() {\n    return !!this.serverObjectList.find(server => server.id === this.NEW_SERVER_ID);\n  }\n\n  addServer() {\n    const server: OpcuaServer = this.initialServerObject;\n    this.serverObjectList.push(server);\n    this.onPresent(server);\n  }\n\n  onSaved(server: OpcuaServer) {\n    if (server && server.id) {\n      server.gatewayId = this.moId;\n      if (server.id === this.NEW_SERVER_ID) {\n        this.createServer(server);\n      } else {\n        this.updateServer(server);\n      }\n    }\n  }\n\n  reloadTabs() {\n    if (this.context) {\n      this.context.refreshTabs();\n    }\n  }\n\n  onCanceled(server: OpcuaServer) {\n    if (server && server.id && server.id === this.NEW_SERVER_ID) {\n      this.removeServerObjectListById(server.id);\n    } else {\n      // update activity status for UI\n      this.serverObjectList.forEach(item => {\n        if (item.id === server.id) {\n          item.active = false;\n        }\n      });\n      // When server id is not 'new' we just close the details\n      delete this.server;\n    }\n  }\n\n  onRemoved(server: OpcuaServer) {\n    if (server.id === this.NEW_SERVER_ID) {\n      this.onCanceled(server);\n    } else {\n      this.removeServer(server);\n    }\n  }\n\n  async getKeystore(binaryId: string) {\n    const { data } = await this.opcuaService.getKeystore(binaryId);\n    return data;\n  }\n\n  async onPresent(server: OpcuaServer) {\n    if (\n      server &&\n      server.id !== this.NEW_SERVER_ID &&\n      server.config &&\n      server.config.keystoreBinaryId\n    ) {\n      try {\n        const mo = await this.getKeystore(server.config.keystoreBinaryId);\n        server.config.keystoreFilename = mo.name;\n      } catch (ex) {\n        this.server = Object.assign({}, server);\n        console.log('Could not get existing keystore:', ex);\n      }\n    }\n    if (this.serverObjectList.length > 0) {\n      this.serverObjectList.forEach(item => {\n        item.active = false;\n\n        if (item.id === server.id) {\n          item.active = true;\n          server.active = item.active;\n        }\n      });\n      this.setQuickInfo(server);\n      this.server = Object.assign({}, server);\n    }\n  }\n\n  private async createServer(server: OpcuaServer) {\n    const response = await this.opcuaService.createServer(server);\n    const svr = (await response.json()) as OpcuaServer;\n    this.updateServerObjectListById(this.NEW_SERVER_ID, svr);\n    this.reloadTabs();\n  }\n\n  private async updateServer(server: OpcuaServer) {\n    const updatedServer = (await this.opcuaService.updateServer(server)) as OpcuaServer;\n    if (updatedServer) {\n      this.updateServerObjectListById(updatedServer.id, updatedServer);\n    }\n  }\n\n  private async removeServer(server: OpcuaServer) {\n    try {\n      await this.opcuaService.removeServer(server);\n      this.removeServerObjectListById(server.id);\n      this.reloadTabs();\n    } catch (ex) {\n      console.log('Could not remove OPC UA server:', ex);\n    }\n  }\n\n  private removeServerObjectListById(id: string) {\n    this.serverObjectList.forEach((item, index) => {\n      if (item.id === id) {\n        this.serverObjectList.splice(index, 1);\n        delete this.server;\n      }\n    });\n  }\n\n  private updateServerObjectListById(id: string, server: OpcuaServer) {\n    const idx = this.serverObjectList.findIndex(item => item.id === id);\n    if (idx > -1) {\n      this.setQuickInfo(server);\n      this.serverObjectList[idx] = server;\n    }\n    delete this.server;\n  }\n\n  private setQuickInfo(server: OpcuaServer) {\n    server.quickInfo = {\n      padlock: 'unlock',\n      padlockMsg: ''\n    };\n\n    if (server && server.config) {\n      if (server.config.securityMode) {\n        server.quickInfo.padlock = server.config.securityMode !== 'NONE' ? 'lock' : 'unlock';\n        server.quickInfo.padlockMsg = this.translateService.instant(\n          gettext('The security policy is set to {{param}}.'),\n          { param: server.config.securityMode }\n        );\n      }\n    }\n  }\n}\n","import { Component, Input } from '@angular/core';\r\nimport {NgForm, ControlContainer} from '@angular/forms';\r\n\r\n@Component({\r\n  selector: 'opcua-device-protocol-description',\r\n  templateUrl: './opcua-device-protocol-description.html',\r\n  viewProviders: [{provide: ControlContainer, useExisting: NgForm}]\r\n})\r\n\r\nexport class OpcuaDeviceProtocolDescription {\r\n  _model: any;\r\n  autoScan: string;\r\n  @Input() set model(_model) {\r\n    this.moId = _model.referencedServerId;\r\n    this._model = _model;\r\n    this.autoScan = _model.enabled ? '1' : '0';\r\n  }\r\n\r\n  private moId: string = '';\r\n\r\n  setAutoScanOption(data: string) {\r\n    this._model.enabled = data !== '0' ? true : false;\r\n  }\r\n}\r\n","import { BehaviorSubject, Observable, merge, Subscription } from 'rxjs';\nimport { NestedTreeControl } from '@angular/cdk/tree';\nimport { CollectionViewer, SelectionChange } from '@angular/cdk/collections';\nimport { AddressSpaceService, AddressSpaceNode } from './address-space.service';\nimport { map } from 'rxjs/operators';\n\nexport class DynamicDataSource {\n  dataChange = new BehaviorSubject<AddressSpaceNode[]>([]);\n\n  get data(): AddressSpaceNode[] {\n    return this.dataChange.value;\n  }\n  set data(value: AddressSpaceNode[]) {\n    this.treeControl.dataNodes = value;\n    this.dataChange.next(value);\n  }\n\n  constructor(\n    public treeControl: NestedTreeControl<AddressSpaceNode>,\n    private addressSpaceService: AddressSpaceService,\n    private serverId: string\n  ) {\n    this.treeControl.isExpanded = (node: AddressSpaceNode) => node.expanded;\n  }\n\n  connect(collectionViewer: CollectionViewer): Observable<AddressSpaceNode[]> {\n    this.treeControl.expansionModel.onChange.subscribe(\n      (change: SelectionChange<AddressSpaceNode>) => {\n        if (change.added || change.removed) {\n          this.handleTreeControl(change);\n        }\n      }\n    );\n    return merge(collectionViewer.viewChange, this.dataChange).pipe(map(() => this.data));\n  }\n\n  /** Handle expand/collapse behaviors */\n  handleTreeControl(change: SelectionChange<AddressSpaceNode>) {\n    if (change.added) {\n      change.added.forEach(node => this.toggleNode(node, true));\n    }\n    if (change.removed) {\n      change.removed\n        .slice()\n        .reverse()\n        .forEach(node => this.toggleNode(node, false));\n    }\n  }\n\n  /**\n   * Toggle the node, remove from display list\n   */\n  async toggleNode(addressSpaceNode: AddressSpaceNode, expand: boolean) {\n    if (!addressSpaceNode.children || addressSpaceNode.children.length === 0) {\n      addressSpaceNode.currentlyLoadingChildren = true;\n\n      const res = await this.addressSpaceService.getChildrenOf(addressSpaceNode, this.serverId);\n      const children = (await res.json()) as AddressSpaceNode[];\n\n      addressSpaceNode.children = children || [];\n      addressSpaceNode.children = addressSpaceNode.children.map((node: AddressSpaceNode) => {\n        node.parentNode = addressSpaceNode;\n        return node;\n      });\n      addressSpaceNode.currentlyLoadingChildren = false;\n\n      this.treeControl.expand(addressSpaceNode);\n    }\n\n    addressSpaceNode.expanded = expand && addressSpaceNode.children.length > 0;\n    this.refreshNestedTree(this.data);\n\n    return Promise.resolve(addressSpaceNode);\n  }\n  catch() {\n    // do nothing\n  }\n\n  private refreshNestedTree(treeData: AddressSpaceNode[]) {\n    // necessary to rerender tree, otherwise new nodes will not\n    // appear, but they are added to the list.\n    this.data = [];\n    this.dataChange.next(treeData);\n    this.triggerResize(); // to resize the modal window when creating a new device protocol\n  }\n\n  private triggerResize() {\n    setTimeout(() => {\n      try {\n        window.dispatchEvent(new Event('resize'));\n      } catch (error) {\n        // do nothing\n      }\n    }, 200);\n  }\n}\n","import {\n  Component,\n  Input,\n  Output,\n  OnInit,\n  EventEmitter,\n  OnDestroy,\n  OnChanges,\n  SimpleChanges\n} from '@angular/core';\nimport { AddressSpaceNode, AddressSpaceService, NodeNavigationData } from './address-space.service';\nimport { OpcuaService } from './opcuaService';\nimport { AlertService } from '@c8y/ngx-components';\nimport { DynamicDataSource } from './dynamic-data-source';\nimport { NestedTreeControl } from '@angular/cdk/tree';\nimport { clone, cloneDeep } from 'lodash';\nimport { Subscription } from 'rxjs';\nimport { relative } from 'path';\n\n@Component({\n  selector: 'opcua-address-space-tree',\n  templateUrl: './opcua-address-space-tree.component.html'\n})\nexport class OpcuaAddressSpaceTreeComponent implements OnInit, OnDestroy, OnChanges {\n  @Input()\n  set moId(id: string) {\n    this._moId = id || undefined;\n  }\n\n  @Input() node;\n  @Input() focusEmitter: EventEmitter<AddressSpaceNode> = new EventEmitter<AddressSpaceNode>();\n  @Output() selectedNode: EventEmitter<AddressSpaceNode> = new EventEmitter<AddressSpaceNode>();\n  nestedTreeControl: NestedTreeControl<AddressSpaceNode>;\n  dataSource: DynamicDataSource = null;\n  focused: AddressSpaceNode;\n  loading: boolean = false;\n  subscriptionRef: Subscription;\n  nodeNavDataSubscription: Subscription;\n  private _moId: string;\n  constructor(\n    private addressSpaceService: AddressSpaceService,\n    private opcuaService: OpcuaService,\n    private alertService: AlertService\n  ) {}\n\n  getChildren = (node: AddressSpaceNode) => (node.expanded ? node.children : []);\n  hasChild = (_: number, _nodeData: AddressSpaceNode) =>\n    this.addressSpaceService.childrenAvailable(_nodeData.references)\n\n  ngOnInit() {\n    this.initializeDataSet();\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (changes.moId && (changes.moId.currentValue !== changes.moId.previousValue)) {\n      this.initializeDataSet();\n    }\n  }\n\n  initializeDataSet() {\n    this.nodeNavDataSubscription = this.addressSpaceService\n      .getNodeNavData$()\n      .subscribe(nodeNavData => this.openNode(nodeNavData));\n    this.subscriptionRef = this.focusEmitter.subscribe(node => {\n      this.focused = this.isFocusedNode(node) ? undefined : node;\n    });\n  }\n\n  ngOnDestroy() {\n    // clean up the address-space-tree\n    this.addressSpaceService.resetTreeToRootNode();\n\n    if (this.nodeNavDataSubscription && !this.nodeNavDataSubscription.closed) {\n      this.nodeNavDataSubscription.unsubscribe();\n    }\n\n    if (this.subscriptionRef && !this.subscriptionRef.closed) {\n      this.subscriptionRef.unsubscribe();\n    }\n  }\n\n  async openNode(nodeNavData: NodeNavigationData) {\n    const { node, selectedAncestorIds } = nodeNavData;\n    let nodeId;\n\n    // We just set the nodeId when the selectedAncestorIds variable an empty array.\n    // If selectedAncestorIds contain any id we assume that the tree should be travsersed beginning\n    // from the root node.\n    if (node && node.nodeId && selectedAncestorIds && selectedAncestorIds.length === 0) {\n      nodeId = node.nodeId;\n    }\n    // Always recreate the tree when routing to a specific nested node,\n    // because previous modifications to the tree-structure could cause errors\n    // while traversing with 'old' tree-data\n    // -----------------\n    // setupTree is able to handle nodeId = undefined\n    await this.setupTree(nodeId);\n\n    if (!selectedAncestorIds || selectedAncestorIds.length === 0) {\n      return;\n    }\n\n    if (nodeNavData && this.dataSource) {\n      const clonedAncestors = clone(selectedAncestorIds);\n      clonedAncestors.shift();\n\n      const n = await this.dataSource.toggleNode(this.dataSource.data[0], true);\n      this.setChildNodes(n.children, clonedAncestors);\n\n      this.toggleFocusedNode(node);\n    }\n  }\n\n  setChildNodes(nodes: AddressSpaceNode[], ids: string[]) {\n    if (nodes) {\n      ids.forEach(async id => {\n        const match = nodes.find(n => n.nodeId === id);\n        if (match && ids.length > 0) {\n          const idx = ids.findIndex(value => value === id);\n          if (idx >= 0) {\n            ids.splice(idx, 1);\n          }\n          const toggledNode = await this.dataSource.toggleNode(match, true);\n          this.setChildNodes(toggledNode.children, ids);\n        }\n      });\n    }\n  }\n\n  async setupTree(nodeId?: string) {\n    this.loading = true;\n\n    if (!this._moId || this._moId.length === 0) {\n      this._moId = this.opcuaService.getMoId();\n    }\n\n    // addressSpaceService.getNode returns either the root node of the server (moId)\n    // or if nodeId !== undefined the node with given nodeId\n    const res = await this.addressSpaceService.getNode(this._moId, nodeId);\n    if (res) {\n      if (res.status !== 200) {\n        const data = res.json ? await res.json() : undefined;\n        this.alertService.addServerFailure({ data, res });\n        this.dataSource = undefined;\n      } else {\n        const rootNode = (await res.json()) as AddressSpaceNode;\n        this.nestedTreeControl = new NestedTreeControl<AddressSpaceNode>(this.getChildren);\n        this.dataSource = new DynamicDataSource(\n          this.nestedTreeControl,\n          this.addressSpaceService,\n          this._moId\n        );\n        this.dataSource.data = [rootNode];\n      }\n      this.loading = false;\n    } else {\n      this.loading = false;\n    }\n  }\n\n  getMoId() {\n    if (!this._moId || this._moId.length === 0) {\n      return this.opcuaService.getMoId();\n    }\n    return this._moId;\n  }\n\n  getIcon(nodeClassName) {\n    return this.addressSpaceService.getIcon(nodeClassName);\n  }\n\n  toggleFocusedNode(node) {\n    const relativePath = [];\n    this.getRelativePath(node, relativePath);\n    node.relativePath = relativePath;\n\n    this.selectedNode.emit(node);\n    this.focused = this.isFocusedNode(node) ? undefined : node;\n  }\n\n  isFocusedNode(node: AddressSpaceNode) {\n    if (this.focused) {\n      return node.nodeId === this.focused.nodeId;\n    }\n    return false;\n  }\n\n  private getRelativePath(node: AddressSpaceNode, relativePath: string[]) {\n    if (node.parentNode) {\n      relativePath.unshift(node.browseName);\n      this.getRelativePath(node.parentNode, relativePath);\n    }\n  }\n}\n","import { Component, Input, OnInit } from '@angular/core';\nimport { AutoApplyConstraints } from './opcua-protocol-device-type.interface';\nimport { IManagedObject, InventoryService } from '@c8y/client';\nimport { gettext } from '@c8y/ngx-components';\nimport { set } from 'lodash-es';\n@Component({\n  selector: 'opcua-auto-apply',\n  templateUrl: './opcua-auto-apply-settings.component.html'\n})\nexport class OpcuaAutoApplySettingsComponent implements OnInit {\n  opcuaServers: IManagedObject[] = [];\n  selected: IManagedObject[] = [];\n  constraints: AutoApplyConstraints = {\n    browsePathMatchesRegex: '',\n    matchesNodeIds: [],\n    serverObjectHasFragment: '',\n    matchesServerIds: []\n  };\n  placeholderSelectServerIds: string = gettext('Select server IDs from list');\n  showServerIds: boolean;\n  showBrowsePath: boolean;\n  showServerFragment: boolean;\n  showRootNodes: boolean;\n  private _model: IManagedObject;\n\n  constructor(private inventoryService: InventoryService) {}\n\n  async ngOnInit() {\n    const { data } = await this.inventoryService.list({\n      pageSize: 1000,\n      withTotalPages: true,\n      type: 'c8y_OpcuaServer'\n    });\n\n    this.opcuaServers = data;\n    this.selected = [];\n\n    const { matchesServerIds } = this.constraints;\n\n    data.forEach(server => {\n      if (\n        matchesServerIds &&\n        matchesServerIds.length > 0 &&\n        matchesServerIds.find(itemId => itemId === server.id)\n      ) {\n        this.selected.push(server);\n      }\n    });\n  }\n\n  @Input() set model(model) {\n    if (model && model.applyConstraints) {\n      this.constraints = model.applyConstraints as AutoApplyConstraints;\n    }\n    this._model = model;\n  }\n\n  get model() {\n    return this._model;\n  }\n\n  serverIdsSelected(items: IManagedObject[]) {\n    if (this.constraints) {\n      this.constraints.matchesServerIds = items.map((item: IManagedObject) => item.id);\n    }\n    this.selected = items;\n  }\n\n  onChangeNodeId(event) {\n    if (event.target.checked) {\n      this.showRootNodes = true;\n      this.add();\n    } else {\n      this.showRootNodes = false;\n      this.constraints.matchesNodeIds = [];\n    }\n  }\n\n  onChangeShowServerIds(event) {\n    if (!event.target.checked) {\n      this.constraints.matchesServerIds = [];\n      this.showServerIds = false;\n      this.selected = [];\n    } else {\n      this.showServerIds = true;\n    }\n  }\n\n  onChangeShowBrowsePath(event) {\n    if (!event.target.checked) {\n      this.constraints.browsePathMatchesRegex = '';\n      this.showBrowsePath = false;\n    } else {\n      this.showBrowsePath = true;\n    }\n  }\n\n  onChangeShowServerFragment(event) {\n    if (!event.target.checked) {\n      this.constraints.serverObjectHasFragment = '';\n      this.showServerFragment = false;\n    } else {\n      this.showServerFragment = true;\n    }\n  }\n\n  add() {\n    this.constraints.matchesNodeIds.push('');\n  }\n\n  remove(index) {\n    this.constraints.matchesNodeIds.splice(index, 1);\n  }\n\n  trackByFn(index: any, item: any) {\n    return index;\n  }\n}\n","import { CdkTreeModule } from '@angular/cdk/tree';\nimport { CdkStepperModule } from '@angular/cdk/stepper';\nimport { RouterModule } from '@angular/router';\nimport { NgModule } from '@angular/core';\nimport {\n  CoreModule,\n  DeviceStatusModule,\n  DropAreaModule,\n  FormsModule,\n  gettext,\n  HOOK_ONCE_ROUTE,\n  Route,\n  ViewContext\n} from '@c8y/ngx-components';\nimport { ButtonsModule } from 'ngx-bootstrap/buttons';\nimport { AddressSpaceService } from './address-space.service';\nimport { OpcuaAddressSpaceDetailComponent } from './opcua-address-space-detail.component';\nimport { OpcuaDeviceProtocolDetailComponent } from './opcua-device-protocol-detail.component';\nimport { OpcuaDeviceProtocolDataReportingComponent } from './opcua-device-protocol-data-reporting.component';\nimport { OpcuaDeviceProtocolMapping } from './opcua-device-protocol-mapping.component';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { OpcuaDeviceProtocolObjectMapping } from './opcua-device-protocol-object-mapping.component';\nimport { OpcuaDeviceProtocolMappingCustomAction } from './opcua-device-protocol-mapping-customaction.component';\nimport { OpcuaDeviceProtocolObjectMappingStatus } from './opcua-device-protocol-object-mapping-status-icon.component';\nimport { OpcuaAddressSpaceComponent } from './opcua-address-space.component';\nimport { OpcuaAgentGuard } from './opcua-agent.guard';\nimport { OpcuaMicroserviceGuard } from './opcua-microservice.guard';\nimport { OpcuaServerConfigComponent } from './opcua-server-config.component';\nimport { OpcuaServerListComponent } from './opcua-server-list.component';\nimport { OpcuaServerGuard } from './opcua-server.guard';\nimport { OpcuaServersComponent } from './opcua-servers.component';\nimport { OpcuaService } from './opcuaService';\nimport { CollapseModule } from 'ngx-bootstrap/collapse';\nimport { BsDropdownModule } from 'ngx-bootstrap/dropdown';\nimport { TooltipModule } from 'ngx-bootstrap/tooltip';\nimport { PopoverModule } from 'ngx-bootstrap/popover';\nimport { OpcuaDeviceProtocolDescription } from './opcua-device-protocol-description.component';\nimport { OpcuaAddressSpaceTreeComponent } from './opcua-address-space-tree.component';\nimport { OpcuaAutoApplySettingsComponent } from './opcua-auto-apply-settings.component';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { OpcuaDeviceProtocolBrowsePathValidation } from './opcua-device-protocol-browse-path-validation.directive';\n\nconst routes: Route[] = [\n  {\n    context: ViewContext.Device,\n    path: 'opcua-servers',\n    component: OpcuaServersComponent,\n    label: gettext('OPC UA server'),\n    icon: 'server',\n    canActivate: [OpcuaAgentGuard, OpcuaMicroserviceGuard]\n  },\n  {\n    context: ViewContext.Device,\n    path: 'address-space',\n    component: OpcuaAddressSpaceComponent,\n    label: gettext('Address space'),\n    icon: 'sitemap',\n    canActivate: [OpcuaServerGuard, OpcuaMicroserviceGuard]\n  }\n];\n\nconst deviceProtocolRoutes: Route[] = [\n  {\n    path: 'deviceprotocols/opcuaV2/:id',\n    component: OpcuaDeviceProtocolDetailComponent\n  }\n];\n\n@NgModule({\n  declarations: [\n    OpcuaServersComponent,\n    OpcuaServerListComponent,\n    OpcuaServerConfigComponent,\n    OpcuaAddressSpaceComponent,\n    OpcuaAddressSpaceTreeComponent,\n    OpcuaAddressSpaceDetailComponent,\n    OpcuaDeviceProtocolDescription,\n    OpcuaDeviceProtocolDetailComponent,\n    OpcuaDeviceProtocolDataReportingComponent,\n    OpcuaDeviceProtocolMapping,\n    OpcuaDeviceProtocolObjectMapping,\n    OpcuaDeviceProtocolMappingCustomAction,\n    OpcuaDeviceProtocolObjectMappingStatus,\n    OpcuaAutoApplySettingsComponent,\n    OpcuaDeviceProtocolBrowsePathValidation\n  ],\n  imports: [\n    CoreModule,\n    FormsModule,\n    ReactiveFormsModule,\n    DropAreaModule,\n    ButtonsModule,\n    CdkTreeModule,\n    RouterModule.forRoot(deviceProtocolRoutes, { useHash: true }),\n    TooltipModule.forRoot(),\n    PopoverModule.forRoot(),\n    DeviceStatusModule,\n    BrowserAnimationsModule,\n    CollapseModule.forRoot(),\n    BsDropdownModule.forRoot()\n  ],\n  entryComponents: [\n    OpcuaAddressSpaceTreeComponent,\n    OpcuaAddressSpaceComponent,\n    OpcuaServersComponent\n  ],\n  providers: [\n    OpcuaAgentGuard,\n    OpcuaServerGuard,\n    OpcuaMicroserviceGuard,\n    OpcuaService,\n    AddressSpaceService,\n    {\n      provide: HOOK_ONCE_ROUTE,\n      useValue: routes,\n      multi: true\n    }\n  ]\n})\nexport class OpcuaProtocolModule {}\n","import { downgradeComponent } from '@angular/upgrade/static';\nimport { OpcuaAddressSpaceTreeComponent } from '../opcua-address-space-tree.component';\nexport const opcuaAddressSpaceTreeComponent = downgradeComponent({\n  component: OpcuaAddressSpaceTreeComponent,\n  inputs: ['moId'],\n  outputs: ['selectedNode']\n});\n","import * as angular from 'angular';\nimport { registerNgModule } from '@c8y/ng1-modules/core/bootstrap';\nimport { opcuaAddressSpaceTreeComponent } from './downgraded.components';\n\nconst NAME = 'c8y.upgrade.opcua';\n\nconst angularJsModule = angular\n  .module(NAME, [])\n  .directive('c8yOpcuaAddressSpaceTree', opcuaAddressSpaceTreeComponent);\n\nexport const ng1Modules = [NAME];\n\nregisterNgModule(ng1Modules);\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":["tslib_1.__decorate","tslib_1.__extends","get","assign","omit","unset","set","tslib_1.__param","angular\n    .module"],"mappings":"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"}