import * as tslib_1 from "tslib";
import { Component, ElementRef, Input, ViewChild } from '@angular/core';
import { escape, escapeRegExp } from 'lodash-es';
let HighlightComponent = class HighlightComponent {
    constructor() {
        this.pattern = '';
        this.text = '';
        this.elementClass = 'text-info';
        this.highlightedText = '';
    }
    ngOnChanges() {
        const textNoHtml = escape(this.text || '');
        const patternNoHtml = escape(this.pattern || '');
        const patternForRegex = escapeRegExp(patternNoHtml).replace(/\\\*/g, '.*');
        this.highlightedText = textNoHtml.replace(new RegExp(patternForRegex, 'i'), `<strong class="${this.elementClass}">$&</strong>`);
    }
};
tslib_1.__decorate([
    ViewChild('text', { read: ElementRef, static: true })
], HighlightComponent.prototype, "container", void 0);
tslib_1.__decorate([
    Input()
], HighlightComponent.prototype, "pattern", void 0);
tslib_1.__decorate([
    Input()
], HighlightComponent.prototype, "text", void 0);
tslib_1.__decorate([
    Input()
], HighlightComponent.prototype, "elementClass", void 0);
HighlightComponent = tslib_1.__decorate([
    Component({
        selector: 'c8y-highlight',
        template: '<span [innerHTML]="highlightedText"></span>'
    })
], HighlightComponent);
export { HighlightComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaGlnaGxpZ2h0LmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BjOHkvbmd4LWNvbXBvbmVudHMvIiwic291cmNlcyI6WyJjb3JlL3NlYXJjaC9oaWdobGlnaHQuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxPQUFPLEVBQ0wsU0FBUyxFQUNULFVBQVUsRUFDVixLQUFLLEVBQ0wsU0FBUyxFQUNWLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFBRSxNQUFNLEVBQUUsWUFBWSxFQUFFLE1BQU0sV0FBVyxDQUFDO0FBTWpELElBQWEsa0JBQWtCLEdBQS9CLE1BQWEsa0JBQWtCO0lBSi9CO1FBU0UsWUFBTyxHQUFXLEVBQUUsQ0FBQztRQUdyQixTQUFJLEdBQVcsRUFBRSxDQUFDO1FBR2xCLGlCQUFZLEdBQVcsV0FBVyxDQUFDO1FBRW5DLG9CQUFlLEdBQVcsRUFBRSxDQUFDO0lBVy9CLENBQUM7SUFUQyxXQUFXO1FBQ1QsTUFBTSxVQUFVLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLElBQUksRUFBRSxDQUFDLENBQUM7UUFDM0MsTUFBTSxhQUFhLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLElBQUksRUFBRSxDQUFDLENBQUM7UUFDakQsTUFBTSxlQUFlLEdBQUcsWUFBWSxDQUFDLGFBQWEsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLENBQUM7UUFDM0UsSUFBSSxDQUFDLGVBQWUsR0FBRyxVQUFVLENBQUMsT0FBTyxDQUN2QyxJQUFJLE1BQU0sQ0FBQyxlQUFlLEVBQUUsR0FBRyxDQUFDLEVBQ2hDLGtCQUFrQixJQUFJLENBQUMsWUFBWSxlQUFlLENBQ25ELENBQUM7SUFDSixDQUFDO0NBQ0YsQ0FBQTtBQXRCQztJQURDLFNBQVMsQ0FBQyxNQUFNLEVBQUUsRUFBRSxJQUFJLEVBQUUsVUFBVSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsQ0FBQztxREFDaEM7QUFHdEI7SUFEQyxLQUFLLEVBQUU7bURBQ2E7QUFHckI7SUFEQyxLQUFLLEVBQUU7Z0RBQ1U7QUFHbEI7SUFEQyxLQUFLLEVBQUU7d0RBQzJCO0FBWHhCLGtCQUFrQjtJQUo5QixTQUFTLENBQUM7UUFDVCxRQUFRLEVBQUUsZUFBZTtRQUN6QixRQUFRLEVBQUUsNkNBQTZDO0tBQ3hELENBQUM7R0FDVyxrQkFBa0IsQ0F3QjlCO1NBeEJZLGtCQUFrQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIENvbXBvbmVudCxcbiAgRWxlbWVudFJlZixcbiAgSW5wdXQsXG4gIFZpZXdDaGlsZFxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IGVzY2FwZSwgZXNjYXBlUmVnRXhwIH0gZnJvbSAnbG9kYXNoLWVzJztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnYzh5LWhpZ2hsaWdodCcsXG4gIHRlbXBsYXRlOiAnPHNwYW4gW2lubmVySFRNTF09XCJoaWdobGlnaHRlZFRleHRcIj48L3NwYW4+J1xufSlcbmV4cG9ydCBjbGFzcyBIaWdobGlnaHRDb21wb25lbnQge1xuICBAVmlld0NoaWxkKCd0ZXh0JywgeyByZWFkOiBFbGVtZW50UmVmLCBzdGF0aWM6IHRydWUgfSlcbiAgY29udGFpbmVyOiBFbGVtZW50UmVmO1xuXG4gIEBJbnB1dCgpXG4gIHBhdHRlcm46IHN0cmluZyA9ICcnO1xuXG4gIEBJbnB1dCgpXG4gIHRleHQ6IHN0cmluZyA9ICcnO1xuXG4gIEBJbnB1dCgpXG4gIGVsZW1lbnRDbGFzczogc3RyaW5nID0gJ3RleHQtaW5mbyc7XG5cbiAgaGlnaGxpZ2h0ZWRUZXh0OiBzdHJpbmcgPSAnJztcblxuICBuZ09uQ2hhbmdlcygpOiB2b2lkIHtcbiAgICBjb25zdCB0ZXh0Tm9IdG1sID0gZXNjYXBlKHRoaXMudGV4dCB8fCAnJyk7XG4gICAgY29uc3QgcGF0dGVybk5vSHRtbCA9IGVzY2FwZSh0aGlzLnBhdHRlcm4gfHwgJycpO1xuICAgIGNvbnN0IHBhdHRlcm5Gb3JSZWdleCA9IGVzY2FwZVJlZ0V4cChwYXR0ZXJuTm9IdG1sKS5yZXBsYWNlKC9cXFxcXFwqL2csICcuKicpO1xuICAgIHRoaXMuaGlnaGxpZ2h0ZWRUZXh0ID0gdGV4dE5vSHRtbC5yZXBsYWNlKFxuICAgICAgbmV3IFJlZ0V4cChwYXR0ZXJuRm9yUmVnZXgsICdpJyksXG4gICAgICBgPHN0cm9uZyBjbGFzcz1cIiR7dGhpcy5lbGVtZW50Q2xhc3N9XCI+JCY8L3N0cm9uZz5gXG4gICAgKTtcbiAgfVxufVxuIl19