import * as tslib_1 from "tslib";
import { Injectable } from '@angular/core';
import { ViewContext } from '@c8y/ngx-components';
import { CopyActionComponent } from './copy-action.component';
import { DashboardBridgeService } from './dashboard-bridge.service';
import { PasteActionComponent } from './paste-action.component';
let Ng1DashboardActionFactoryService = class Ng1DashboardActionFactoryService {
    constructor(dashboardBridgeService) {
        this.dashboardBridgeService = dashboardBridgeService;
    }
    get(activeRoute) {
        const actions = [];
        const data = !activeRoute.parent || activeRoute.snapshot.data.context
            ? activeRoute.snapshot.data
            : activeRoute.parent.snapshot.data;
        const { contextData } = data;
        const canCopy = contextData &&
            activeRoute.snapshot.data.dashboard &&
            [ViewContext.Device, ViewContext.Group].includes(data.context);
        const canPaste = contextData &&
            [ViewContext.Device, ViewContext.Group].includes(data.context) &&
            this.dashboardBridgeService.dashboardClipboard;
        if (canCopy) {
            actions.push({
                priority: -20,
                placement: 'more',
                template: CopyActionComponent
            });
        }
        if (canPaste) {
            actions.push({
                priority: -10,
                placement: 'more',
                template: PasteActionComponent
            });
        }
        return actions;
    }
};
Ng1DashboardActionFactoryService.ctorParameters = () => [
    { type: DashboardBridgeService }
];
Ng1DashboardActionFactoryService = tslib_1.__decorate([
    Injectable()
], Ng1DashboardActionFactoryService);
export { Ng1DashboardActionFactoryService };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGFzaGJvYXJkLWFjdGlvbnMuZmFjdG9yeS5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BjOHkvbmd4LWNvbXBvbmVudHMvdXBncmFkZS8iLCJzb3VyY2VzIjpbImRhc2hib2FyZC9kYXNoYm9hcmQtYWN0aW9ucy5mYWN0b3J5LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBRTNDLE9BQU8sRUFBbUMsV0FBVyxFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDbkYsT0FBTyxFQUFFLG1CQUFtQixFQUFFLE1BQU0seUJBQXlCLENBQUM7QUFDOUQsT0FBTyxFQUFFLHNCQUFzQixFQUFFLE1BQU0sNEJBQTRCLENBQUM7QUFDcEUsT0FBTyxFQUFFLG9CQUFvQixFQUFFLE1BQU0sMEJBQTBCLENBQUM7QUFHaEUsSUFBYSxnQ0FBZ0MsR0FBN0MsTUFBYSxnQ0FBZ0M7SUFDM0MsWUFBb0Isc0JBQThDO1FBQTlDLDJCQUFzQixHQUF0QixzQkFBc0IsQ0FBd0I7SUFBRyxDQUFDO0lBRXRFLEdBQUcsQ0FBQyxXQUE0QjtRQUM5QixNQUFNLE9BQU8sR0FBRyxFQUFFLENBQUM7UUFDbkIsTUFBTSxJQUFJLEdBQ1IsQ0FBQyxXQUFXLENBQUMsTUFBTSxJQUFJLFdBQVcsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE9BQU87WUFDdEQsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsSUFBSTtZQUMzQixDQUFDLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDO1FBQ3ZDLE1BQU0sRUFBRSxXQUFXLEVBQUUsR0FBRyxJQUFJLENBQUM7UUFDN0IsTUFBTSxPQUFPLEdBQ1gsV0FBVztZQUNYLFdBQVcsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFNBQVM7WUFDbkMsQ0FBQyxXQUFXLENBQUMsTUFBTSxFQUFFLFdBQVcsQ0FBQyxLQUFLLENBQUMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ2pFLE1BQU0sUUFBUSxHQUNaLFdBQVc7WUFDWCxDQUFDLFdBQVcsQ0FBQyxNQUFNLEVBQUUsV0FBVyxDQUFDLEtBQUssQ0FBQyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDO1lBQzlELElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxrQkFBa0IsQ0FBQztRQUVqRCxJQUFJLE9BQU8sRUFBRTtZQUNYLE9BQU8sQ0FBQyxJQUFJLENBQUM7Z0JBQ1gsUUFBUSxFQUFFLENBQUMsRUFBRTtnQkFDYixTQUFTLEVBQUUsTUFBTTtnQkFDakIsUUFBUSxFQUFFLG1CQUFtQjthQUNiLENBQUMsQ0FBQztTQUNyQjtRQUVELElBQUksUUFBUSxFQUFFO1lBQ1osT0FBTyxDQUFDLElBQUksQ0FBQztnQkFDWCxRQUFRLEVBQUUsQ0FBQyxFQUFFO2dCQUNiLFNBQVMsRUFBRSxNQUFNO2dCQUNqQixRQUFRLEVBQUUsb0JBQW9CO2FBQ2QsQ0FBQyxDQUFDO1NBQ3JCO1FBRUQsT0FBTyxPQUFPLENBQUM7SUFDakIsQ0FBQztDQUNGLENBQUE7O1lBcEM2QyxzQkFBc0I7O0FBRHZELGdDQUFnQztJQUQ1QyxVQUFVLEVBQUU7R0FDQSxnQ0FBZ0MsQ0FxQzVDO1NBckNZLGdDQUFnQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEFjdGl2YXRlZFJvdXRlIH0gZnJvbSAnQGFuZ3VsYXIvcm91dGVyJztcbmltcG9ydCB7IEFjdGlvbkJhckZhY3RvcnksIEFjdGlvbkJhckl0ZW0sIFZpZXdDb250ZXh0IH0gZnJvbSAnQGM4eS9uZ3gtY29tcG9uZW50cyc7XG5pbXBvcnQgeyBDb3B5QWN0aW9uQ29tcG9uZW50IH0gZnJvbSAnLi9jb3B5LWFjdGlvbi5jb21wb25lbnQnO1xuaW1wb3J0IHsgRGFzaGJvYXJkQnJpZGdlU2VydmljZSB9IGZyb20gJy4vZGFzaGJvYXJkLWJyaWRnZS5zZXJ2aWNlJztcbmltcG9ydCB7IFBhc3RlQWN0aW9uQ29tcG9uZW50IH0gZnJvbSAnLi9wYXN0ZS1hY3Rpb24uY29tcG9uZW50JztcblxuQEluamVjdGFibGUoKVxuZXhwb3J0IGNsYXNzIE5nMURhc2hib2FyZEFjdGlvbkZhY3RvcnlTZXJ2aWNlIGltcGxlbWVudHMgQWN0aW9uQmFyRmFjdG9yeSB7XG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgZGFzaGJvYXJkQnJpZGdlU2VydmljZTogRGFzaGJvYXJkQnJpZGdlU2VydmljZSkge31cblxuICBnZXQoYWN0aXZlUm91dGU/OiBBY3RpdmF0ZWRSb3V0ZSkge1xuICAgIGNvbnN0IGFjdGlvbnMgPSBbXTtcbiAgICBjb25zdCBkYXRhID1cbiAgICAgICFhY3RpdmVSb3V0ZS5wYXJlbnQgfHwgYWN0aXZlUm91dGUuc25hcHNob3QuZGF0YS5jb250ZXh0XG4gICAgICAgID8gYWN0aXZlUm91dGUuc25hcHNob3QuZGF0YVxuICAgICAgICA6IGFjdGl2ZVJvdXRlLnBhcmVudC5zbmFwc2hvdC5kYXRhO1xuICAgIGNvbnN0IHsgY29udGV4dERhdGEgfSA9IGRhdGE7XG4gICAgY29uc3QgY2FuQ29weSA9XG4gICAgICBjb250ZXh0RGF0YSAmJlxuICAgICAgYWN0aXZlUm91dGUuc25hcHNob3QuZGF0YS5kYXNoYm9hcmQgJiZcbiAgICAgIFtWaWV3Q29udGV4dC5EZXZpY2UsIFZpZXdDb250ZXh0Lkdyb3VwXS5pbmNsdWRlcyhkYXRhLmNvbnRleHQpO1xuICAgIGNvbnN0IGNhblBhc3RlID1cbiAgICAgIGNvbnRleHREYXRhICYmXG4gICAgICBbVmlld0NvbnRleHQuRGV2aWNlLCBWaWV3Q29udGV4dC5Hcm91cF0uaW5jbHVkZXMoZGF0YS5jb250ZXh0KSAmJlxuICAgICAgdGhpcy5kYXNoYm9hcmRCcmlkZ2VTZXJ2aWNlLmRhc2hib2FyZENsaXBib2FyZDtcblxuICAgIGlmIChjYW5Db3B5KSB7XG4gICAgICBhY3Rpb25zLnB1c2goe1xuICAgICAgICBwcmlvcml0eTogLTIwLFxuICAgICAgICBwbGFjZW1lbnQ6ICdtb3JlJyxcbiAgICAgICAgdGVtcGxhdGU6IENvcHlBY3Rpb25Db21wb25lbnRcbiAgICAgIH0gYXMgQWN0aW9uQmFySXRlbSk7XG4gICAgfVxuXG4gICAgaWYgKGNhblBhc3RlKSB7XG4gICAgICBhY3Rpb25zLnB1c2goe1xuICAgICAgICBwcmlvcml0eTogLTEwLFxuICAgICAgICBwbGFjZW1lbnQ6ICdtb3JlJyxcbiAgICAgICAgdGVtcGxhdGU6IFBhc3RlQWN0aW9uQ29tcG9uZW50XG4gICAgICB9IGFzIEFjdGlvbkJhckl0ZW0pO1xuICAgIH1cblxuICAgIHJldHVybiBhY3Rpb25zO1xuICB9XG59XG4iXX0=