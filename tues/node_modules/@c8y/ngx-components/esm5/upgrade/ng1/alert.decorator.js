import * as tslib_1 from "tslib";
function c8yAlertDecorator($delegate, $rootScope, $injector) {
    'ngInject';
    $delegate.add = function (alert) {
        $delegate.addAlert(transformAlert(alert));
    };
    $rootScope.$on('alert', function (evt, alert) {
        $delegate.addAlert(transformAlert(alert));
    });
    $rootScope.$on('message', function (evt, alert) {
        $delegate.addAlert(transformAlert(alert));
    });
    for (var property in $delegate) {
        if (typeof $delegate[property] === 'function') {
            $delegate[property] = $delegate[property].bind($delegate);
        }
    }
    function transformAlert(alert) {
        var newAlert = tslib_1.__assign({}, alert);
        if (alert.onClose) {
            newAlert.onClose = function () {
                $injector.invoke(alert.onClose);
            };
        }
        if (alert.onDetail) {
            newAlert.onDetail = function () {
                $injector.invoke(alert.onDetail);
            };
        }
        return newAlert;
    }
    return $delegate;
}
export { c8yAlertDecorator };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWxlcnQuZGVjb3JhdG9yLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGM4eS9uZ3gtY29tcG9uZW50cy91cGdyYWRlLyIsInNvdXJjZXMiOlsibmcxL2FsZXJ0LmRlY29yYXRvci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsU0FBUyxpQkFBaUIsQ0FDdEIsU0FBUyxFQUNULFVBQVUsRUFDVixTQUFTO0lBRVgsVUFBVSxDQUFDO0lBRVgsU0FBUyxDQUFDLEdBQUcsR0FBRyxVQUFDLEtBQUs7UUFDcEIsU0FBUyxDQUFDLFFBQVEsQ0FBQyxjQUFjLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztJQUM1QyxDQUFDLENBQUM7SUFFRixVQUFVLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxVQUFDLEdBQUcsRUFBRSxLQUFLO1FBQ2pDLFNBQVMsQ0FBQyxRQUFRLENBQUMsY0FBYyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7SUFDNUMsQ0FBQyxDQUFDLENBQUM7SUFFSCxVQUFVLENBQUMsR0FBRyxDQUFDLFNBQVMsRUFBRSxVQUFDLEdBQUcsRUFBRSxLQUFLO1FBQ25DLFNBQVMsQ0FBQyxRQUFRLENBQUMsY0FBYyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7SUFDNUMsQ0FBQyxDQUFDLENBQUM7SUFFSCxLQUFLLElBQU0sUUFBUSxJQUFJLFNBQVMsRUFBRTtRQUNoQyxJQUFJLE9BQU8sU0FBUyxDQUFDLFFBQVEsQ0FBQyxLQUFLLFVBQVUsRUFBRTtZQUM3QyxTQUFTLENBQUMsUUFBUSxDQUFDLEdBQUcsU0FBUyxDQUFDLFFBQVEsQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztTQUMzRDtLQUNGO0lBRUQsU0FBUyxjQUFjLENBQUMsS0FBVTtRQUNoQyxJQUFNLFFBQVEsd0JBQWEsS0FBSyxDQUFFLENBQUM7UUFDbkMsSUFBSSxLQUFLLENBQUMsT0FBTyxFQUFFO1lBQ2pCLFFBQVEsQ0FBQyxPQUFPLEdBQUc7Z0JBQ2pCLFNBQVMsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBQ2xDLENBQUMsQ0FBQztTQUNIO1FBQ0QsSUFBSSxLQUFLLENBQUMsUUFBUSxFQUFFO1lBQ2xCLFFBQVEsQ0FBQyxRQUFRLEdBQUc7Z0JBQ2xCLFNBQVMsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQ25DLENBQUMsQ0FBQztTQUNIO1FBQ0QsT0FBTyxRQUFRLENBQUM7SUFDbEIsQ0FBQztJQUVELE9BQU8sU0FBUyxDQUFDO0FBQ25CLENBQUM7QUFFRCxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIGM4eUFsZXJ0RGVjb3JhdG9yKFxyXG4gICAgJGRlbGVnYXRlLFxyXG4gICAgJHJvb3RTY29wZSxcclxuICAgICRpbmplY3RvclxyXG4pIHtcclxuICAnbmdJbmplY3QnO1xyXG5cclxuICAkZGVsZWdhdGUuYWRkID0gKGFsZXJ0KSA9PiB7XHJcbiAgICAkZGVsZWdhdGUuYWRkQWxlcnQodHJhbnNmb3JtQWxlcnQoYWxlcnQpKTtcclxuICB9O1xyXG5cclxuICAkcm9vdFNjb3BlLiRvbignYWxlcnQnLCAoZXZ0LCBhbGVydCkgPT4ge1xyXG4gICAgJGRlbGVnYXRlLmFkZEFsZXJ0KHRyYW5zZm9ybUFsZXJ0KGFsZXJ0KSk7XHJcbiAgfSk7XHJcblxyXG4gICRyb290U2NvcGUuJG9uKCdtZXNzYWdlJywgKGV2dCwgYWxlcnQpID0+IHtcclxuICAgICRkZWxlZ2F0ZS5hZGRBbGVydCh0cmFuc2Zvcm1BbGVydChhbGVydCkpO1xyXG4gIH0pO1xyXG5cclxuICBmb3IgKGNvbnN0IHByb3BlcnR5IGluICRkZWxlZ2F0ZSkge1xyXG4gICAgaWYgKHR5cGVvZiAkZGVsZWdhdGVbcHJvcGVydHldID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICRkZWxlZ2F0ZVtwcm9wZXJ0eV0gPSAkZGVsZWdhdGVbcHJvcGVydHldLmJpbmQoJGRlbGVnYXRlKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHRyYW5zZm9ybUFsZXJ0KGFsZXJ0OiBhbnkpIHtcclxuICAgIGNvbnN0IG5ld0FsZXJ0OiBhbnkgPSB7IC4uLmFsZXJ0IH07XHJcbiAgICBpZiAoYWxlcnQub25DbG9zZSkge1xyXG4gICAgICBuZXdBbGVydC5vbkNsb3NlID0gKCkgPT4ge1xyXG4gICAgICAgICRpbmplY3Rvci5pbnZva2UoYWxlcnQub25DbG9zZSk7XHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgICBpZiAoYWxlcnQub25EZXRhaWwpIHtcclxuICAgICAgbmV3QWxlcnQub25EZXRhaWwgPSAoKSA9PiB7XHJcbiAgICAgICAgJGluamVjdG9yLmludm9rZShhbGVydC5vbkRldGFpbCk7XHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbmV3QWxlcnQ7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gJGRlbGVnYXRlO1xyXG59XHJcblxyXG5leHBvcnQgeyBjOHlBbGVydERlY29yYXRvciB9O1xyXG4iXX0=