import * as tslib_1 from "tslib";
import { Component, Input } from '@angular/core';
import { AuditService, IAuditRecord, IResultList } from '@c8y/client';
var AuditLogComponent = /** @class */ (function () {
    function AuditLogComponent(audit) {
        this.audit = audit;
    }
    AuditLogComponent.prototype.ngOnInit = function () {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            var _a;
            return tslib_1.__generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        if (!this.source) return [3 /*break*/, 2];
                        _a = this;
                        return [4 /*yield*/, this.audit.list({
                                withTotalPages: true,
                                source: this.source
                            })];
                    case 1:
                        _a.records = _b.sent();
                        _b.label = 2;
                    case 2: return [2 /*return*/];
                }
            });
        });
    };
    AuditLogComponent.ctorParameters = function () { return [
        { type: AuditService }
    ]; };
    tslib_1.__decorate([
        Input()
    ], AuditLogComponent.prototype, "source", void 0);
    AuditLogComponent = tslib_1.__decorate([
        Component({
            selector: 'c8y-audit-log',
            template: "<div class=\"inner-scroll\">\n  <ul class=\"timeline-list list-condensed m-t-16\">\n    <li class=\"timeline-list-item flex-row\" *c8yFor=\"let record of records\">\n      <small class=\"timeline-item-date text-right\">\n        <span>{{ record.time | c8yDate }}</span>\n      </small>\n      <div class=\"timeline-item-content flex-row\">\n        <div class=\"list-item-body\">\n          <div class=\"row text-break-word\">\n            <div class=\"col-md-5\">\n              <span class=\"text-truncate\">{{ record.activity | translate }}</span>\n              <small class=\"text-muted\">{{ record.user }}</small>\n            </div>\n            <div class=\"col-md-7\">\n              <div class=\"small text-truncate-wrap\">{{ record.text | translate }}</div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </li>\n  </ul>\n</div>\n"
        })
    ], AuditLogComponent);
    return AuditLogComponent;
}());
export { AuditLogComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXVkaXQtbG9nLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BjOHkvbmd4LWNvbXBvbmVudHMvIiwic291cmNlcyI6WyJjb3JlL2F1ZGl0LWxvZy9hdWRpdC1sb2cuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBVSxNQUFNLGVBQWUsQ0FBQztBQUN6RCxPQUFPLEVBQUUsWUFBWSxFQUFFLFlBQVksRUFBRSxXQUFXLEVBQUUsTUFBTSxhQUFhLENBQUM7QUFNdEU7SUFNRSwyQkFBb0IsS0FBbUI7UUFBbkIsVUFBSyxHQUFMLEtBQUssQ0FBYztJQUFHLENBQUM7SUFFckMsb0NBQVEsR0FBZDs7Ozs7OzZCQUNNLElBQUksQ0FBQyxNQUFNLEVBQVgsd0JBQVc7d0JBQ2IsS0FBQSxJQUFJLENBQUE7d0JBQVcscUJBQU0sSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUM7Z0NBQ25DLGNBQWMsRUFBRSxJQUFJO2dDQUNwQixNQUFNLEVBQUUsSUFBSSxDQUFDLE1BQU07NkJBQ3BCLENBQUMsRUFBQTs7d0JBSEYsR0FBSyxPQUFPLEdBQUcsU0FHYixDQUFDOzs7Ozs7S0FFTjs7Z0JBVDBCLFlBQVk7O0lBSnZDO1FBREMsS0FBSyxFQUFFO3FEQUNnQjtJQUZiLGlCQUFpQjtRQUo3QixTQUFTLENBQUM7WUFDVCxRQUFRLEVBQUUsZUFBZTtZQUN6Qiw4MkJBQXlDO1NBQzFDLENBQUM7T0FDVyxpQkFBaUIsQ0FnQjdCO0lBQUQsd0JBQUM7Q0FBQSxBQWhCRCxJQWdCQztTQWhCWSxpQkFBaUIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIElucHV0LCBPbkluaXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEF1ZGl0U2VydmljZSwgSUF1ZGl0UmVjb3JkLCBJUmVzdWx0TGlzdCB9IGZyb20gJ0BjOHkvY2xpZW50JztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnYzh5LWF1ZGl0LWxvZycsXG4gIHRlbXBsYXRlVXJsOiAnLi9hdWRpdC1sb2cuY29tcG9uZW50Lmh0bWwnXG59KVxuZXhwb3J0IGNsYXNzIEF1ZGl0TG9nQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcbiAgQElucHV0KClcbiAgc291cmNlOiBzdHJpbmcgfCBudW1iZXI7XG5cbiAgcmVjb3JkczogSVJlc3VsdExpc3Q8SUF1ZGl0UmVjb3JkPjtcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGF1ZGl0OiBBdWRpdFNlcnZpY2UpIHt9XG5cbiAgYXN5bmMgbmdPbkluaXQoKSB7XG4gICAgaWYgKHRoaXMuc291cmNlKSB7XG4gICAgICB0aGlzLnJlY29yZHMgPSBhd2FpdCB0aGlzLmF1ZGl0Lmxpc3Qoe1xuICAgICAgICB3aXRoVG90YWxQYWdlczogdHJ1ZSxcbiAgICAgICAgc291cmNlOiB0aGlzLnNvdXJjZVxuICAgICAgfSk7XG4gICAgfVxuICB9XG59XG4iXX0=