import * as tslib_1 from "tslib";
import { Component, Input, Output, EventEmitter } from '@angular/core';
import { AddressSpaceNode, AddressSpaceService, NodeNavigationData } from './address-space.service';
import { omit } from 'lodash-es';
var OpcuaAddressSpaceDetailComponent = /** @class */ (function () {
    function OpcuaAddressSpaceDetailComponent(addressSpaceService) {
        this.addressSpaceService = addressSpaceService;
        this.selected = false;
        this.showDetails = false;
        this.toggleAttrDetail = new EventEmitter();
    }
    Object.defineProperty(OpcuaAddressSpaceDetailComponent.prototype, "node", {
        set: function (n) {
            this._node = n;
            if (n) {
                this.setNodeData(n);
            }
            else {
                // remove details from current view
                this.showDetails = false;
            }
        },
        enumerable: true,
        configurable: true
    });
    OpcuaAddressSpaceDetailComponent.prototype.setNodeData = function (nodeData) {
        this.showDetails = true;
        var attributes = nodeData.attributes, references = nodeData.references;
        this.nodeDataRef = references;
        var omitList = [
            'attributes',
            'references',
            'children',
            'currentlyLoadingChildren',
            'expanded',
            'browsePath',
            'relativePath',
            'parentNode'
        ];
        this.nodeDataAttr = Object.assign({}, attributes, omit(nodeData, omitList));
    };
    OpcuaAddressSpaceDetailComponent.prototype.toggleDetail = function (node) {
        this.showDetails = !this.showDetails;
        this.toggleAttrDetail.emit(node);
    };
    OpcuaAddressSpaceDetailComponent.prototype.navigateTo = function (ancestors) {
        var nodeNavData = {
            node: this._node,
            selectedAncestorIds: ancestors
        };
        this.toggleDetail(this._node);
        this.addressSpaceService.triggerNodeToOpen(nodeNavData);
    };
    OpcuaAddressSpaceDetailComponent.ctorParameters = function () { return [
        { type: AddressSpaceService }
    ]; };
    tslib_1.__decorate([
        Input()
    ], OpcuaAddressSpaceDetailComponent.prototype, "node", null);
    tslib_1.__decorate([
        Output()
    ], OpcuaAddressSpaceDetailComponent.prototype, "toggleAttrDetail", void 0);
    OpcuaAddressSpaceDetailComponent = tslib_1.__decorate([
        Component({
            selector: 'opcua-address-space-detail',
            template: "<div\n  class=\"card flex-scroll bottom-m-xs split-row-2 animated fast\"\n  style=\"pointer-events: all\"\n  [ngClass]=\"{ fadeInRightBig: showDetails, fadeOutRightBig: !showDetails }\"\n>\n  <div class=\"card-header separator \">\n    <h4>{{ 'Attributes' | translate }}</h4>\n    <button\n      class=\"close flex-item-right visible-sm visible-xs\"\n      title=\"{{ 'Close' | translate }}\"\n      (click)=\"toggleDetail(nodeDataAttr)\"\n    >\n      &times;\n    </button>\n  </div>\n  <div class=\"card-inner-scroll\">\n    <div class=\"card-block\">\n      <table class=\"table table-striped table-condensed\">\n        <colgroup>\n          <col width=\"50%\" />\n          <col width=\"50%\" />\n        </colgroup>\n        <thead>\n          <tr>\n            <th>{{ 'Attribute' | translate }}</th>\n            <th>{{ 'Value' | translate }}</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr *ngFor=\"let item of nodeDataAttr | keyvalue\">\n            <td>{{ item.key }}</td>\n            <td *ngIf=\"item.key === 'absolutePaths'\" class=\"text-break-word\">\n              {{ item.value | json }}\n            </td>\n            <td *ngIf=\"item.key === 'ancestorNodeIds'\" class=\"text-break-word\">\n              <a *ngFor=\"let value of item.value\" (click)=\"navigateTo(value)\">\n                {{ value | json }}</a\n              >\n            </td>\n            <td *ngIf=\"item.key !== 'absolutePaths' && item.key !== 'ancestorNodeIds'\">\n              {{ item.value }}\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n</div>\n<div\n  class=\"card flex-scroll split-row-2 animated fast\"\n  style=\"pointer-events: all\"\n  [ngClass]=\"{ fadeInRightBig: showDetails, fadeOutRightBig: !showDetails }\"\n>\n  <div class=\"card-header separator\">\n    <h4>{{ 'References' | translate }}</h4>\n  </div>\n  <div class=\"card-inner-scroll\">\n    <div class=\"card-block\">\n      <table class=\"table table-striped table-condensed\">\n        <colgroup>\n          <col width=\"50%\" />\n          <col width=\"50%\" />\n        </colgroup>\n        <thead>\n          <tr>\n            <th>{{ 'Attribute' | translate }}</th>\n            <th>{{ 'Value' | translate }}</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr *ngFor=\"let item of nodeDataRef\">\n            <td>{{ item.referenceLabel }}</td>\n            <td class=\"text-break-word\">{{ item.targetLabel }}</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n</div>\n"
        })
    ], OpcuaAddressSpaceDetailComponent);
    return OpcuaAddressSpaceDetailComponent;
}());
export { OpcuaAddressSpaceDetailComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib3BjdWEtYWRkcmVzcy1zcGFjZS1kZXRhaWwuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGM4eS9uZ3gtY29tcG9uZW50cy9wcm90b2NvbC1vcGN1YS8iLCJzb3VyY2VzIjpbIm9wY3VhLWFkZHJlc3Mtc3BhY2UtZGV0YWlsLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsT0FBTyxFQUFFLFNBQVMsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLFlBQVksRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUN2RSxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsbUJBQW1CLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSx5QkFBeUIsQ0FBQztBQUNwRyxPQUFPLEVBQUUsSUFBSSxFQUFFLE1BQU0sV0FBVyxDQUFDO0FBTWpDO0lBbUJFLDBDQUFvQixtQkFBd0M7UUFBeEMsd0JBQW1CLEdBQW5CLG1CQUFtQixDQUFxQjtRQVA1RCxhQUFRLEdBQVksS0FBSyxDQUFDO1FBQzFCLGdCQUFXLEdBQVksS0FBSyxDQUFDO1FBRW5CLHFCQUFnQixHQUFtQyxJQUFJLFlBQVksRUFBb0IsQ0FBQztJQUluQyxDQUFDO0lBbEJ2RCxzQkFBSSxrREFBSTthQUFSLFVBQVMsQ0FBQztZQUNqQixJQUFJLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQztZQUNmLElBQUksQ0FBQyxFQUFFO2dCQUNMLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUM7YUFDckI7aUJBQU07Z0JBQ0wsbUNBQW1DO2dCQUNuQyxJQUFJLENBQUMsV0FBVyxHQUFHLEtBQUssQ0FBQzthQUMxQjtRQUNILENBQUM7OztPQUFBO0lBV0Qsc0RBQVcsR0FBWCxVQUFZLFFBQVE7UUFDbEIsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUM7UUFDaEIsSUFBQSxnQ0FBVSxFQUFFLGdDQUFVLENBQWM7UUFDNUMsSUFBSSxDQUFDLFdBQVcsR0FBRyxVQUFVLENBQUM7UUFDOUIsSUFBTSxRQUFRLEdBQUc7WUFDZixZQUFZO1lBQ1osWUFBWTtZQUNaLFVBQVU7WUFDViwwQkFBMEI7WUFDMUIsVUFBVTtZQUNWLFlBQVk7WUFDWixjQUFjO1lBQ2QsWUFBWTtTQUNiLENBQUM7UUFDRixJQUFJLENBQUMsWUFBWSxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLFVBQVUsRUFBRSxJQUFJLENBQUMsUUFBUSxFQUFFLFFBQVEsQ0FBQyxDQUFDLENBQUM7SUFDOUUsQ0FBQztJQUVELHVEQUFZLEdBQVosVUFBYSxJQUFJO1FBQ2YsSUFBSSxDQUFDLFdBQVcsR0FBRyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUM7UUFDckMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUNuQyxDQUFDO0lBRUQscURBQVUsR0FBVixVQUFXLFNBQW1CO1FBQzVCLElBQU0sV0FBVyxHQUF1QjtZQUN0QyxJQUFJLEVBQUUsSUFBSSxDQUFDLEtBQUs7WUFDaEIsbUJBQW1CLEVBQUUsU0FBUztTQUMvQixDQUFDO1FBRUYsSUFBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDOUIsSUFBSSxDQUFDLG1CQUFtQixDQUFDLGlCQUFpQixDQUFDLFdBQVcsQ0FBQyxDQUFDO0lBQzFELENBQUM7O2dCQS9Cd0MsbUJBQW1COztJQWxCbkQ7UUFBUixLQUFLLEVBQUU7Z0VBUVA7SUFNUztRQUFULE1BQU0sRUFBRTs4RUFBeUY7SUFmdkYsZ0NBQWdDO1FBSjVDLFNBQVMsQ0FBQztZQUNULFFBQVEsRUFBRSw0QkFBNEI7WUFDdEMsZ2hGQUEwRDtTQUMzRCxDQUFDO09BQ1csZ0NBQWdDLENBbUQ1QztJQUFELHVDQUFDO0NBQUEsQUFuREQsSUFtREM7U0FuRFksZ0NBQWdDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBJbnB1dCwgT3V0cHV0LCBFdmVudEVtaXR0ZXIgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEFkZHJlc3NTcGFjZU5vZGUsIEFkZHJlc3NTcGFjZVNlcnZpY2UsIE5vZGVOYXZpZ2F0aW9uRGF0YSB9IGZyb20gJy4vYWRkcmVzcy1zcGFjZS5zZXJ2aWNlJztcbmltcG9ydCB7IG9taXQgfSBmcm9tICdsb2Rhc2gtZXMnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdvcGN1YS1hZGRyZXNzLXNwYWNlLWRldGFpbCcsXG4gIHRlbXBsYXRlVXJsOiAnLi9vcGN1YS1hZGRyZXNzLXNwYWNlLWRldGFpbC5jb21wb25lbnQuaHRtbCdcbn0pXG5leHBvcnQgY2xhc3MgT3BjdWFBZGRyZXNzU3BhY2VEZXRhaWxDb21wb25lbnQge1xuICBASW5wdXQoKSBzZXQgbm9kZShuKSB7XG4gICAgdGhpcy5fbm9kZSA9IG47XG4gICAgaWYgKG4pIHtcbiAgICAgIHRoaXMuc2V0Tm9kZURhdGEobik7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIHJlbW92ZSBkZXRhaWxzIGZyb20gY3VycmVudCB2aWV3XG4gICAgICB0aGlzLnNob3dEZXRhaWxzID0gZmFsc2U7XG4gICAgfVxuICB9XG4gIG5vZGVEYXRhQXR0cjogTWFwPHN0cmluZywgc3RyaW5nPjtcbiAgbm9kZURhdGFSZWY6IG9iamVjdFtdO1xuICBzZWxlY3RlZDogYm9vbGVhbiA9IGZhbHNlO1xuICBzaG93RGV0YWlsczogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIEBPdXRwdXQoKSB0b2dnbGVBdHRyRGV0YWlsOiBFdmVudEVtaXR0ZXI8QWRkcmVzc1NwYWNlTm9kZT4gPSBuZXcgRXZlbnRFbWl0dGVyPEFkZHJlc3NTcGFjZU5vZGU+KCk7XG5cbiAgcHJpdmF0ZSBfbm9kZTogQWRkcmVzc1NwYWNlTm9kZTtcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGFkZHJlc3NTcGFjZVNlcnZpY2U6IEFkZHJlc3NTcGFjZVNlcnZpY2UpIHt9XG4gIHNldE5vZGVEYXRhKG5vZGVEYXRhKSB7XG4gICAgdGhpcy5zaG93RGV0YWlscyA9IHRydWU7XG4gICAgY29uc3QgeyBhdHRyaWJ1dGVzLCByZWZlcmVuY2VzIH0gPSBub2RlRGF0YTtcbiAgICB0aGlzLm5vZGVEYXRhUmVmID0gcmVmZXJlbmNlcztcbiAgICBjb25zdCBvbWl0TGlzdCA9IFtcbiAgICAgICdhdHRyaWJ1dGVzJyxcbiAgICAgICdyZWZlcmVuY2VzJyxcbiAgICAgICdjaGlsZHJlbicsXG4gICAgICAnY3VycmVudGx5TG9hZGluZ0NoaWxkcmVuJyxcbiAgICAgICdleHBhbmRlZCcsXG4gICAgICAnYnJvd3NlUGF0aCcsXG4gICAgICAncmVsYXRpdmVQYXRoJyxcbiAgICAgICdwYXJlbnROb2RlJ1xuICAgIF07XG4gICAgdGhpcy5ub2RlRGF0YUF0dHIgPSBPYmplY3QuYXNzaWduKHt9LCBhdHRyaWJ1dGVzLCBvbWl0KG5vZGVEYXRhLCBvbWl0TGlzdCkpO1xuICB9XG5cbiAgdG9nZ2xlRGV0YWlsKG5vZGUpIHtcbiAgICB0aGlzLnNob3dEZXRhaWxzID0gIXRoaXMuc2hvd0RldGFpbHM7XG4gICAgdGhpcy50b2dnbGVBdHRyRGV0YWlsLmVtaXQobm9kZSk7XG4gIH1cblxuICBuYXZpZ2F0ZVRvKGFuY2VzdG9yczogc3RyaW5nW10pIHtcbiAgICBjb25zdCBub2RlTmF2RGF0YTogTm9kZU5hdmlnYXRpb25EYXRhID0ge1xuICAgICAgbm9kZTogdGhpcy5fbm9kZSxcbiAgICAgIHNlbGVjdGVkQW5jZXN0b3JJZHM6IGFuY2VzdG9yc1xuICAgIH07XG5cbiAgICB0aGlzLnRvZ2dsZURldGFpbCh0aGlzLl9ub2RlKTtcbiAgICB0aGlzLmFkZHJlc3NTcGFjZVNlcnZpY2UudHJpZ2dlck5vZGVUb09wZW4obm9kZU5hdkRhdGEpO1xuICB9XG59XG4iXX0=