<div class="row"
  ng-controller="connectivitySettingsCtrl"
>
  <div class="col-xs-12 col-md-8">
    <div class="card card--fullpage">
      <form name="connectivitySettingsForm" novalidate>
        <div class="card-header separator">
          <h4 class="card-title">
            {{ 'Settings' | translate }}
          </h4>
        </div>
        <div class="inner-scroll">
          <div class="card-block">
            <p class="bottom-m">{{ tooltipText | translate }}</p>

            <p ng-if="credentialsSaved && !replacingCredentials" translate>
              Credentials already provided.<br />
              Click "Replace credentials" below to overwrite them.
            </p>
            <p ng-if="!credentialsSaved" translate>
              There are no credentials provided yet.<br />
              Please provide some.
            </p>

            <div ng-if="!credentialsSaved || replacingCredentials">
              <div class="row">
                <div class="col-md-6">
                  <div class="form-group">
                    <label for="provider" translate>
                      Provider
                    </label>
                    <div class="c8y-select-wrapper">
                      <select class="form-control"
                        id="provider"
                        name="provider"
                        ng-model="connectivitySettings.providerName"
                        ng-change="onProviderChange()"
                        ng-options="provider.name as (provider.label | translate) for provider in supportedProviders | orderBy:'label'"
                        required
                      >
                      </select>
                    </div>
                  </div>
                </div>
              </div>

              <div class="form-group"
                ng-if="formSettings.url"
              >
                <label class="control-label" for="url" translate >
                  URL
                </label>
                <input class="form-control"
                  type="text"
                  placeholder="{{ 'e.g.' | translate }} http://www.example.com/"
                  required
                  name="url"
                  id="url"
                  ng-model="connectivitySettings.url"
                  c8y-autocomplete="off"
                />
                <c8y-error-feedback field="connectivitySettingsForm.url"></c8y-error-feedback>
              </div>

              <div class="form-group"
                ng-if="formSettings['credentials.licenseKey']"
              >
                <label class="control-label"
                  for="licenseKey"
                  translate
                >
                  License key
                </label>
                <input class="form-control"
                  type="text"
                  placeholder="{{ 'e.g.' | translate }} 12345678-9abc-def1-2345-6789abcdef01"
                  required
                  name="licenseKey"
                  id="licenseKey"
                  ng-model="connectivitySettings['credentials.licenseKey']"
                  c8y-autocomplete="off"
                />
                <c8y-error-feedback field="connectivitySettingsForm.licenseKey"></c8y-error-feedback>
              </div>

              <div class="row">
                <div class="col-md-6" ng-if="formSettings['credentials.username']">
                  <div class="form-group">
                    <label class="control-label"
                      for="username"
                      translate
                    >
                      Username
                    </label>

                    <input class="form-control"
                      type="text"
                      placeholder="{{ 'e.g. joe`LOCALIZE`' | translate }}"
                      required
                      name="username"
                      id="username"
                      ng-model="connectivitySettings['credentials.username']"
                      c8y-autocomplete="off"
                    />
                    <c8y-error-feedback field="connectivitySettingsForm.username"></c8y-error-feedback>
                  </div>
                </div>
                <div class="col-md-6"
                  ng-if="formSettings['credentials.password']"
                >
                  <div class="form-group">
                    <label class="control-label"
                      for="password"
                      translate
                    >
                      Password
                    </label>
                    <input class="form-control"
                      type="password"
                      name="password"
                      id="password"
                      ng-model="connectivitySettings['credentials.password']"
                      value="********"
                      required
                      c8y-autocomplete="off"
                    />
                    <c8y-error-feedback field="connectivitySettingsForm.password"></c8y-error-feedback>
                  </div>
                </div>
              </div>

              <div class="row">
                <div class="col-md-6"
                  ng-if="formSettings['Client_ID']"
                >
                  <div class="form-group">
                    <label class="control-label"
                      for="clientID"
                      translate
                    >
                      Client ID
                    </label>

                    <input class="form-control"
                      type="text"
                      required
                      name="clientID"
                      id="clientID"
                      ng-model="connectivitySettings['Client_ID']"
                    />
                    <c8y-error-feedback field="connectivitySettingsForm.clientID"></c8y-error-feedback>
                  </div>
                </div>
                <div class="col-md-6"
                  ng-if="formSettings['credentials.Client_Secret']"
                >
                  <div class="form-group">
                    <label class="control-label" for="clientSecret" translate>
                      Client secret
                    </label>
                    <input
                      class="form-control"
                      name="clientSecret"
                      id="clientSecret"
                      ng-model="connectivitySettings['credentials.Client_Secret']"
                      required
                    />
                    <c8y-error-feedback
                      field="connectivitySettingsForm.clientSecret"
                    ></c8y-error-feedback>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="card-footer separator">
          <button class="btn btn-primary"
            title="{{ 'Replace credentials' | translate }}"
            ng-if="credentialsSaved && !replacingCredentials"
            ng-click="startReplacingCredentials()"
          >
            {{ 'Replace credentials' | translate }}
          </button>
          <button class="btn btn-primary"
            title="{{ 'Save credentials' | translate }}"
            ng-if="!credentialsSaved || replacingCredentials"
            ng-click="updateCredentials(connectivitySettings, connectivitySettingsForm)"
            ng-disabled="connectivitySettingsForm.$invalid || connectivitySettingsForm.$pristine"
          >
            {{ 'Save credentials' | translate }}
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
