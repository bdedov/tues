"use strict";!function(){function e(i,n,s,r,c){var e=c("In order to see the 'Connectivity' tab in device details, the user needs to have 'Read' permission for 'Connectivity'. To change SIM card status and send text messages, the user needs to have 'Admin' permission for 'Connectivity'."),o={jwireless:{url:!0,"credentials.licenseKey":!0,"credentials.username":!0,"credentials.password":!0},comarch:{url:!0,"credentials.licenseKey":!1,"credentials.username":!0,"credentials.password":!0},ericsson:{url:!0,"credentials.licenseKey":!1,"credentials.username":!0,"credentials.password":!0},"1nce":{"credentials.Client_Secret":!0,Client_ID:!0}};function a(){var e=c("Failed to connect using given credentials.");return r.danger(e)}function t(e){i.connectivitySettings=e,i.credentialsSaved=!_.isEmpty(e)}function d(){if(i.connectivitySettings.providerName){var e=_.get(i.connectivitySettings,"providerName");i.formSettings=_.get(o,e)}}i.updateCredentials=function(e,t){return function(e){return s.update(e)}(function(n){var e=_.get(o,i.connectivitySettings.providerName);return _.isUndefined(e)||_.forEach(e,function(e,t){e||(n[t]=void 0)}),n}(e)).then(n.ping).then(function(e){e&&200===e.status?(function(){var e=c("Connectivity credentials updated.");r.success(e)}(),t.$setPristine()):a()},function(){a()})},i.connectivitySettings={},i.tooltipText=e,i.supportedProviders=[],i.formSettings={},i.onProviderChange=d,i.startReplacingCredentials=function(){i.replacingCredentials=!0,_.unset(i.connectivitySettings,["credentials.licenseKey"]),_.unset(i.connectivitySettings,["credentials.username"]),_.unset(i.connectivitySettings,["credentials.password"]),_.unset(i.connectivitySettings,["credentials.Client_Secret"]),_.unset(i.connectivitySettings,["Client_ID"])},s.detail().then(t).then(d),n.getAvailableProvidersList().then(function(e){var t=e.providers;i.supportedProviders=t})}e.$inject=["$scope","c8yConnectivity","c8yConnectivitySettings","c8yAlert","gettext"],angular.module("c8y.parts.connectivitySettings").controller("connectivitySettingsCtrl",e)}();