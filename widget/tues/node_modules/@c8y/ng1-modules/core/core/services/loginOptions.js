"use strict";!function(){function e(r,i,n,e){var o="tenant/loginOptions",u={headers:Object.assign({"content-type":"application/json",UseXBasic:!0})};return{loginOptions:i.createEnum([{name:"BASIC",value:"basic"},{name:"OAUTH2",value:"oauth2"},{name:"OAUTH2_INTERNAL",value:"oauth2_internal"}]),templateTypes:i.createEnum([{name:"CUSTOM",value:"CUSTOM",label:e("Custom"),componentName:"c8ySsoCustomTemplate"},{name:"AZURE",value:"AZURE",label:e("Azure AD"),componentName:"c8ySsoAadTemplate"}]),certificateTypes:i.createEnum([{name:"CUSTOM",value:"CUSTOM",label:e("Custom"),signatureVerificationConfigFragment:"manual"},{name:"AZURE",value:"AZURE",label:e("Azure AD"),signatureVerificationConfigFragment:"aad"},{name:"ADFS",value:"ADFS",label:e("ADFS manifest"),signatureVerificationConfigFragment:"adfsManifest"},{name:"JWKS",value:"JWKS",label:e("JWKS"),signatureVerificationConfigFragment:"jwks"}]),algorithmTypes:i.createEnum([{name:"PCKS",value:"PCKS",label:e("X.509 certificate (PEM format)")},{name:"RSA",value:"RSA",label:e("RSA public key (X.509 Subject Public Key Info)")}]),defaultConfiguration:{authorizationRequest:{body:"",headers:{},method:"GET",operation:"REDIRECT",requestParams:{response_type:"token",client_id:"${clientId}",redirect_uri:"${redirectUri}",scope:""}},tokenRequest:{body:"grant_type=authorization_code&code=${code}&redirect_uri=${redirectUri}&client_id=${clientId}",headers:{},method:"POST",operation:"EXECUTE",requestParams:{response_type:"code",client_id:"${clientId}",redirect_uri:"${redirectUri}",scope:""}},refreshRequest:{body:"grant_type=refresh_token&refresh_token=${refreshIoken}&client_id=${clientId}",headers:{Authorization:""},method:"POST",operation:"EXECUTE",requestParams:{response_type:"refresh ",client_id:"${clientId}"}},logoutRequest:{headers:{},method:"POST",operation:"REDIRECT",requestParams:{}},type:"oauth2",grantType:"AUTHORIZATION_CODE",onNewUser:{dynamicMapping:{mappings:[]}},userIdConfig:{useConstantValue:!0},signatureVerificationConfig:{manual:{certIdFromField:!1}}},operationTypes:i.createEnum([{name:"EXECUTE",value:"EXECUTE",label:e("Log out immediately")},{name:"REDIRECT",value:"REDIRECT",label:e("Redirect toâ€¦")}]),list:t,detail:function(e,t){var n=e.id||e,a=i.url("".concat(o,"/").concat(n));return r.get(a,t).then(i.getResData)},save:function(e){return e.id?function(e){var t=i.url("".concat(o,"/").concat(e.id)),n=e,a=_.cloneDeep(u);return r.put(t,n,c(a))}(e):function(e){var t=i.url(o),n=e,a=_.cloneDeep(u);return r.post(t,n,c(a))}(e)},remove:function(e){var t=i.url("".concat(o,"/").concat(e.id)),n=_.cloneDeep(u);return r.delete(t,n)},isSsoEnabled:function(){return t({}).then(function(e){return e.data.loginOptions.some(function(e){return"OAUTH2"===e.type&&"REMOTE"===e.userManagementSource})})},getStrongPasswordSettings:function(){return t({}).then(function(e){return e.data}).then(function(e){var t=e.loginOptions,n=t.find(function(e){var t=e.type;return"BASIC"===t});return _.pick(n,["enforceStrength","greenMinLength","strengthValidity"])})}};function c(e){var t=n.getCurrentUser();return t&&t.tenant&&!_.has(e,"params.tenantId")&&_.set(e,"params.tenantId",t.tenant),e}function t(e){var t=i.url(o);return r.get(t,Object.assign(c(e),u))}}e.$inject=["$http","c8yBase","c8yUser","gettext"],angular.module("c8y.core").factory("c8yLoginOptions",e)}();