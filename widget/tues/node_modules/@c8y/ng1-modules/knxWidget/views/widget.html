<div ng-controller="knxWidgetCtrl" class="knxWidget">
  <div ng-repeat="field in child.config.fields">
    <div ng-switch="field.type">
      <div ng-switch-when="number">
        <div class="row">
          <div class="col-lg-8">
            <div class="form-group">
              <label ng-class="{'notEditable': !canUpdateField(field)}">{{ field.name }}</label>
              <input
                type="number"
                class="form-control text-right"
                ng-class="{'input-border': canUpdateField(field)}"
                ng-disabled="!canUpdateField(field) || isFieldChangePending(field)"
                ng-model="field.value"
              />
              <span ng-show="field.unit" style="font-size:18px;">{{ field.unit }}</span>
              <button
                class="btn btn-primary"
                type="submit"
                ng-show="canUpdateField(field)"
                ng-click="updateRegisterField(field, field.value)"
                ng-disabled="isFieldChangePending(field)"
              >
                <span
                  title="{{ 'Set' | translate }}"
                  ng-hide="isFieldChangePending(field)"
                  translate
                  >Set</span
                >
                <span title="{{ 'Setting…' | translate }}" ng-show="isFieldChangePending(field)"
                  ><i c8y-icon="spinner" class="fa-spin"></i> <translate>Setting…</translate></span
                >
              </button>
            </div>
          </div>
        </div>
      </div>
      <div ng-switch-when="buttons">
        <div class="row">
          <div class="col-lg-8">
            <div class="form-group">
              <label ng-class="{'notEditable': !canUpdateField(field)}">{{ field.name }}</label>
              <div class="btn-group" style="margin-bottom: 10px;">
                <button
                  title="{{ button.label | translate }}"
                  type="button"
                  class="btn btn-default"
                  ng-repeat="button in field.buttons"
                  ng-click="updateCoilField(field, button.value)"
                  ng-class="{active: field.value === button.value}"
                  ng-disabled="!canUpdateField(field) || isFieldChangePending(field)"
                >
                  {{ button.label | translate }}
                </button>
                <button
                  type="button"
                  class="btn btn-default"
                  ng-show="isFieldChangePending(field)"
                  disabled
                >
                  <i c8y-icon="spinner" class="fa-spin"></i>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
