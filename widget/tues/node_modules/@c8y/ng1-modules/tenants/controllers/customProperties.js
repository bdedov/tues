"use strict";!function(){function e(i,e,r,s,t,n,a,o){var c=this,u=e.tenantId,h=t.another(t.paths.Tenants,{tenantId:u}),g="c8ySchema!!customProperties",l={notitle:!0};_.assign(c,{schema:{},form:[],save:function(e){return s.save(_.pick(c.tenant,["id","applications","customProperties"])).then(function(){a.success(o("Custom properties saved.")),e.$setPristine()})}}),i.all({rootProperty:h.list().then(function(e){return _.filter(e,{id:g})}),isGainsightKeyDefined:_.get(window,"C8Y_APP.gainsightKey")?i.resolve(!!window.C8Y_APP.gainsightKey):n.detailValue({category:"configuration",key:"system.gainsight.api.key"}).then(function(e){return!!e})}).then(function(e){var t=e.rootProperty,n=e.isGainsightKeyDefined;return function(e){return i.all({schema:h.getSchema(e),form:h.getForm(e,l),tenant:s.detail(u).then(r.getResData)})}(t).then(function(e){return{results:e,isGainsightKeyDefined:n}})}).then(function(e){var t=e.results,n=e.isGainsightKeyDefined;c.schema=n?t.schema:function(e){var t=_.cloneDeep(e);return _.unset(t,"properties.customProperties.properties.gainsightEnabled"),t}(t.schema),c.form=t.form,c.tenant=t.tenant})}e.$inject=["$q","$routeParams","c8yBase","c8yTenant","c8yPropertiesLibrary","c8ySettings","c8yAlert","gettext"],angular.module("c8y.tenants").controller("tenantCustomPropertiesCtrl",e)}();