"use strict";!function(){function e(i,t,a,e,r,n){i.groupsOptions={data:[],query:function(t){var r={results:[]};_.isUndefined(t.term)||(i.groupsOptions.data.forEach(function(e){(0===t.term.length||0<=e.name.toUpperCase().indexOf(t.term.toUpperCase()))&&r.results.push({id:e.id,text:e.name})}),t.callback(r))}},e.list().then(function(e){var t=e.data;i.groupsOptions.data=t.managedObjects;var r=i.groupsOptions.data;if(a.group){var n=r.filter(function(e){return parseInt(e.id,10)===parseInt(a.group,10)});n.length&&(i.groupToFilter={id:n[0].id,text:n[0].name})}}),i.$watch("groupToFilter",function(e){e&&e.id&&t.url("device?group=".concat(e.id))}),i.clear=function(){t.url("device")},i.search=function(){var e={externalId:i.externalId,type:i.type};r.getExternalId(e).then(function(e){t.url("device/".concat(e.data.managedObject.id))},function(){i.$emit("message",{type:"error",text:n("Device not found")})})},i.freeSearch=function(e){t.url("device?text=".concat(e))},a.eidType&&a.eid&&(i.externalId=a.eid,i.type=a.eidType,i.search()),a.text&&(i.searchString=a.text),a.text&&(i.hasFilters=!0)}e.$inject=["$scope","$location","$routeParams","c8yDeviceGroup","c8yIdentity","gettext"],angular.module("c8y.parts.deviceFilter").controller("deviceFilterVPCtrl",e)}();