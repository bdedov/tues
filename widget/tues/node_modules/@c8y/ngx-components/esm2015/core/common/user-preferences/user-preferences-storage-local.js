import { of } from 'rxjs';
export class UserPreferencesStorageLocal {
    constructor() {
        this.LOCAL_STORAGE_KEY = 'userPreferences';
        this.store = {};
        try {
            const jsonStore = window.localStorage.getItem(this.LOCAL_STORAGE_KEY);
            if (jsonStore) {
                this.store = JSON.parse(jsonStore) || {};
            }
        }
        catch (e) {
            // do nothing
        }
    }
    get(key) {
        return of(this.store[key]);
    }
    set(key, value) {
        this.store[key] = value;
        return this.saveJsonStore();
    }
    saveJsonStore() {
        return window.localStorage.setItem(this.LOCAL_STORAGE_KEY, JSON.stringify(this.store));
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXNlci1wcmVmZXJlbmNlcy1zdG9yYWdlLWxvY2FsLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGM4eS9uZ3gtY29tcG9uZW50cy8iLCJzb3VyY2VzIjpbImNvcmUvY29tbW9uL3VzZXItcHJlZmVyZW5jZXMvdXNlci1wcmVmZXJlbmNlcy1zdG9yYWdlLWxvY2FsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBYyxFQUFFLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFFdEMsTUFBTSxPQUFPLDJCQUEyQjtJQUd0QztRQUZRLHNCQUFpQixHQUFHLGlCQUFpQixDQUFDO1FBQ3RDLFVBQUssR0FBUSxFQUFFLENBQUM7UUFFdEIsSUFBSTtZQUNGLE1BQU0sU0FBUyxHQUFHLE1BQU0sQ0FBQyxZQUFZLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO1lBQ3RFLElBQUksU0FBUyxFQUFFO2dCQUNiLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsSUFBSSxFQUFFLENBQUM7YUFDMUM7U0FDRjtRQUFDLE9BQU8sQ0FBQyxFQUFFO1lBQ1YsYUFBYTtTQUNkO0lBQ0gsQ0FBQztJQUVELEdBQUcsQ0FBQyxHQUFHO1FBQ0wsT0FBTyxFQUFFLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0lBQzdCLENBQUM7SUFFRCxHQUFHLENBQUMsR0FBRyxFQUFFLEtBQUs7UUFDWixJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxHQUFHLEtBQUssQ0FBQztRQUN4QixPQUFPLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztJQUM5QixDQUFDO0lBRU8sYUFBYTtRQUNuQixPQUFPLE1BQU0sQ0FBQyxZQUFZLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxpQkFBaUIsRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO0lBQ3pGLENBQUM7Q0FDRiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE9ic2VydmFibGUsIG9mIH0gZnJvbSAncnhqcyc7XG5cbmV4cG9ydCBjbGFzcyBVc2VyUHJlZmVyZW5jZXNTdG9yYWdlTG9jYWwge1xuICBwcml2YXRlIExPQ0FMX1NUT1JBR0VfS0VZID0gJ3VzZXJQcmVmZXJlbmNlcyc7XG4gIHByaXZhdGUgc3RvcmU6IGFueSA9IHt9O1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QganNvblN0b3JlID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKHRoaXMuTE9DQUxfU1RPUkFHRV9LRVkpO1xuICAgICAgaWYgKGpzb25TdG9yZSkge1xuICAgICAgICB0aGlzLnN0b3JlID0gSlNPTi5wYXJzZShqc29uU3RvcmUpIHx8IHt9O1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIC8vIGRvIG5vdGhpbmdcbiAgICB9XG4gIH1cblxuICBnZXQoa2V5KSB7XG4gICAgcmV0dXJuIG9mKHRoaXMuc3RvcmVba2V5XSk7XG4gIH1cblxuICBzZXQoa2V5LCB2YWx1ZSkge1xuICAgIHRoaXMuc3RvcmVba2V5XSA9IHZhbHVlO1xuICAgIHJldHVybiB0aGlzLnNhdmVKc29uU3RvcmUoKTtcbiAgfVxuXG4gIHByaXZhdGUgc2F2ZUpzb25TdG9yZSgpIHtcbiAgICByZXR1cm4gd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKHRoaXMuTE9DQUxfU1RPUkFHRV9LRVksIEpTT04uc3RyaW5naWZ5KHRoaXMuc3RvcmUpKTtcbiAgfVxufVxuIl19