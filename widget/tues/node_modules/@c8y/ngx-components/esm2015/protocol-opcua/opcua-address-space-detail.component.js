import * as tslib_1 from "tslib";
import { Component, Input, Output, EventEmitter } from '@angular/core';
import { AddressSpaceNode, AddressSpaceService, NodeNavigationData } from './address-space.service';
import { omit } from 'lodash-es';
let OpcuaAddressSpaceDetailComponent = class OpcuaAddressSpaceDetailComponent {
    constructor(addressSpaceService) {
        this.addressSpaceService = addressSpaceService;
        this.selected = false;
        this.showDetails = false;
        this.toggleAttrDetail = new EventEmitter();
    }
    set node(n) {
        this._node = n;
        if (n) {
            this.setNodeData(n);
        }
        else {
            // remove details from current view
            this.showDetails = false;
        }
    }
    setNodeData(nodeData) {
        this.showDetails = true;
        const { attributes, references } = nodeData;
        this.nodeDataRef = references;
        const omitList = [
            'attributes',
            'references',
            'children',
            'currentlyLoadingChildren',
            'expanded',
            'browsePath',
            'relativePath',
            'parentNode'
        ];
        this.nodeDataAttr = Object.assign({}, attributes, omit(nodeData, omitList));
    }
    toggleDetail(node) {
        this.showDetails = !this.showDetails;
        this.toggleAttrDetail.emit(node);
    }
    navigateTo(ancestors) {
        const nodeNavData = {
            node: this._node,
            selectedAncestorIds: ancestors
        };
        this.toggleDetail(this._node);
        this.addressSpaceService.triggerNodeToOpen(nodeNavData);
    }
};
OpcuaAddressSpaceDetailComponent.ctorParameters = () => [
    { type: AddressSpaceService }
];
tslib_1.__decorate([
    Input()
], OpcuaAddressSpaceDetailComponent.prototype, "node", null);
tslib_1.__decorate([
    Output()
], OpcuaAddressSpaceDetailComponent.prototype, "toggleAttrDetail", void 0);
OpcuaAddressSpaceDetailComponent = tslib_1.__decorate([
    Component({
        selector: 'opcua-address-space-detail',
        template: "<div\n  class=\"card flex-scroll bottom-m-xs split-row-2 animated fast\"\n  style=\"pointer-events: all\"\n  [ngClass]=\"{ fadeInRightBig: showDetails, fadeOutRightBig: !showDetails }\"\n>\n  <div class=\"card-header separator \">\n    <h4>{{ 'Attributes' | translate }}</h4>\n    <button\n      class=\"close flex-item-right visible-sm visible-xs\"\n      title=\"{{ 'Close' | translate }}\"\n      (click)=\"toggleDetail(nodeDataAttr)\"\n    >\n      &times;\n    </button>\n  </div>\n  <div class=\"card-inner-scroll\">\n    <div class=\"card-block\">\n      <table class=\"table table-striped table-condensed\">\n        <colgroup>\n          <col width=\"50%\" />\n          <col width=\"50%\" />\n        </colgroup>\n        <thead>\n          <tr>\n            <th>{{ 'Attribute' | translate }}</th>\n            <th>{{ 'Value' | translate }}</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr *ngFor=\"let item of nodeDataAttr | keyvalue\">\n            <td>{{ item.key }}</td>\n            <td *ngIf=\"item.key === 'absolutePaths'\" class=\"text-break-word\">\n              {{ item.value | json }}\n            </td>\n            <td *ngIf=\"item.key === 'ancestorNodeIds'\" class=\"text-break-word\">\n              <a *ngFor=\"let value of item.value\" (click)=\"navigateTo(value)\">\n                {{ value | json }}</a\n              >\n            </td>\n            <td *ngIf=\"item.key !== 'absolutePaths' && item.key !== 'ancestorNodeIds'\">\n              {{ item.value }}\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n</div>\n<div\n  class=\"card flex-scroll split-row-2 animated fast\"\n  style=\"pointer-events: all\"\n  [ngClass]=\"{ fadeInRightBig: showDetails, fadeOutRightBig: !showDetails }\"\n>\n  <div class=\"card-header separator\">\n    <h4>{{ 'References' | translate }}</h4>\n  </div>\n  <div class=\"card-inner-scroll\">\n    <div class=\"card-block\">\n      <table class=\"table table-striped table-condensed\">\n        <colgroup>\n          <col width=\"50%\" />\n          <col width=\"50%\" />\n        </colgroup>\n        <thead>\n          <tr>\n            <th>{{ 'Attribute' | translate }}</th>\n            <th>{{ 'Value' | translate }}</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr *ngFor=\"let item of nodeDataRef\">\n            <td>{{ item.referenceLabel }}</td>\n            <td class=\"text-break-word\">{{ item.targetLabel }}</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n</div>\n"
    })
], OpcuaAddressSpaceDetailComponent);
export { OpcuaAddressSpaceDetailComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib3BjdWEtYWRkcmVzcy1zcGFjZS1kZXRhaWwuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGM4eS9uZ3gtY29tcG9uZW50cy9wcm90b2NvbC1vcGN1YS8iLCJzb3VyY2VzIjpbIm9wY3VhLWFkZHJlc3Mtc3BhY2UtZGV0YWlsLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsT0FBTyxFQUFFLFNBQVMsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLFlBQVksRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUN2RSxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsbUJBQW1CLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSx5QkFBeUIsQ0FBQztBQUNwRyxPQUFPLEVBQUUsSUFBSSxFQUFFLE1BQU0sV0FBVyxDQUFDO0FBTWpDLElBQWEsZ0NBQWdDLEdBQTdDLE1BQWEsZ0NBQWdDO0lBbUIzQyxZQUFvQixtQkFBd0M7UUFBeEMsd0JBQW1CLEdBQW5CLG1CQUFtQixDQUFxQjtRQVA1RCxhQUFRLEdBQVksS0FBSyxDQUFDO1FBQzFCLGdCQUFXLEdBQVksS0FBSyxDQUFDO1FBRW5CLHFCQUFnQixHQUFtQyxJQUFJLFlBQVksRUFBb0IsQ0FBQztJQUluQyxDQUFDO0lBbEJ2RCxJQUFJLElBQUksQ0FBQyxDQUFDO1FBQ2pCLElBQUksQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDO1FBQ2YsSUFBSSxDQUFDLEVBQUU7WUFDTCxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQ3JCO2FBQU07WUFDTCxtQ0FBbUM7WUFDbkMsSUFBSSxDQUFDLFdBQVcsR0FBRyxLQUFLLENBQUM7U0FDMUI7SUFDSCxDQUFDO0lBV0QsV0FBVyxDQUFDLFFBQVE7UUFDbEIsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUM7UUFDeEIsTUFBTSxFQUFFLFVBQVUsRUFBRSxVQUFVLEVBQUUsR0FBRyxRQUFRLENBQUM7UUFDNUMsSUFBSSxDQUFDLFdBQVcsR0FBRyxVQUFVLENBQUM7UUFDOUIsTUFBTSxRQUFRLEdBQUc7WUFDZixZQUFZO1lBQ1osWUFBWTtZQUNaLFVBQVU7WUFDViwwQkFBMEI7WUFDMUIsVUFBVTtZQUNWLFlBQVk7WUFDWixjQUFjO1lBQ2QsWUFBWTtTQUNiLENBQUM7UUFDRixJQUFJLENBQUMsWUFBWSxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLFVBQVUsRUFBRSxJQUFJLENBQUMsUUFBUSxFQUFFLFFBQVEsQ0FBQyxDQUFDLENBQUM7SUFDOUUsQ0FBQztJQUVELFlBQVksQ0FBQyxJQUFJO1FBQ2YsSUFBSSxDQUFDLFdBQVcsR0FBRyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUM7UUFDckMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUNuQyxDQUFDO0lBRUQsVUFBVSxDQUFDLFNBQW1CO1FBQzVCLE1BQU0sV0FBVyxHQUF1QjtZQUN0QyxJQUFJLEVBQUUsSUFBSSxDQUFDLEtBQUs7WUFDaEIsbUJBQW1CLEVBQUUsU0FBUztTQUMvQixDQUFDO1FBRUYsSUFBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDOUIsSUFBSSxDQUFDLG1CQUFtQixDQUFDLGlCQUFpQixDQUFDLFdBQVcsQ0FBQyxDQUFDO0lBQzFELENBQUM7Q0FDRixDQUFBOztZQWhDMEMsbUJBQW1COztBQWxCbkQ7SUFBUixLQUFLLEVBQUU7NERBUVA7QUFNUztJQUFULE1BQU0sRUFBRTswRUFBeUY7QUFmdkYsZ0NBQWdDO0lBSjVDLFNBQVMsQ0FBQztRQUNULFFBQVEsRUFBRSw0QkFBNEI7UUFDdEMsZ2hGQUEwRDtLQUMzRCxDQUFDO0dBQ1csZ0NBQWdDLENBbUQ1QztTQW5EWSxnQ0FBZ0MiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIElucHV0LCBPdXRwdXQsIEV2ZW50RW1pdHRlciB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQWRkcmVzc1NwYWNlTm9kZSwgQWRkcmVzc1NwYWNlU2VydmljZSwgTm9kZU5hdmlnYXRpb25EYXRhIH0gZnJvbSAnLi9hZGRyZXNzLXNwYWNlLnNlcnZpY2UnO1xuaW1wb3J0IHsgb21pdCB9IGZyb20gJ2xvZGFzaC1lcyc7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ29wY3VhLWFkZHJlc3Mtc3BhY2UtZGV0YWlsJyxcbiAgdGVtcGxhdGVVcmw6ICcuL29wY3VhLWFkZHJlc3Mtc3BhY2UtZGV0YWlsLmNvbXBvbmVudC5odG1sJ1xufSlcbmV4cG9ydCBjbGFzcyBPcGN1YUFkZHJlc3NTcGFjZURldGFpbENvbXBvbmVudCB7XG4gIEBJbnB1dCgpIHNldCBub2RlKG4pIHtcbiAgICB0aGlzLl9ub2RlID0gbjtcbiAgICBpZiAobikge1xuICAgICAgdGhpcy5zZXROb2RlRGF0YShuKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gcmVtb3ZlIGRldGFpbHMgZnJvbSBjdXJyZW50IHZpZXdcbiAgICAgIHRoaXMuc2hvd0RldGFpbHMgPSBmYWxzZTtcbiAgICB9XG4gIH1cbiAgbm9kZURhdGFBdHRyOiBNYXA8c3RyaW5nLCBzdHJpbmc+O1xuICBub2RlRGF0YVJlZjogb2JqZWN0W107XG4gIHNlbGVjdGVkOiBib29sZWFuID0gZmFsc2U7XG4gIHNob3dEZXRhaWxzOiBib29sZWFuID0gZmFsc2U7XG5cbiAgQE91dHB1dCgpIHRvZ2dsZUF0dHJEZXRhaWw6IEV2ZW50RW1pdHRlcjxBZGRyZXNzU3BhY2VOb2RlPiA9IG5ldyBFdmVudEVtaXR0ZXI8QWRkcmVzc1NwYWNlTm9kZT4oKTtcblxuICBwcml2YXRlIF9ub2RlOiBBZGRyZXNzU3BhY2VOb2RlO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgYWRkcmVzc1NwYWNlU2VydmljZTogQWRkcmVzc1NwYWNlU2VydmljZSkge31cbiAgc2V0Tm9kZURhdGEobm9kZURhdGEpIHtcbiAgICB0aGlzLnNob3dEZXRhaWxzID0gdHJ1ZTtcbiAgICBjb25zdCB7IGF0dHJpYnV0ZXMsIHJlZmVyZW5jZXMgfSA9IG5vZGVEYXRhO1xuICAgIHRoaXMubm9kZURhdGFSZWYgPSByZWZlcmVuY2VzO1xuICAgIGNvbnN0IG9taXRMaXN0ID0gW1xuICAgICAgJ2F0dHJpYnV0ZXMnLFxuICAgICAgJ3JlZmVyZW5jZXMnLFxuICAgICAgJ2NoaWxkcmVuJyxcbiAgICAgICdjdXJyZW50bHlMb2FkaW5nQ2hpbGRyZW4nLFxuICAgICAgJ2V4cGFuZGVkJyxcbiAgICAgICdicm93c2VQYXRoJyxcbiAgICAgICdyZWxhdGl2ZVBhdGgnLFxuICAgICAgJ3BhcmVudE5vZGUnXG4gICAgXTtcbiAgICB0aGlzLm5vZGVEYXRhQXR0ciA9IE9iamVjdC5hc3NpZ24oe30sIGF0dHJpYnV0ZXMsIG9taXQobm9kZURhdGEsIG9taXRMaXN0KSk7XG4gIH1cblxuICB0b2dnbGVEZXRhaWwobm9kZSkge1xuICAgIHRoaXMuc2hvd0RldGFpbHMgPSAhdGhpcy5zaG93RGV0YWlscztcbiAgICB0aGlzLnRvZ2dsZUF0dHJEZXRhaWwuZW1pdChub2RlKTtcbiAgfVxuXG4gIG5hdmlnYXRlVG8oYW5jZXN0b3JzOiBzdHJpbmdbXSkge1xuICAgIGNvbnN0IG5vZGVOYXZEYXRhOiBOb2RlTmF2aWdhdGlvbkRhdGEgPSB7XG4gICAgICBub2RlOiB0aGlzLl9ub2RlLFxuICAgICAgc2VsZWN0ZWRBbmNlc3RvcklkczogYW5jZXN0b3JzXG4gICAgfTtcblxuICAgIHRoaXMudG9nZ2xlRGV0YWlsKHRoaXMuX25vZGUpO1xuICAgIHRoaXMuYWRkcmVzc1NwYWNlU2VydmljZS50cmlnZ2VyTm9kZVRvT3Blbihub2RlTmF2RGF0YSk7XG4gIH1cbn1cbiJdfQ==