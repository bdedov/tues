import * as tslib_1 from "tslib";
import { Component, Input } from '@angular/core';
import { sortBy } from 'lodash';
import { AlertService } from '../alert/alert.service';
var SearchOutletComponent = /** @class */ (function () {
    function SearchOutletComponent(alertService) {
        this.alertService = alertService;
        this.search = [];
    }
    SearchOutletComponent.prototype.openSearch = function () {
        var _this = this;
        setTimeout(function () { return _this.focusInputBox(); }, 100);
    };
    SearchOutletComponent.prototype.getByPriority = function () {
        return sortBy(this.search, this.byPriority);
    };
    SearchOutletComponent.prototype.closeDropdown = function (dropdown) {
        dropdown.hide();
    };
    SearchOutletComponent.prototype.verifyNotEmpty = function (term) {
        if (!term || term === '') {
            this.alertService.add({ text: 'Type something to execute a search.', type: 'warning' });
        }
    };
    SearchOutletComponent.prototype.byPriority = function (item) {
        return -item.priority;
    };
    SearchOutletComponent.prototype.focusInputBox = function () {
        var elementToFocus = document.querySelector('#search-header-menu input');
        if (elementToFocus) {
            elementToFocus.focus();
        }
    };
    SearchOutletComponent.ctorParameters = function () { return [
        { type: AlertService }
    ]; };
    tslib_1.__decorate([
        Input()
    ], SearchOutletComponent.prototype, "search", void 0);
    SearchOutletComponent = tslib_1.__decorate([
        Component({
            selector: 'c8y-search-outlet',
            template: "<ng-container *ngIf=\"search\">\n  <div class=\"dropdown\" dropdown #dropdown=\"bs-dropdown\" *ngFor=\"let item of getByPriority()\">\n    <button\n      title=\"{{ 'Search' | translate }}\"\n      type=\"button\"\n      class=\"main-header-button dropdown-toggle c8y-dropdown\"\n      (click)=\"openSearch()\"\n      dropdownToggle\n    >\n      <i [c8yIcon]=\"item.icon\" class=\"fa-2x\"></i>\n    </button>\n\n    <div\n      id=\"search-header-menu\"\n      class=\"search-header-menu dropdown-menu dropdown-menu-center\"\n      *dropdownMenu\n    >\n      <form\n        (ngSubmit)=\"verifyNotEmpty(item.term); item.onSearch(); closeDropdown(dropdown)\"\n        novalidate\n        #searchForm=\"ngForm\"\n      >\n        <div class=\"input-group input-group-search\" *ngIf=\"!item.template\">\n          <input\n            type=\"search\"\n            class=\"form-control input-lg\"\n            required=\"required\"\n            placeholder=\"{{ 'Search for groups or assets\u2026' | translate }}\"\n            (click)=\"$event.stopPropagation()\"\n            [(ngModel)]=\"item.term\"\n            name=\"searchTerm\"\n          />\n\n          <span class=\"input-group-btn\">\n            <button type=\"submit\" class=\"btn btn-link\" (click)=\"$event.stopPropagation()\">\n              <i [c8yIcon]=\"'arrow-right'\"></i>\n            </button>\n          </span>\n        </div>\n\n        <ng-container *c8yOutlet=\"item.template\"></ng-container>\n      </form>\n    </div>\n  </div>\n</ng-container>\n"
        })
    ], SearchOutletComponent);
    return SearchOutletComponent;
}());
export { SearchOutletComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VhcmNoLW91dGxldC5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AYzh5L25neC1jb21wb25lbnRzLyIsInNvdXJjZXMiOlsiY29yZS9zZWFyY2gvc2VhcmNoLW91dGxldC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsS0FBSyxFQUF5QixNQUFNLGVBQWUsQ0FBQztBQUV4RSxPQUFPLEVBQUUsTUFBTSxFQUFFLE1BQU0sUUFBUSxDQUFDO0FBQ2hDLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSx3QkFBd0IsQ0FBQztBQU90RDtJQUdFLCtCQUFvQixZQUEwQjtRQUExQixpQkFBWSxHQUFaLFlBQVksQ0FBYztRQUZyQyxXQUFNLEdBQWEsRUFBRSxDQUFDO0lBRWtCLENBQUM7SUFFbEQsMENBQVUsR0FBVjtRQUFBLGlCQUVDO1FBREMsVUFBVSxDQUFDLGNBQU0sT0FBQSxLQUFJLENBQUMsYUFBYSxFQUFFLEVBQXBCLENBQW9CLEVBQUUsR0FBRyxDQUFDLENBQUM7SUFDOUMsQ0FBQztJQUVELDZDQUFhLEdBQWI7UUFDRSxPQUFPLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztJQUM5QyxDQUFDO0lBRUQsNkNBQWEsR0FBYixVQUFjLFFBQVE7UUFDcEIsUUFBUSxDQUFDLElBQUksRUFBRSxDQUFDO0lBQ2xCLENBQUM7SUFFRCw4Q0FBYyxHQUFkLFVBQWUsSUFBSTtRQUNqQixJQUFJLENBQUMsSUFBSSxJQUFJLElBQUksS0FBSyxFQUFFLEVBQUU7WUFDeEIsSUFBSSxDQUFDLFlBQVksQ0FBQyxHQUFHLENBQUMsRUFBRSxJQUFJLEVBQUUscUNBQXFDLEVBQUUsSUFBSSxFQUFFLFNBQVMsRUFBRSxDQUFDLENBQUM7U0FDekY7SUFDSCxDQUFDO0lBRU8sMENBQVUsR0FBbEIsVUFBbUIsSUFBSTtRQUNyQixPQUFPLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQztJQUN4QixDQUFDO0lBRU8sNkNBQWEsR0FBckI7UUFDRSxJQUFNLGNBQWMsR0FBUSxRQUFRLENBQUMsYUFBYSxDQUFDLDJCQUEyQixDQUFDLENBQUM7UUFDaEYsSUFBSSxjQUFjLEVBQUU7WUFDbEIsY0FBYyxDQUFDLEtBQUssRUFBRSxDQUFDO1NBQ3hCO0lBQ0gsQ0FBQzs7Z0JBN0JpQyxZQUFZOztJQUZyQztRQUFSLEtBQUssRUFBRTt5REFBdUI7SUFEcEIscUJBQXFCO1FBSmpDLFNBQVMsQ0FBQztZQUNULFFBQVEsRUFBRSxtQkFBbUI7WUFDN0IsaWdEQUE2QztTQUM5QyxDQUFDO09BQ1cscUJBQXFCLENBaUNqQztJQUFELDRCQUFDO0NBQUEsQUFqQ0QsSUFpQ0M7U0FqQ1kscUJBQXFCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBJbnB1dCwgVmlld0NoaWxkLCBFbGVtZW50UmVmIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBTZWFyY2ggfSBmcm9tICcuL3NlYXJjaC5tb2RlbCc7XG5pbXBvcnQgeyBzb3J0QnkgfSBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IHsgQWxlcnRTZXJ2aWNlIH0gZnJvbSAnLi4vYWxlcnQvYWxlcnQuc2VydmljZSc7XG5pbXBvcnQgeyBBbGVydCB9IGZyb20gJy4uL2FsZXJ0L2FsZXJ0Lm1vZGVsJztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnYzh5LXNlYXJjaC1vdXRsZXQnLFxuICB0ZW1wbGF0ZVVybDogJy4vc2VhcmNoLW91dGxldC5jb21wb25lbnQuaHRtbCdcbn0pXG5leHBvcnQgY2xhc3MgU2VhcmNoT3V0bGV0Q29tcG9uZW50IHtcbiAgQElucHV0KCkgc2VhcmNoOiBTZWFyY2hbXSA9IFtdO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgYWxlcnRTZXJ2aWNlOiBBbGVydFNlcnZpY2UpIHt9XG5cbiAgb3BlblNlYXJjaCgpIHtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMuZm9jdXNJbnB1dEJveCgpLCAxMDApO1xuICB9XG5cbiAgZ2V0QnlQcmlvcml0eSgpIHtcbiAgICByZXR1cm4gc29ydEJ5KHRoaXMuc2VhcmNoLCB0aGlzLmJ5UHJpb3JpdHkpO1xuICB9XG5cbiAgY2xvc2VEcm9wZG93bihkcm9wZG93bikge1xuICAgIGRyb3Bkb3duLmhpZGUoKTtcbiAgfVxuXG4gIHZlcmlmeU5vdEVtcHR5KHRlcm0pIHtcbiAgICBpZiAoIXRlcm0gfHwgdGVybSA9PT0gJycpIHtcbiAgICAgIHRoaXMuYWxlcnRTZXJ2aWNlLmFkZCh7IHRleHQ6ICdUeXBlIHNvbWV0aGluZyB0byBleGVjdXRlIGEgc2VhcmNoLicsIHR5cGU6ICd3YXJuaW5nJyB9KTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGJ5UHJpb3JpdHkoaXRlbSkge1xuICAgIHJldHVybiAtaXRlbS5wcmlvcml0eTtcbiAgfVxuXG4gIHByaXZhdGUgZm9jdXNJbnB1dEJveCgpIHtcbiAgICBjb25zdCBlbGVtZW50VG9Gb2N1czogYW55ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NlYXJjaC1oZWFkZXItbWVudSBpbnB1dCcpO1xuICAgIGlmIChlbGVtZW50VG9Gb2N1cykge1xuICAgICAgZWxlbWVudFRvRm9jdXMuZm9jdXMoKTtcbiAgICB9XG4gIH1cbn1cbiJdfQ==